<?xml version="1.0" encoding="UTF-8"?> <!-- -*- nxml -*- -->
<transfer default="chunk">
  <section-def-cats>

     <def-cat n="proclise"> <!--fan que o pronome pase a proclítico-->
	  <cat-item tags="prn.itg.*"/>
	  <cat-item tags="adv.itg"/>
	  <cat-item tags="cnjsub"/>
	  <cat-item tags="rel.*"/>
	  <cat-item tags="adv"/>
	  <cat-item tags="ij"/>
	  <!--<cat-item tags="prn.*"/>-->
	  <cat-item tags="cnjcoo"/>
	  <cat-item tags="pr."/>
	  <cat-item tags="cnjadv"/>
	  <cat-item tags="preadv"/>
    </def-cat>
     
    <def-cat n="vblike">
	     <cat-item lemma="like" tags="vblex.*"/>
	     <cat-item lemma="love" tags="vblex.*"/>
    </def-cat>
		
    <def-cat n="to">
      <cat-item lemma="to" tags="pr"/>
    </def-cat>
    
    <def-cat n="hence">
	    <cat-item lemma="hence" tags="adv"/>
    </def-cat>
    
    <def-cat n="non">
      <cat-item lemma="non" tags="adv"/>
    </def-cat>
    
    <def-cat n="no">
      <cat-item lemma="no" tags="adv"/>
      <cat-item lemma="no" tags="det.*"/>
    </def-cat>
    
    <def-cat n="withno">
      <cat-item lemma="with no" tags="pr"/>
    </def-cat>
    
    <def-cat n="enough">
      <cat-item lemma="enough" tags="adv"/>
    </def-cat>
    
    <def-cat n="earlierlater">
	    <cat-item lemma="early" tags="adj.sint.comp"/>
	    <cat-item lemma="later" tags="adv"/>
    </def-cat>
    
    <def-cat n="thisthat">
	    <cat-item lemma="this" tags="det.dem.*"/>
	    <cat-item lemma="that" tags="det.dem.*"/>
	    <cat-item lemma="that" tags="cnjdub"/>
    </def-cat>

    <def-cat n="detquant">
      <cat-item tags="det.qnt.*"/>
    </def-cat>

    <def-cat n="all">
      <cat-item lemma="all" tags="predet.sp"/>
      <cat-item lemma="all" tags="prn.tn.mf.sp"/> <!-- falla o desambiguador -->
    </def-cat>

    <def-cat n="nomplural">
      <cat-item tags="n.pl"/>
    </def-cat>

    <def-cat n="nomingsg">
      <cat-item tags="n.sg"/>
      <cat-item tags="np.*"/>
      <cat-item tags="vblex.ger"/>
    </def-cat>
    
    <def-cat n="nom">
      <cat-item tags="n.*"/>
      <cat-item tags="np.*"/>
    </def-cat>
    
    <def-cat n="nomcomu">
      <cat-item tags="n.*"/>
    </def-cat>
    
    <def-cat n="nompropi">
      <cat-item tags="np.*"/>
    </def-cat>
    
    <def-cat n="nploc">
      <cat-item tags="np.loc.*"/>
    </def-cat>

    <def-cat n="adj">
      <cat-item tags="adj"/>
      <cat-item tags="adj.comp"/> 
      <cat-item tags="adj.sup"/> 
      <cat-item tags="adj.pos"/>
      <cat-item tags="adj.sint"/>
      <cat-item tags="adj.sint.*"/>
      <cat-item tags="vblex.pp"/> <!-- ok implica tocar as regras para a concordancia-->
      <cat-item tags="vbmod.pp"/> <!-- ok implica tocar as regras para a concordancia-->
    </def-cat>

    <def-cat n="adj2"><!--revisar as regras con 'adj' e 'adj2' -->
      <cat-item tags="adj"/>
      <cat-item tags="adj.sint"/>
      <cat-item tags="adj.sint.*"/>
      <cat-item tags="adj.comp"/>
      <cat-item tags="adj.sup"/>
    </def-cat> 

    <def-cat n="adj2pos">
      <cat-item tags="adj.pos"/>
      <cat-item tags="adj"/>
      <cat-item tags="adj.sint"/>
      <cat-item tags="adj.sint.*"/>
      <cat-item tags="adj.comp"/>
      <cat-item tags="adj.sup"/>
    </def-cat>

    <def-cat n="num">
      <cat-item tags="num.*"/>
      <cat-item tags="num"/>
      
    </def-cat>

    <def-cat n="det"><!--Determinantes e predeterminantes, van antepostos en galego -->
      <cat-item tags="det.dem.*"/>
      <cat-item tags="det.ind.*"/>
      <cat-item tags="det.def.*"/>
      <cat-item tags="det.pos.*"/>
      <cat-item tags="det.qnt.*"/>
      <cat-item tags="det.itg.*"/>
      <cat-item tags="det.ord.*"/>
      <cat-item tags="predet.*"/>
      <cat-item tags="rel.aa.*"/>
    </def-cat>

    <def-cat n="det2"><!--Poden ir precedidos doutro determinante e ir despois dun xenitivo saxón -->
      <cat-item tags="det.qnt.*"/>
      <cat-item tags="det.ord.*"/>
    </def-cat>

    
    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>

    <def-cat n="prep_cnjadv">
      <cat-item tags="pr"/>
      <cat-item lemma="before" tags="cnjadv"/><!--solución provisional, o tagger debería escoller <pr> ou que o t2x fixese algo con cnjadv + frase en xerundio ou + frase conxugada. -->
      <cat-item lemma="after" tags="cnjadv"/>
    </def-cat>

    <def-cat n="probj">
      <cat-item tags="prn.obj.*"/>
    </def-cat>

    <def-cat n="prnsubj">
      <cat-item tags="prn.subj.*"/>
    </def-cat>

    <def-cat n="prnref">
      <cat-item tags="prn.ref.*"/>
    </def-cat>

    <def-cat n="tn_itg_pos">
      <cat-item tags="prn.tn.*"/>
      <cat-item tags="prn.itg.*"/>
      <cat-item tags="prn.pos.*"/>
    </def-cat>

    <def-cat n="past">
      <cat-item tags="vblex.past"/>
    </def-cat>
    
    <def-cat n="verbcjser">
      <cat-item tags="vbser.pres"/>
      <cat-item tags="vbser.past"/>
      <cat-item tags="vbser.past.*"/>
      <cat-item tags="vbser.pri.*"/>
    </def-cat>

    <def-cat n="prnobjsubj">
      <cat-item tags="prn.obj.*"/>
      <cat-item tags="prn.subj.*"/>
    </def-cat>

    <def-cat n="verbcj">
      <cat-item tags="vblex.pres"/>
      <cat-item tags="vblex.past"/>
      <cat-item tags="vblex.past.*"/><!--Para a forma 'was' no verbo léxico -->
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.sep.pres"/>
      <cat-item tags="vblex.sep.past"/>
      <cat-item tags="vblex.sep.past.*"/>
      <cat-item tags="vblex.sep.pri.*"/>
      <cat-item tags="vbser.pres"/>
      <cat-item tags="vbser.past"/>
      <cat-item tags="vbser.past.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbhaver.pres"/><!--para cando entra por esta regra un vbhaver mal desambigüado -->
      <cat-item tags="vbhaver.past"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item lemma="can" tags="vaux.*"/><!--para cando vaia só entre por esta regra (I can, workers can) -->
    </def-cat>

    <def-cat n="verbcjsenhaber">
      <cat-item tags="vblex.pres"/>
      <cat-item tags="vblex.past"/>
      <cat-item tags="vblex.past.*"/><!--Para a forma 'was' no verbo léxico -->
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.sep.pres"/>
      <cat-item tags="vblex.sep.past"/>
      <cat-item tags="vblex.sep.past.*"/>
      <cat-item tags="vblex.sep.pri.*"/> 
    </def-cat>

    <def-cat n="verbcjnoser">
      <cat-item tags="vblex.pres"/>
      <cat-item tags="vblex.past"/>
      <cat-item tags="vblex.pri.*"/>

      <cat-item tags="vblex.sep.pres"/>
      <cat-item tags="vblex.sep.past"/>
      <cat-item tags="vblex.sep.pri.*"/>
    </def-cat>

    <def-cat n="controlverb">
      <cat-item lemma="desire" tags="vblex.inf"/>
      <cat-item lemma="need" tags="vblex.inf"/>
      <cat-item lemma="wish" tags="vblex.inf"/>
      <cat-item lemma="hope" tags="vblex.inf"/>
      <cat-item lemma="choose" tags="vblex.inf"/>
      <cat-item lemma="expect" tags="vblex.inf"/>
      <cat-item lemma="pretend" tags="vblex.inf"/>
      <cat-item lemma="prefer" tags="vblex.inf"/>
      <cat-item lemma="promise" tags="vblex.inf"/>
      <cat-item lemma="recommend" tags="vblex.inf"/>
      <cat-item lemma="decide" tags="vblex.inf"/>
      <cat-item lemma="manage" tags="vblex.inf"/>
      <cat-item lemma="refuse" tags="vblex.inf"/>
      <cat-item lemma="agree" tags="vblex.inf"/>
      <cat-item lemma="avoid" tags="vblex.inf"/>
      <cat-item lemma="enjoy" tags="vblex.inf"/>
      <cat-item lemma="hate" tags="vblex.inf"/>
      <cat-item lemma="intend" tags="vblex.inf"/>
      <cat-item lemma="plan" tags="vblex.inf"/>
      <cat-item lemma="continue" tags="vblex.inf"/>
      <cat-item lemma="resolve" tags="vblex.inf"/>
      <cat-item lemma="try" tags="vblex.inf"/>
      <cat-item lemma="like" tags="vblex.inf"/>
      <cat-item lemma="vow" tags="vblex.inf"/>


      <cat-item lemma="desire" tags="vblex.pres"/>
      <cat-item lemma="need" tags="vblex.pres"/>
      <cat-item lemma="wish" tags="vblex.pres"/>
      <cat-item lemma="hope" tags="vblex.pres"/>
      <cat-item lemma="choose" tags="vblex.pres"/>
      <cat-item lemma="expect" tags="vblex.pres"/>
      <cat-item lemma="pretend" tags="vblex.pres"/>
      <cat-item lemma="prefer" tags="vblex.pres"/>
      <cat-item lemma="promise" tags="vblex.pres"/>
      <cat-item lemma="recommend" tags="vblex.pres"/>
      <cat-item lemma="decide" tags="vblex.pres"/>
      <cat-item lemma="manage" tags="vblex.pres"/>
      <cat-item lemma="refuse" tags="vblex.pres"/>
      <cat-item lemma="agree" tags="vblex.pres"/>
      <cat-item lemma="avoid" tags="vblex.pres"/>
      <cat-item lemma="enjoy" tags="vblex.pres"/>
      <cat-item lemma="hate" tags="vblex.pres"/>
      <cat-item lemma="intend" tags="vblex.pres"/>
      <cat-item lemma="plan" tags="vblex.pres"/>
      <cat-item lemma="continue" tags="vblex.pres"/>
      <cat-item lemma="resolve" tags="vblex.pres"/>
      <cat-item lemma="try" tags="vblex.pres"/>
      <cat-item lemma="like" tags="vblex.pres"/>
      <cat-item lemma="vow" tags="vblex.pres"/>


      <cat-item lemma="desire" tags="vblex.past"/>
      <cat-item lemma="need" tags="vblex.past"/>
      <cat-item lemma="wish" tags="vblex.past"/>
      <cat-item lemma="hope" tags="vblex.past"/>
      <cat-item lemma="choose" tags="vblex.past"/>
      <cat-item lemma="expect" tags="vblex.past"/>
      <cat-item lemma="pretend" tags="vblex.past"/>
      <cat-item lemma="prefer" tags="vblex.past"/>
      <cat-item lemma="promise" tags="vblex.past"/>
      <cat-item lemma="recommend" tags="vblex.past"/>
      <cat-item lemma="decide" tags="vblex.past"/>
      <cat-item lemma="manage" tags="vblex.past"/>
      <cat-item lemma="refuse" tags="vblex.past"/>
      <cat-item lemma="agree" tags="vblex.past"/>
      <cat-item lemma="avoid" tags="vblex.past"/>
      <cat-item lemma="enjoy" tags="vblex.past"/>
      <cat-item lemma="hate" tags="vblex.past"/>
      <cat-item lemma="intend" tags="vblex.past"/>
      <cat-item lemma="plan" tags="vblex.past"/>
      <cat-item lemma="continue" tags="vblex.past"/>
      <cat-item lemma="resolve" tags="vblex.past"/>
      <cat-item lemma="try" tags="vblex.past"/>
      <cat-item lemma="like" tags="vblex.past"/>
      <cat-item lemma="vow" tags="vblex.past"/>


      <cat-item lemma="desire" tags="vblex.pri.*"/>
      <cat-item lemma="need" tags="vblex.pri.*"/>
      <cat-item lemma="wish" tags="vblex.pri.*"/>
      <cat-item lemma="hope" tags="vblex.pri.*"/>
      <cat-item lemma="choose" tags="vblex.pri.*"/>
      <cat-item lemma="expect" tags="vblex.pri.*"/>
      <cat-item lemma="pretend" tags="vblex.pri.*"/>
      <cat-item lemma="prefer" tags="vblex.pri.*"/>
      <cat-item lemma="promise" tags="vblex.pri.*"/>
      <cat-item lemma="recommend" tags="vblex.pri.*"/>
      <cat-item lemma="decide" tags="vblex.pri.*"/>
      <cat-item lemma="manage" tags="vblex.pri.*"/>
      <cat-item lemma="refuse" tags="vblex.pri.*"/>
      <cat-item lemma="agree" tags="vblex.pri.*"/>
      <cat-item lemma="avoid" tags="vblex.pri.*"/>
      <cat-item lemma="enjoy" tags="vblex.pri.*"/>
      <cat-item lemma="hate" tags="vblex.pri.*"/>
      <cat-item lemma="intend" tags="vblex.pri.*"/>
      <cat-item lemma="plan" tags="vblex.pri.*"/>
      <cat-item lemma="continue" tags="vblex.pri.*"/>
      <cat-item lemma="resolve" tags="vblex.pri.*"/>
      <cat-item lemma="try" tags="vblex.pri.*"/>
      <cat-item lemma="like" tags="vblex.pri.*"/>
      <cat-item lemma="vow" tags="vblex.pri.*"/>


      <cat-item lemma="desire" tags="vblex.ger"/>
      <cat-item lemma="need" tags="vblex.ger"/>
      <cat-item lemma="wish" tags="vblex.ger"/>
      <cat-item lemma="hope" tags="vblex.ger"/>
      <cat-item lemma="choose" tags="vblex.ger"/>
      <cat-item lemma="expect" tags="vblex.ger"/>
      <cat-item lemma="pretend" tags="vblex.ger"/>
      <cat-item lemma="prefer" tags="vblex.ger"/>
      <cat-item lemma="promise" tags="vblex.ger"/>
      <cat-item lemma="recommend" tags="vblex.ger"/>
      <cat-item lemma="decide" tags="vblex.ger"/>
      <cat-item lemma="manage" tags="vblex.ger"/>
      <cat-item lemma="refuse" tags="vblex.ger"/>
      <cat-item lemma="agree" tags="vblex.ger"/>
      <cat-item lemma="avoid" tags="vblex.ger"/>
      <cat-item lemma="enjoy" tags="vblex.ger"/>
      <cat-item lemma="hate" tags="vblex.ger"/>
      <cat-item lemma="intend" tags="vblex.ger"/>
      <cat-item lemma="plan" tags="vblex.ger"/>
      <cat-item lemma="continue" tags="vblex.ger"/>
      <cat-item lemma="resolve" tags="vblex.ger"/>
      <cat-item lemma="try" tags="vblex.ger"/>
      <cat-item lemma="like" tags="vblex.ger"/>
      <cat-item lemma="vow" tags="vblex.ger"/>
    </def-cat>


    <def-cat n="controlverbger">
      <cat-item lemma="desire" tags="vblex.ger"/>
      <cat-item lemma="need" tags="vblex.ger"/>
      <cat-item lemma="wish" tags="vblex.ger"/>
      <cat-item lemma="hope" tags="vblex.ger"/>
      <cat-item lemma="choose" tags="vblex.ger"/>
      <cat-item lemma="expect" tags="vblex.ger"/>
      <cat-item lemma="pretend" tags="vblex.ger"/>
      <cat-item lemma="prefer" tags="vblex.ger"/>
      <cat-item lemma="promise" tags="vblex.ger"/>
      <cat-item lemma="recommend" tags="vblex.ger"/>
      <cat-item lemma="decide" tags="vblex.ger"/>
      <cat-item lemma="manage" tags="vblex.ger"/>
      <cat-item lemma="refuse" tags="vblex.ger"/>
      <cat-item lemma="agree" tags="vblex.ger"/>
      <cat-item lemma="avoid" tags="vblex.ger"/>
      <cat-item lemma="enjoy" tags="vblex.ger"/>
      <cat-item lemma="hate" tags="vblex.ger"/>
      <cat-item lemma="intend" tags="vblex.ger"/>
      <cat-item lemma="plan" tags="vblex.ger"/>
      <cat-item lemma="continue" tags="vblex.ger"/>
      <cat-item lemma="resolve" tags="vblex.ger"/>
      <cat-item lemma="try" tags="vblex.ger"/>
      <cat-item lemma="like" tags="vblex.ger"/>
       <cat-item lemma="vow" tags="vblex.ger"/>
    </def-cat>


    <def-cat n="controlverbpp">
      <cat-item lemma="desire" tags="vblex.pp"/>
      <cat-item lemma="need" tags="vblex.pp"/>
      <cat-item lemma="wish" tags="vblex.pp"/>
      <cat-item lemma="hope" tags="vblex.pp"/>
      <cat-item lemma="choose" tags="vblex.pp"/>
      <cat-item lemma="expect" tags="vblex.pp"/>
      <cat-item lemma="pretend" tags="vblex.pp"/>
      <cat-item lemma="prefer" tags="vblex.pp"/>
      <cat-item lemma="promise" tags="vblex.pp"/>
      <cat-item lemma="recommend" tags="vblex.pp"/>
      <cat-item lemma="decide" tags="vblex.pp"/>
      <cat-item lemma="manage" tags="vblex.pp"/>
      <cat-item lemma="refuse" tags="vblex.pp"/>
      <cat-item lemma="agree" tags="vblex.pp"/>
      <cat-item lemma="avoid" tags="vblex.pp"/>
      <cat-item lemma="enjoy" tags="vblex.pp"/>
      <cat-item lemma="hate" tags="vblex.pp"/>
      <cat-item lemma="intend" tags="vblex.pp"/>
      <cat-item lemma="plan" tags="vblex.pp"/>
      <cat-item lemma="continue" tags="vblex.pp"/>
      <cat-item lemma="resolve" tags="vblex.pp"/>
      <cat-item lemma="try" tags="vblex.pp"/>
      <cat-item lemma="like" tags="vblex.pp"/>
      <cat-item lemma="vow" tags="vblex.pp"/>
    </def-cat>

    <def-cat n="copulatiu">
      <cat-item tags="vbser.pres"/>
      <cat-item tags="vbser.past"/>
      <cat-item tags="vbser.past.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item lemma="look" tags="vblex.pres"/>
      <cat-item lemma="look" tags="vblex.past"/>
      <cat-item lemma="look" tags="vblex.pri.*"/>
      <cat-item lemma="seem" tags="vblex.pres"/>
      <cat-item lemma="seem" tags="vblex.past"/>
      <cat-item lemma="seem" tags="vblex.pri.*"/>
      <cat-item lemma="become" tags="vblex.pres"/>
      <cat-item lemma="become" tags="vblex.past"/>
      <cat-item lemma="become" tags="vblex.pri.*"/>
      <cat-item lemma="feel" tags="vblex.pres"/>
      <cat-item lemma="feel" tags="vblex.past"/>
      <cat-item lemma="feel" tags="vblex.pri.*"/>
      <cat-item lemma="get" tags="vblex.pres"/>
      <cat-item lemma="get" tags="vblex.past"/>
      <cat-item lemma="get" tags="vblex.pri.*"/>
    </def-cat>

    <def-cat n="inf">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.sep.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbmod.inf"/>
      <cat-item tags="vaux.inf"/>
    </def-cat>

    <def-cat n="infpres">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pres"/><!--De momento detéctaos tamén á espera de ver se o tagger os distingue. Mudalo máis adiante se é o caso. -->
      <cat-item tags="vblex.sep.inf"/>
      <cat-item tags="vblex.sep.pres"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbser.pres"/>
    </def-cat>
    
    <def-cat n="likeloveinfpres">
	    <cat-item lemma="like" tags="vblex.inf"/>
	    <cat-item lemma="like" tags="vblex.pres"/>
	    <cat-item lemma="like" tags="vblex.sep.inf"/>
	    <cat-item lemma="like" tags="vblex.sep.pres"/>
	    <cat-item lemma="love" tags="vblex.inf"/>
	    <cat-item lemma="love" tags="vblex.pres"/>
	    <cat-item lemma="love" tags="vblex.sep.inf"/>
	    <cat-item lemma="love" tags="vblex.sep.pres"/>
    </def-cat>

    <def-cat n="modinf"><!--Verbos modais (have to, want to, be able to), que van seguidos de infinitivo (como os auxiliares) e se conxugan (will have to, will be able to). Os auxiliares non poden levar outros aux diante (*I will can, I do not can) : 'have to', 'want to'-->
      <cat-item tags="vbmod.inf"/>
      <cat-item tags="vbmod.pres"/><!--De momento detéctaos tamén á espera de ver se o tagger os distingue -->
    </def-cat>

    <def-cat n="mod"><!--Verbos modais (have to, want to, be able to), que van seguidos de infinitivo (como os auxiliares) e se conxugan (will have to, will be able to). Os auxiliares non poden levar outros aux diante (*I will can, I do not can). Por iso se poñen en categorías diferentes, porque funcionan diferente coas negacións, adverbios intercalados, preguntas, etc. -->
      <cat-item tags="vbmod.*"/>
    </def-cat>

    <def-cat n="ger">
      <cat-item tags="vblex.ger"/>
      <cat-item tags="reporting.ger"/>
      <cat-item tags="vblex.sep.ger"/>
      <cat-item tags="vbser.ger"/>
    </def-cat>

    <def-cat n="haveger">
      <cat-item tags="vbhaver.ger"/>
    </def-cat>

    <def-cat n="auxtemps">
      <cat-item lemma="will" tags="vaux.*"/>
      <cat-item lemma="would" tags="vaux.*"/>
      <cat-item lemma="shall" tags="vaux.*"/>
    </def-cat>

    <def-cat n="auxmod"><!-- Faltan: ought to, shall -->
      <cat-item lemma="can" tags="vaux.*"/>
      <cat-item lemma="must" tags="vaux.*"/>
      <cat-item lemma="should" tags="vaux.*"/>
      <cat-item lemma="may" tags="vaux.*"/>
      <cat-item lemma="might" tags="vaux.*"/>
    </def-cat>

    <def-cat n="auxnocan"><!-- Faltan: (must?, should?, ought to) -->
      <cat-item lemma="will" tags="vaux.*"/>
      <cat-item lemma="would" tags="vaux.*"/>
      <cat-item lemma="shall" tags="vaux.*"/>
      <cat-item lemma="may" tags="vaux.*"/>
      <cat-item lemma="might" tags="vaux.*"/>
      <cat-item lemma="do" tags="vbdo.*"/>
      <cat-item lemma="do" tags="vblex.*"/><!-- ATENCIÓN, só de momento porque o tagger erra. -->
    </def-cat>


    <def-cat n="do">
      <cat-item lemma="do" tags="vbdo.*"/>
      <cat-item lemma="do" tags="vblex.pri.*"/><!--ATENCIÓN, só de momento porque o tagger erra. -->
      <cat-item lemma="do" tags="vblex.pres"/>
      <cat-item lemma="do" tags="vblex.past"/>
      <cat-item lemma="do" tags="vblex.inf"/>
    </def-cat>

    <def-cat n="going">
      <cat-item lemma="go" tags="vblex.ger"/>
    </def-cat>

    <def-cat n="apos">
      <cat-item tags="apos"/>
    </def-cat>

    <def-cat n="coma">
      <cat-item tags="cm"/>
    </def-cat>

    <def-cat n="have_aux">
      <cat-item tags="vbhaver.*"/>
    </def-cat>

    <def-cat n="have_aux_inf">
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbhaver.pres"/>
    </def-cat>

    <def-cat n="ppadj"><!--Participios que poden actuar como adxectivos (o verbo 'ser' vai aquí?) -->
      <cat-item tags="vblex.pp"/>
      <cat-item tags="vblex.sep.pp"/>
      <cat-item tags="vbser.pp"/>
    </def-cat>

    <def-cat n="pp">
      <cat-item tags="vblex.pp"/>
      <cat-item tags="vblex.sep.pp"/>
      <cat-item tags="vbser.pp"/>
      <cat-item tags="vbmod.pp"/>
    </def-cat>

    <def-cat n="pprs">
      <cat-item tags="vblex.pprs"/>
      <cat-item tags="vblex.sep.pprs"/>
      <cat-item tags="vbhaver.pprs"/>
      <cat-item tags="vbser.pprs"/>
      <cat-item tags="vbmod.pprs"/>
    </def-cat>

    <def-cat n="vbsubs">
      <cat-item tags="vblex.subs"/>
      <cat-item tags="vblex.sep.subs"/>
      <cat-item tags="vbhaver.subs"/>
      <cat-item tags="vbser.subs"/>
      <cat-item tags="vbmod.subs"/>
    </def-cat>

    <def-cat n="adv_preadv">
      <cat-item tags="preadv"/>
      <cat-item tags="adv"/>
    </def-cat>

    <def-cat n="adv">
      <cat-item tags="adv"/>
    </def-cat>
    
    <def-cat n="adv_not">
      <cat-item lemma="not" tags="adv"/>
      <cat-item lemma="never" tags="adv"/>
    </def-cat>

    <def-cat n="ago">
      <cat-item lemma="ago" tags="adv"/>
    </def-cat>

    <def-cat n="preadv">
      <cat-item tags="preadv"/>
    </def-cat>

    <def-cat n="advitg">
      <cat-item tags="adv.itg"/>
    </def-cat>

    <def-cat n="cnj">
      <cat-item tags="cnjcoo"/>
      <cat-item tags="cnjsub"/>
      <cat-item tags="cnjadv"/>
    </def-cat>

    <def-cat n="cnjcoo">
      <cat-item lemma="and" tags="cnjcoo"/>
      <cat-item lemma="or" tags="cnjcoo"/>
    </def-cat>

    <def-cat n="such_a">
      <cat-item lemma="such a" tags="det.ind.sg"/>
    </def-cat>

    <def-cat n="yearmonth">
      <cat-item lemma="year" tags="n.sg"/>
      <cat-item lemma="year" tags="n.pl"/>
      <cat-item lemma="month" tags="n.sg"/>
      <cat-item lemma="month" tags="n.pl"/>
    </def-cat>

    <def-cat n="old">
      <cat-item lemma="old" tags="adj.sint"/>
    </def-cat>

    <def-cat n="there">
      <cat-item lemma="there" tags="adv"/>
    </def-cat>

    <def-cat n="genitiu">
      <cat-item tags="gen"/>            
    </def-cat>

    <def-cat n="be">
      <cat-item lemma="be" tags="vbser.*"/>
    </def-cat>
    
    <def-cat n="be_sorry">
      <cat-item lemma="be# sorry" tags="vblex.*"/>
      <cat-item lemma="be# very sorry" tags="vblex.*"/>
    </def-cat>

    <def-cat n="be_past_pres">
      <cat-item lemma="be" tags="vbser.past"/>
      <cat-item lemma="be" tags="vbser.past.*"/>
      <cat-item lemma="be" tags="vbser.pres"/>
      <cat-item lemma="be" tags="vbser.pri.*"/>
    </def-cat>

    <def-cat n="turn">
	    <cat-item lemma="turn" tags="vblex.*"/>
    </def-cat>
    
    <def-cat n="relnom">
      <cat-item tags="rel.nn.*"/>	  
    </def-cat>

    <def-cat n="reladj">
      <cat-item tags="rel.an.*"/>	  
    </def-cat>

    <def-cat n="relaa">
      <cat-item tags="rel.aa.*"/>	  
    </def-cat>
    
    <def-cat n="which">
      <cat-item lemma="which" tags="prn.itg.*"/>
      <cat-item lemma="which" tags="rel.an.*"/>
    </def-cat>

    <def-cat n="sent">
      <cat-item tags="sent"/>
    </def-cat>

    <def-cat n="guio">
      <cat-item tags="guio"/>
    </def-cat>
   
    <def-cat n="descon">
      <cat-item lemma="**" tags=""/>
    </def-cat>

    <def-cat n="tempo">
      <cat-item lemma="second" tags="n.*"/>
      <cat-item lemma="minute" tags="n.*"/>
      <cat-item lemma="hour" tags="n.*"/>
      <cat-item lemma="day" tags="n.*"/>
      <cat-item lemma="week" tags="n.*"/>
      <cat-item lemma="fortnight" tags="n.*"/>
      <cat-item lemma="month" tags="n.*"/>
      <cat-item lemma="year" tags="n.*"/>
      <cat-item lemma="decade" tags="n.*"/>
      <cat-item lemma="century" tags="n.*"/>
    </def-cat>

    <def-cat n="comasent">
      <cat-item tags="sent"/>
      <cat-item tags="cm"/>
    </def-cat>
		
    <def-cat n="as">
      <cat-item lemma="as" tags="pr"/>
      <cat-item lemma="as" tags="cnjadv"/>
      <cat-item lemma="as" tags="preadv"/>
    </def-cat>
    			
    <def-cat n="justadv">
      <cat-item lemma="just" tags="adv"/>
    </def-cat>
    	    			
    <def-cat n="a">
      <cat-item lemma="a" tags="det.ind.sg"/>
    </def-cat>
    		
    <def-cat n="manymuch">
      <cat-item lemma="many" tags="prn.tn.mf.pl"/>      
      <cat-item lemma="many" tags="det.qnt.pl"/>
      <cat-item lemma="much" tags="det.qnt.sg"/>
    </def-cat>
    
    <def-cat n="multiverbos">
      <cat-item lemma="get# used to" tags="vblex.inf"/>
      <cat-item lemma="be# used to" tags="vblex.inf"/>      
      <cat-item lemma="look# forward to" tags="vblex.inf"/>      
    </def-cat>
        
    <def-cat n="like">
      <cat-item lemma="like" tags="pr"/>
      <cat-item lemma="like" tags="vblex.*"/>
    </def-cat>
    
    
  </section-def-cats>
  <section-def-attrs>
    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
      <attr-item tags="np.loc"/>
      <attr-item tags="np.ant"/>
      <attr-item tags="np.cog"/>
      <attr-item tags="np.al"/>	
      <attr-item tags="adv"/>	  
    </def-attr>

    <def-attr n="a_np">
      <attr-item tags="np"/>
    </def-attr>

    <def-attr n="a_np_acr">
      <attr-item tags="np"/>
      <attr-item tags="acr"/>
    </def-attr>

    <def-attr n="a_adj">          
      <attr-item tags="adj"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vbmod.pp"/>
      <attr-item tags="vblex.pron.pp"/>
    </def-attr>

    <def-attr n="grau_adj">          
      <attr-item tags="comp"/>
      <attr-item tags="sup"/>
    </def-attr>  

    <def-attr n="a_det">
      <attr-item tags="det.dem"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.def"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="det.qnt"/>
      <attr-item tags="det.itg"/>	  	 
      <attr-item tags="det.ord"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="num"/>
      <attr-item tags="predet"/>
      <attr-item tags="rel.aa"/>
    </def-attr>

    <def-attr n="a_prnpro">
      <attr-item tags="prn.pro"/>
    </def-attr>
    
    <def-attr n="a_prnenc">
      <attr-item tags="prn.enc"/>
    </def-attr>
    
    <def-attr n="a_num">
      <attr-item tags="num"/>
      <attr-item tags="num.percent"/>
      <attr-item tags="num.ord"/>
      <attr-item tags="num.mon"/>
    </def-attr>

    <def-attr n="a_verb">
      <attr-item tags="vblex"/>	  
      <attr-item tags="vblex.pron"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbmod"/>
    </def-attr>

    <def-attr n="a_have_aux">
      <attr-item tags="vbhaver"/>
    </def-attr>

    <def-attr n="a_pp">
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vblex.pron.pp"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbmod.pp"/>
    </def-attr>

    <def-attr n="a_aux">
      <attr-item tags="vaux"/>
    </def-attr>

    <def-attr n="a_prn">
      <attr-item tags="prn"/>
    </def-attr>

    <def-attr n="a_adv">
      <attr-item tags="adv"/>
      <attr-item tags="preadv"/>
      <attr-item tags="adv.itg"/>
      <attr-item tags="cnjadv"/>
    </def-attr>

    <def-attr n="a_rel">
      <attr-item tags="rel.nn"/>
      <attr-item tags="rel.an"/>
      <attr-item tags="rel.adv"/>
    </def-attr>

    <def-attr n="tipus_rel">
      <attr-item tags="nn"/>
      <attr-item tags="an"/>
      <attr-item tags="adv"/>
    </def-attr>

    <def-attr n="tipus_prn">
      <attr-item tags="tn"/>
      <attr-item tags="obj"/>
      <attr-item tags="enc"/>
      <attr-item tags="itg"/>
      <attr-item tags="pos"/>
    </def-attr>

    <def-attr n="pers">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
      <attr-item tags="PD"/>
    </def-attr>

    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="mf"/>
      <attr-item tags="GD"/>
      <attr-item tags="nt"/>
    </def-attr>

    <def-attr n="gen_sense_mf">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="GD"/>
      <attr-item tags="nt"/>
    </def-attr>

    <def-attr n="gen_mf">
      <attr-item tags="mf"/>
    </def-attr>

    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>
    
    <def-attr n="nbr_sense_sp">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="ND"/>
    </def-attr>

   <def-attr n="nbr_sp">
      <attr-item tags="sp"/>
    </def-attr>

    <def-attr n="temps">
      <attr-item tags="cni"/>
      <attr-item tags="fti"/>  
      <attr-item tags="ifi"/>
      <attr-item tags="imp"/>
      <attr-item tags="pii"/>
      <attr-item tags="pis"/>
      <attr-item tags="inf"/>
      <attr-item tags="prs"/>
      <attr-item tags="pres"/>
      <attr-item tags="past"/>
      <attr-item tags="pri"/>
      <attr-item tags="pp"/>
      <attr-item tags="ger"/>
      <attr-item tags="pprs"/>
      <attr-item tags="subs"/>
    </def-attr>
  

  </section-def-attrs>
  <section-def-vars>
    <def-var n="genere" v="&amp;lt;m&amp;gt;"/>
    <def-var n="nombre" v="&amp;lt;sg&amp;gt;"/>
    <def-var n="interrogativa"/>
    <def-var n="exclamativa"/>
    <def-var n="neg"/>
    <def-var n="adjectiu1"/>  
    <def-var n="adjectiu2"/>       
    <def-var n="auxiliar"/>
    <def-var n="caseFirstWord"/>
    <def-var n="EOS" v="true"/>
    <def-var n="lema"/>
    <def-var n="lema_SV"/>
    <def-var n="verbfinal"/>
    <def-var n="temps_chunk"/>
    <def-var n="pers_chunk"/>
    <def-var n="nbr_chunk"/>
    <def-var n="nbr_qual"/>
    <def-var n="gen_chunk"/>
    <def-var n="gen_qual"/>
    <def-var n="gen_paraula"/>
    <def-var n="nbr_paraula"/>
    <def-var n="pronom"/>
    <def-var n="pronomenc"/>
    <def-var n="paraula1"/>
    <def-var n="paraula2"/>
    <def-var n="tipus_verb"/>
    <def-var n="tipus_verb_imp"/>
    <def-var n="negative"/>
    <def-var n="tipus_det"/>
  </section-def-vars>

  <section-def-lists>
	  
     <def-list n="prnsubj3">
	     <list-item v="we all"/>
	     <list-item v="you all"/>
	     <list-item v="they all"/>
    </def-list>

    <def-list n="reportingverb"> <!-- verbos que poden non levar THAT -->
      <list-item v="say"/>
      <list-item v="admit"/>
      <list-item v="agree"/>
      <list-item v="decide"/>
      <list-item v="deny"/>
      <list-item v="explain"/>
      <list-item v="insist"/>
      <list-item v="promise"/>
      <list-item v="recommend"/>
      <list-item v="suggest"/>
      <list-item v="point"/>
      <list-item v="think"/>
      <list-item v="believe"/>
      <list-item v="hope"/>
      <list-item v="fear"/>
      <list-item v="suppose"/>
    </def-list>

    <def-list n="controlnouns">
      <list-item v="desire"/>
      <list-item v="order"/>
      <list-item v="need"/>
      <list-item v="right"/>
      <list-item v="duty"/>
      <list-item v="failure"/>
      <list-item v="power"/>
      <list-item v="wish"/>
      <list-item v="capacity"/>
      <list-item v="ability"/>
      <list-item v="hope"/>
      <list-item v="chance"/>
      <list-item v="honour"/>
      <list-item v="compulsion"/>
      <list-item v="responsibility"/>
      <list-item v="opportunity"/>
      <list-item v="idea"/>
      <list-item v="record"/>
      <list-item v="way"/>
      <list-item v="attempt"/>
      <list-item v="obligation"/>
      <list-item v="impulse"/>
      <list-item v="surprise"/>
      <list-item v="will"/>
      <list-item v="mean"/>
    </def-list>

    <def-list n="tractaments"> <!--talvez habería que mudar a categoría e polos como determinantes -->
      <list-item v="Mr."/> 
      <list-item v="Mrs."/> 
      <list-item v="Ms."/> 
      <list-item v="Dr."/>
    </def-list>

    <def-list n="days"> 
      <list-item v="Monday"/> 
      <list-item v="Tuesday"/> 
      <list-item v="Wednesday"/> 
      <list-item v="Thursday"/> 
      <list-item v="Friday"/>
      <list-item v="Saturday"/>
      <list-item v="Sunday"/>
    </def-list>

    <def-list n="adv_neg">
      <list-item v="not"/>
      <list-item v="never"/>
    </def-list>


    <def-list n="verbs_modals">
      <list-item v="can"/>
      <list-item v="must"/>
      <list-item v="should"/>
      <list-item v="may"/>
      <list-item v="might"/>
    </def-list>
 
    <def-list n="numeros25">
      <list-item v="1"/>
      <list-item v="2"/>
      <list-item v="3"/>
      <list-item v="4"/>
      <list-item v="5"/>
      <list-item v="6"/>
      <list-item v="7"/>
      <list-item v="8"/>
      <list-item v="9"/>
      <list-item v="10"/>
      <list-item v="11"/>
      <list-item v="12"/>
      <list-item v="13"/>
      <list-item v="14"/>
      <list-item v="15"/>
      <list-item v="16"/>
      <list-item v="17"/>
      <list-item v="18"/>
      <list-item v="19"/>
      <list-item v="one"/>
      <list-item v="two"/>
      <list-item v="three"/>
      <list-item v="four"/>
      <list-item v="five"/>
      <list-item v="six"/>
      <list-item v="seven"/>
      <list-item v="eight"/>
      <list-item v="nine"/>
      <list-item v="ten"/>
      <list-item v="eleven"/>
      <list-item v="twelve"/>
      <list-item v="thirteen"/>
      <list-item v="fourteen"/>
      <list-item v="fifteen"/>
      <list-item v="sixteen"/>
      <list-item v="seventeen"/>
      <list-item v="eighteen"/>
      <list-item v="nineteen"/>
    </def-list>
 
     <def-list n="temporais">
	<list-item v="minute"/>
	<list-item v="hour"/>
	<list-item v="day"/>
	<list-item v="week"/>
	<list-item v="fortnight"/>
	<list-item v="month"/>
	<list-item v="year"/>
	<list-item v="decade"/>
	<list-item v="century"/>
    </def-list>
    
  </section-def-lists>

  <section-def-macros>

    <def-macro n="elimina_GDND" npar="1">
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <let>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <let>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	  </let>
	</when>
      </choose>  
</def-macro>


<def-macro n="posa_GDND" npar="1"><!--para pór valores de GD e ND en adxectivos e determinantes, que veñen do bilingüe sen valor e por tanto é imposíbel facer ningunha operación de mudanza -->

 <choose>
       <when><!--se a palabra non ten valor de xénero (e neste caso, tampouco de número) -->
	 <test>
	   <equal>
	     <clip pos="1" side="tl" part="gen"/>
	     <lit v=""/>
	   </equal>
	 </test>
	 <let>
	   <var n="paraula1"/>
	   <clip pos="1" side="tl" part="lemh"/>
	 </let>
	 <append n="paraula1">
	   <clip pos="1" side="tl" part="tags"/>
	   <lit-tag v="GD"/>
	   <lit-tag v="ND"/>
	   <clip pos="1" side="tl" part="lemq"/>
	 </append>
	 <let>
	   <clip pos="1" side="tl" part="whole"/>
	   <var n="paraula1"/>
	 </let>
       </when>
       <when><!--se a palabra non ten valor de número (mais si de xénero, xa que senón tería entrado polo when anterior) -->
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit v=""/>
	    </equal>
	  </test>
	   <let>
	   <var n="paraula1"/>
	   <clip pos="1" side="tl" part="lemh"/>
	 </let>
	 <append n="paraula1">
	   <clip pos="1" side="tl" part="tags"/>
	   <lit-tag v="ND"/>
	   <clip pos="1" side="tl" part="lemq"/>
	 </append>
	 <let>
	   <clip pos="1" side="tl" part="whole"/>
	   <var n="paraula1"/>
	 </let>
       </when>
     </choose>
</def-macro>
	      

<def-macro n="genere_nombre" npar="1">
  <choose>
	<when> 
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="f"/>
	    </equal>
	  </test>
	  <let><var n="genere"/><lit-tag v="f"/></let>
	</when>
	<otherwise>
	  <let><var n="genere"/><lit-tag v="m"/></let>
	</otherwise>
  </choose>

      <choose>
	<when> 
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="pl"/>
	    </equal>
	  </test>
	  <let><var n="nombre"/><lit-tag v="pl"/></let>
	</when>
	<otherwise>
	  <let><var n="nombre"/><lit-tag v="sg"/></let>
	</otherwise>
      </choose>
    </def-macro> 




    <def-macro n="f_concord2" npar="2"><!--1 = main parameter (typically noun); 2 = secondary parameter (typically adj or det) -->
      <let>
	<var n="gen_chunk"/>
	<lit v=""/>
      </let>
      <let>
	<var n="nbr_chunk"/>
	<lit v=""/>
      </let>
      <choose><!--posa GD i ND a la paraula si no té valor per a gènere o per a nombre (excepte números) -->
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="a_num"/>
	      <lit v=""/>
	    </equal>
	  </test>
	  <choose><!--si no te valor per a gènere i , per tant, tampoc per a nombre: -->
	    <when>
	      <test>
		<equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit v=""/>
		</equal>
	      </test>
	      <let>
		<var n="paraula1"/>
		<clip pos="2" side="tl" part="lemh"/>
	      </let>
	      <append n="paraula1">
		<clip pos="2" side="tl" part="tags"/>
		<lit-tag v="GD"/>
		<lit-tag v="ND"/>
		<clip pos="2" side="tl" part="lemq"/>
	      </append>
	      <let>
		<clip pos="2" side="tl" part="whole"/>
		<var n="paraula1"/>
	      </let>
	    </when>
	    <when><!--si la paraula no té valor per a nombre (però sí per a gènere, ja que sinó hauria entrat pel when anterior) -->
	      <test>
		<equal>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit v=""/>
		</equal>
	      </test>
	      <let>
		<var n="paraula1"/>
		<clip pos="2" side="tl" part="lemh"/>
	      </let>
	      <append n="paraula1">
		<clip pos="2" side="tl" part="tags"/>
		<lit-tag v="ND"/>
		<clip pos="2" side="tl" part="lemq"/>
	      </append>
	      <let>
		<clip pos="2" side="tl" part="whole"/>
		<var n="paraula1"/>
	      </let>
	    </when>
	  </choose>
	</when>
      </choose>


      <!--OPERACIONS DE GÈNERE -->
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="GD"/>
		</equal>
	      </test>
	      <let>
		<var n="gen_chunk"/>
		<lit-tag v="GD"/>
	      </let>
	    </when>
	    <when>
	      <test>
		<not><!--si gènere de pos 1 és masc o fem -->
		  <or>
		    <equal>
		      <clip pos="1" side="tl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="tl" part="gen"/>
		      <lit v=""/>
		    </equal>
		  </or>
		</not>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="gen"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	      <let>
		<var n="gen_chunk"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	    </when>
	    <otherwise><!--si gènere pos 1 és mf o no té gènere-->
	      <let>
		<var n="gen_chunk"/>
		<lit-tag v="GD"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <let>
	    <var n="gen_chunk"/>
	    <lit-tag v="GD"/>
	  </let>	
	</when>
	<when>
	  <test>
	    <not>
	      <or>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit v=""/>
		</equal>
	      </or>
	    </not>
	  </test>
	  <let>
	    <var n="gen_chunk"/>
	    <clip pos="1" side="tl" part="gen"/>
	  </let>
	</when>
	<otherwise><!--si gènere de pos 1 és mf -->
	  <choose>
	    <when>
	      <test><!--si el gènere de pos 2 és GD, el gènere del chunk serà tb GD (deixant pos 1 com a mf) per si es pot assignar gènere a pos 2 (p. ex. 'the pacient - el/la pacient') -->
		<not>
		  <equal>
		    <clip pos="2" side="tl" part="gen"/>
		    <lit-tag v="GD"/>
		  </equal>
		</not>
	      </test>
	      <let>
		<var n="gen_chunk"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	    </when>
	  </choose>
	</otherwise>
      </choose>
      <!--OPERACIONS DE NOMBRE -->

      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="ND"/>
		</equal>
	      </test>
	      <let>
		<var n="nbr_chunk"/>
		<lit-tag v="ND"/>
	      </let>
	    </when>
	    <when>
	      <test>
		<not><!--si nombre de pos 1 és masc o fem -->
		  <or>
		    <equal>
		      <clip pos="1" side="tl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="tl" part="nbr"/>
		      <lit v=""/>
		    </equal>
		  </or>
		</not>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="nbr"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	      <let>
		<var n="nbr_chunk"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	    </when>
	    <otherwise><!--si nombre pos 1 és sp o no té nombre -->
	      <let>
		<var n="nbr_chunk"/>
		<lit-tag v="ND"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <let>
	    <var n="nbr_chunk"/>
	    <lit-tag v="ND"/>
	  </let>	
	</when>
	<when>
	  <test>
	    <not>
	      <or>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit v=""/>
		</equal>
	      </or>
	    </not>
	  </test>
	  <let>
	    <var n="nbr_chunk"/>
	    <clip pos="1" side="tl" part="nbr"/>
	  </let>
	</when>
	<otherwise><!--si nombre de pos 1 és sp -->
	  <choose>
	    <when>
	      <test>
		<or>
		  <equal>
		    <clip pos="2" side="tl" part="nbr"/>
		    <lit-tag v="sg"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="tl" part="nbr"/>
		    <lit-tag v="pl"/>
		  </equal>
		</or>
	      </test>
	      <let>
		<var n="nbr_chunk"/>
		<clip pos="2" side="tl" part="nbr"/>
	      </let>
	    </when>
	    <when>
	      <test><!--si pos 2 és també sp-->
		<equal>
		    <clip pos="2" side="tl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
	      </test>	      
	      <let>
		<var n="nbr_chunk"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	    </when>
	    <when>
	      <test><!--si pos 2 no té nombre (ex: xifres) -->
		<equal>
		    <clip pos="2" side="tl" part="nbr"/>
		    <lit v=""/>
		  </equal>
	      </test>
	      <let> <!-- el nombre del chunk serà sp, que no estarà enllaçat amb la posició 2 (pq no té valor per a l'atribut nbr"-->
		<var n="nbr_chunk"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	    </when>
	  </choose>
	</otherwise>
      </choose>
    </def-macro>



   <def-macro n="f_concord3" npar="3"><!--1 = main parameter (typically noun); 2  = secondary parameter (typically adj or det). 3 = other secondary param. (typically det) -->
     <let>
       <var n="gen_chunk"/>
       <lit v=""/>
     </let>
     <let>
       <var n="nbr_chunk"/>
       <lit v=""/>
     </let>
     <choose><!--posa GD i ND a la paraula si no té valor per a gènere o per a nombre (excepte números) -->
       <when>
	 <test>
	   <equal>
	     <clip pos="2" side="tl" part="a_num"/>
	     <lit v=""/>
	   </equal>
	 </test>
	 <choose>
	   <when><!--si la paraula no té valor per a gènere (i en aquest cas, tampoc per a nombre) -->
	     <test>
	       <equal>
		 <clip pos="2" side="tl" part="gen"/>
		 <lit v=""/>
	       </equal>
	     </test>
	     <let>
	       <var n="paraula1"/>
	       <clip pos="2" side="tl" part="lemh"/>
	     </let>
	     <append n="paraula1">
	       <clip pos="2" side="tl" part="tags"/>
	       <lit-tag v="GD"/>
	       <lit-tag v="ND"/>
	       <clip pos="2" side="tl" part="lemq"/>
	     </append>
	     <let>
	       <clip pos="2" side="tl" part="whole"/>
	       <var n="paraula1"/>
	     </let>
	   </when>
	   <when><!--si la paraula no té valor per a nombre (però sí per a gènere, ja que sinó hauria entrat pel when anterior) -->
	     <test>
	       <equal>
		 <clip pos="2" side="tl" part="nbr"/>
		 <lit v=""/>
	       </equal>
	     </test>
	     <let>
	       <var n="paraula1"/>
	       <clip pos="2" side="tl" part="lemh"/>
	     </let>
	     <append n="paraula1">
	       <clip pos="2" side="tl" part="tags"/>
	       <lit-tag v="ND"/>
	       <clip pos="2" side="tl" part="lemq"/>
	     </append>
	     <let>
	       <clip pos="2" side="tl" part="whole"/>
	       <var n="paraula1"/>
	     </let>
	   </when>
	 </choose>
       </when>
     </choose>

     <choose><!--posa GD i ND a la paraula si no té valor per a gènere o per a nombre (excepte números) -->
       <when>
	 <test>
	   <equal>
	     <clip pos="3" side="tl" part="a_num"/>
	     <lit v=""/>
	   </equal>
	 </test>


	 <choose>
	   <when><!--si la paraula no té valor per a gènere (i en aquest cas, tampoc per a nombre) -->
	     <test>
	       <equal>
		 <clip pos="3" side="tl" part="gen"/>
		 <lit v=""/>
	       </equal>
	     </test>
	     <let>
	       <var n="paraula1"/>
	       <clip pos="3" side="tl" part="lemh"/>
	     </let>
	     <append n="paraula1">
	       <clip pos="3" side="tl" part="tags"/>
	       <lit-tag v="GD"/>
	       <lit-tag v="ND"/>
	       <clip pos="3" side="tl" part="lemq"/>
	     </append>
	     <let>
	       <clip pos="3" side="tl" part="whole"/>
	       <var n="paraula1"/>
	     </let>
	   </when>
	   <when><!--si la paraula no té valor per a nombre (però sí per a gènere, ja que sinó hauria entrat pel when anterior) -->
	     <test>
	       <equal>
		 <clip pos="3" side="tl" part="nbr"/>
		 <lit v=""/>
	       </equal>
	     </test>
	     <let>
	       <var n="paraula1"/>
	       <clip pos="3" side="tl" part="lemh"/>
	     </let>
	     <append n="paraula1">
	       <clip pos="3" side="tl" part="tags"/>
	       <lit-tag v="ND"/>
	       <clip pos="3" side="tl" part="lemq"/>
	     </append>
	     <let>
	       <clip pos="3" side="tl" part="whole"/>
	       <var n="paraula1"/>
	     </let>
	   </when>
	 </choose>
       </when>
     </choose>




<!--OPERACIONS DE GÈNERE -->
      <choose>
	<when>
	  <test>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="GD"/>
		</equal>
	      </test>
	      <let>
		<var n="gen_chunk"/>
		<lit-tag v="GD"/>
	      </let>
	    </when>
	    <when>
	      <test>
		<not><!--si gènere de pos 1 és masc o fem -->
		  <or>
		    <equal>
		      <clip pos="1" side="tl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="tl" part="gen"/>
		      <lit v=""/>
		    </equal>
		  </or>
		</not>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="gen"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	      <let>
		<var n="gen_chunk"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	    </when>
	    <otherwise><!--si gènere pos 1 és mf -->
	      <let>
		<var n="gen_chunk"/>
		<lit-tag v="GD"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	  </test>
	  <let>
	    <var n="gen_chunk"/>
	    <lit-tag v="GD"/>
	  </let>	
	</when>
	<when>
	  <test>
	    <not>
	      <or>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit v=""/>
		</equal>
	      </or>
	    </not>
	  </test>
	  <let>
	    <var n="gen_chunk"/>
	    <clip pos="1" side="tl" part="gen"/>
	  </let>
	</when>
	<otherwise><!--si gènere de pos 1 és mf -->
	  <choose>
	    <when>
	      <test><!--si el gènere de pos 2 és GD, el gènere del chunk serà tb GD (deixant pos 1 com a mf) per si es pot assignar gènere a pos 2 (p. ex. 'the pacient - el/la pacient') -->
		<and>
		  <not>
		    <equal>
		      <clip pos="2" side="tl" part="gen"/>
		      <lit-tag v="GD"/>
		    </equal>
		  </not>
		  <not>
		    <equal>
		      <clip pos="3" side="tl" part="gen"/>
		      <lit-tag v="GD"/>
		    </equal>
		  </not>
		</and>
	      </test>
	      <let>
		<var n="gen_chunk"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	    </when>
	  </choose>
	</otherwise>
      </choose>
      <choose><!--i aquí les operacions per a posició 3. -->
	<when>
	  <test>
	    <equal>
		<clip pos="3" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>		  
		    <var n="gen_chunk"/>
		    <lit v=""/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="3" side="tl" part="gen"/>
		<var n="gen_chunk"/>
	      </let>
	    </when>
	    <otherwise>
	       <let>
		 <var n="gen_chunk"/>
		 <lit-tag v="GD"/>
	       </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>   
	      
<!--OPERACIONS DE NOMBRE -->

  <choose>
	<when>
	  <test>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="ND"/>
		</equal>
	      </test>
	      <let>
		<var n="nbr_chunk"/>
		<lit-tag v="ND"/>
	      </let>
	    </when>
	    <when>
	      <test>
		<not><!--si nombre de pos 1 és masc o fem -->
		  <or>
		    <equal>
		      <clip pos="1" side="tl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="tl" part="nbr"/>
		      <lit v=""/>
		    </equal>
		  </or>
		</not>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="nbr"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	      <let>
		<var n="nbr_chunk"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	    </when>
	    <otherwise><!--si nombre pos 1 és sp o no té nombre -->
	      <let>
		<var n="nbr_chunk"/>
		<lit-tag v="ND"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	  </test>
	  <let>
	    <var n="nbr_chunk"/>
	    <lit-tag v="ND"/>
	  </let>	
	</when>
	<when>
	  <test>
	    <not>
	      <or>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit v=""/>
		</equal>
	      </or>
	    </not>
	  </test>
	  <let>
	    <var n="nbr_chunk"/>
	    <clip pos="1" side="tl" part="nbr"/>
	  </let>
	</when>
	<otherwise><!--si nombre de pos 1 és sp -->
	  <choose>
	    <when>
	      <test>
		<or>
		  <equal>
		    <clip pos="2" side="tl" part="nbr"/>
		    <lit-tag v="sg"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="tl" part="nbr"/>
		    <lit-tag v="pl"/>
		  </equal>
		</or>
	      </test>
	      <let>
		<var n="nbr_chunk"/>
		<clip pos="2" side="tl" part="nbr"/>
	      </let>
	    </when>
	    <when>
	      <test><!--si pos 2 és també sp-->
		<equal>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </test>	 
	      <choose><!--si pos 3 no és sp o ND, assigna gènere de pos 3 al chunk-->
		<when>
		  <test>
		    <or>
		      <equal>
			<clip pos="3" side="tl" part="nbr"/>
			<lit-tag v="sg"/>
		      </equal>
		      <equal>
			<clip pos="3" side="tl" part="nbr"/>
			<lit-tag v="pl"/>
		      </equal>
		    </or>
		  </test>
		  <let>
		    <var n="nbr_chunk"/>
		    <clip pos="3" side="tl" part="nbr"/>
		  </let>
		</when>
	      </choose>
	    </when>
	    <when>
	      <test><!--si pos 2 no té nombre (ex: xifres) -->
		  <equal>
		    <clip pos="2" side="tl" part="nbr"/>
		    <lit v=""/>
		  </equal>
	      </test>
	      <choose>
		<when>
		  <test>
		    <or>
		      <equal>
			<clip pos="3" side="tl" part="nbr"/>
			<lit-tag v="sg"/>
		      </equal>
		      <equal>
			<clip pos="3" side="tl" part="nbr"/>
			<lit-tag v="pl"/>
		      </equal>
		    </or>
		  </test>
		  <let>
		    <var n="nbr_chunk"/>
		    <clip pos="3" side="tl" part="nbr"/>
		  </let>
		</when>
		<otherwise>
		  <let> <!-- el nombre del chunk serà sp, que no estarà enllaçat amb la posició 2 (pq no té valor per a l'atribut nbr"-->
		    <var n="nbr_chunk"/>
		    <clip pos="1" side="tl" part="nbr"/>
		  </let>
		</otherwise>
	      </choose>
	    </when>
	  </choose>
	</otherwise>
      </choose>
       <choose><!--i aquí les operacions per a posició 3. -->
	<when>
	  <test>
	    <equal>
		<clip pos="3" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>		  
		    <var n="nbr_chunk"/>
		    <lit v=""/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="3" side="tl" part="nbr"/>
		<var n="nbr_chunk"/>
	      </let>
	    </when>
	    <otherwise>
	       <let>
		 <var n="nbr_chunk"/>
		 <lit-tag v="ND"/>
	       </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>
</def-macro>



  <def-macro n="f_concord4" npar="4"><!--1 = main parameter (typically noun); 2 = secondary parameter (typically adj); 3 and 4 = other secondary param. (typically det) -->
    <let>
      <var n="gen_chunk"/>
      <lit v=""/>
    </let>
    <let>
      <var n="nbr_chunk"/>
      <lit v=""/>
    </let>
    <choose><!--posa GD i ND a la paraula si no té valor per a gènere o per a nombre (excepte números) -->
      <when>
	<test>
	    <equal>
	      <clip pos="2" side="tl" part="a_num"/>
	      <lit v=""/>
	    </equal>
	</test>
	<choose>
	  <when><!--si la paraula no té valor per a gènere (i en aquest cas, tampoc per a nombre) -->
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit v=""/>
	      </equal>
	    </test>
	    <let>
	      <var n="paraula1"/>
	      <clip pos="2" side="tl" part="lemh"/>
	    </let>
	    <append n="paraula1">
	      <clip pos="2" side="tl" part="tags"/>
	      <lit-tag v="GD"/>
	      <lit-tag v="ND"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </append>
	    <let>
	      <clip pos="2" side="tl" part="whole"/>
	      <var n="paraula1"/>
	    </let>
	  </when>
	  <when><!--si la paraula no té valor per a nombre (però sí per a gènere, ja que sinó hauria entrat pel when anterior) -->
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit v=""/>
	      </equal>
	    </test>
	    <let>
	      <var n="paraula1"/>
	      <clip pos="2" side="tl" part="lemh"/>
	    </let>
	    <append n="paraula1">
	      <clip pos="2" side="tl" part="tags"/>
	      <lit-tag v="ND"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </append>
	    <let>
	      <clip pos="2" side="tl" part="whole"/>
	      <var n="paraula1"/>
	    </let>
	  </when>
	</choose>
      </when>
    </choose>

    <choose><!--posa GD i ND a la paraula si no té valor per a gènere o per a nombre (excepte números) -->
      <when>
	<test>
	    <equal>
	      <clip pos="3" side="tl" part="a_num"/>
	      <lit v=""/>
	    </equal>
	</test>
	<choose>
	  <when><!--si la paraula no té valor per a gènere (i en aquest cas, tampoc per a nombre) -->
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="gen"/>
		<lit v=""/>
	      </equal>
	    </test>
	    <let>
	      <var n="paraula1"/>
	      <clip pos="3" side="tl" part="lemh"/>
	    </let>
	    <append n="paraula1">
	      <clip pos="3" side="tl" part="tags"/>
	      <lit-tag v="GD"/>
	      <lit-tag v="ND"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </append>
	    <let>
	      <clip pos="3" side="tl" part="whole"/>
	      <var n="paraula1"/>
	    </let>
	  </when>
	  <when><!--si la paraula no té valor per a nombre (però sí per a gènere, ja que sinó hauria entrat pel when anterior) -->
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="nbr"/>
		<lit v=""/>
	      </equal>
	    </test>
	    <let>
	      <var n="paraula1"/>
	      <clip pos="3" side="tl" part="lemh"/>
	    </let>
	    <append n="paraula1">
	      <clip pos="3" side="tl" part="tags"/>
	      <lit-tag v="ND"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </append>
	    <let>
	      <clip pos="3" side="tl" part="whole"/>
	      <var n="paraula1"/>
	    </let>
	  </when>
	</choose>
      </when>
    </choose>
    <choose><!--posa GD i ND a la paraula si no té valor per a gènere o per a nombre (excepte números) -->
      <when>
	<test>
	    <equal>
	      <clip pos="4" side="tl" part="a_num"/>
	      <lit v=""/>
	    </equal>
	</test>

	<choose>
	  <when><!--si la paraula no té valor per a gènere (i en aquest cas, tampoc per a nombre) -->
	    <test>
	      <equal>
		<clip pos="4" side="tl" part="gen"/>
		<lit v=""/>
	      </equal>
	    </test>
	    <let>
	      <var n="paraula1"/>
	      <clip pos="4" side="tl" part="lemh"/>
	    </let>
	    <append n="paraula1">
	      <clip pos="4" side="tl" part="tags"/>
	      <lit-tag v="GD"/>
	      <lit-tag v="ND"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </append>
	    <let>
	      <clip pos="4" side="tl" part="whole"/>
	      <var n="paraula1"/>
	    </let>
	  </when>
	  <when><!--si la paraula no té valor per a nombre (però sí per a gènere, ja que sinó hauria entrat pel when anterior) -->
	    <test>
	      <equal>
		<clip pos="4" side="tl" part="nbr"/>
		<lit v=""/>
	      </equal>
	    </test>
	    <let>
	      <var n="paraula1"/>
	      <clip pos="4" side="tl" part="lemh"/>
	    </let>
	    <append n="paraula1">
	      <clip pos="4" side="tl" part="tags"/>
	      <lit-tag v="ND"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </append>
	    <let>
	      <clip pos="4" side="tl" part="whole"/>
	      <var n="paraula1"/>
	    </let>
	  </when>
	</choose>
      </when>
    </choose>


    <!--OPERACIONS DE GÈNERE -->
    <choose>
      <when>
	<test>
	  <equal>
	    <clip pos="2" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	  </equal>
	</test>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <not><!--si gènere de pos 1 és masc o fem -->
		<or>
		  <equal>
		    <clip pos="1" side="tl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="tl" part="gen"/>
		    <lit v=""/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	  </when>
	  <otherwise><!--si gènere pos 1 és mf -->
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </otherwise>
	</choose>
      </when>
    </choose>
    <choose>
      <when>
	<test>
	  <equal>
	    <clip pos="1" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	  </equal>
	</test>
	<let>
	  <var n="gen_chunk"/>
	  <lit-tag v="GD"/>
	</let>	
      </when>
      <when>
	<test>
	  <not>
	    <or>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit v=""/>
	      </equal>
	    </or>
	  </not>
	</test>
	<let>
	  <var n="gen_chunk"/>
	  <clip pos="1" side="tl" part="gen"/>
	</let>
      </when>
      <otherwise><!--si gènere de pos 1 és mf -->
	<choose>
	  <when>
	    <test><!--si el gènere de pos 2 és GD, el gènere del chunk serà tb GD (deixant pos 1 com a mf) per si es pot assignar gènere a pos 2 (p. ex. 'the pacient - el/la pacient') -->
	      <and>
		<not>
		  <equal>
		    <clip pos="2" side="tl" part="gen"/>
		    <lit-tag v="GD"/>
		  </equal>
		</not>
		<not>
		  <equal>
		    <clip pos="3" side="tl" part="gen"/>
		    <lit-tag v="GD"/>
		  </equal>
		</not>
		<not>
		  <equal>
		    <clip pos="4" side="tl" part="gen"/>
		    <lit-tag v="GD"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	  </when>
	</choose>
      </otherwise>
    </choose>
    <choose><!--i aquí les operacions per a posició 3 -->
      <when>
	<test>
	  <equal>
	    <clip pos="3" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	  </equal>
	</test>
	<choose>
	  <when>
	    <test>
	      <not>
		<equal>		  
		  <var n="gen_chunk"/>
		  <lit v=""/>
		</equal>
	      </not>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="gen"/>
	      <var n="gen_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </otherwise>
	</choose>
      </when>
    </choose> 
    <choose><!--i aquí les operacions per a posició 4 -->
      <when>
	<test>
	  <equal>
	    <clip pos="4" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	  </equal>
	</test>
	<choose>
	  <when>
	    <test>
	      <not>
		<equal>		  
		  <var n="gen_chunk"/>
		  <lit v=""/>
		</equal>
	      </not>
	    </test>
	    <let>
	      <clip pos="4" side="tl" part="gen"/>
	      <var n="gen_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </otherwise>
	</choose>
      </when>
    </choose>    
    
    <!--OPERACIONS DE NOMBRE -->

    <choose>
      <when>
	<test>
	  <equal>
	    <clip pos="2" side="tl" part="nbr"/>
	    <lit-tag v="ND"/>
	  </equal>
	</test>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	    </test>
	    <let>
	      <var n="nbr_chunk"/>
	      <lit-tag v="ND"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <not><!--si nombre de pos 1 és masc o fem -->
		<or>
		  <equal>
		    <clip pos="1" side="tl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="tl" part="nbr"/>
		    <lit v=""/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="nbr"/>
	    </let>
	    <let>
	      <var n="nbr_chunk"/>
	      <clip pos="1" side="tl" part="nbr"/>
	    </let>
	  </when>
	  <otherwise><!--si nombre pos 1 és sp -->
	    <let>
	      <var n="nbr_chunk"/>
	      <lit-tag v="ND"/>
	    </let>
	  </otherwise>
	</choose>
      </when>
    </choose>
    <choose>
      <when>
	<test>
	  <equal>
	    <clip pos="1" side="tl" part="nbr"/>
	    <lit-tag v="ND"/>
	  </equal>
	</test>
	<let>
	  <var n="nbr_chunk"/>
	  <lit-tag v="ND"/>
	</let>	
      </when>
      <when>
	<test>
	  <not>
	    <or>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit v=""/>
	      </equal>
	    </or>
	  </not>
	</test>
	<let>
	  <var n="nbr_chunk"/>
	  <clip pos="1" side="tl" part="nbr"/>
	</let>
      </when>
      <otherwise><!--si nombre de pos 1 és sp -->
      <choose>
	    <when>
	      <test>
		<or>
		  <equal>
		    <clip pos="2" side="tl" part="nbr"/>
		    <lit-tag v="sg"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="tl" part="nbr"/>
		    <lit-tag v="pl"/>
		  </equal>
		</or>
	      </test>
	      <let>
		<var n="nbr_chunk"/>
		<clip pos="2" side="tl" part="nbr"/>
	      </let>
	    </when>
	    <when>
	      <test><!--si pos 2 és també sp-->
		<equal>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </test>	 
	      <choose><!--si pos 3 no és sp o ND, assigna gènere de pos 3 al chunk-->
		<when>
		  <test>
		    <or>
		      <equal>
			<clip pos="3" side="tl" part="nbr"/>
			<lit-tag v="sg"/>
		      </equal>
		      <equal>
			<clip pos="3" side="tl" part="nbr"/>
			<lit-tag v="pl"/>
		      </equal>
		    </or>
		  </test>
		  <let>
		    <var n="nbr_chunk"/>
		    <clip pos="3" side="tl" part="nbr"/>
		  </let>
		</when>		
		<when>
		  <test><!--si pos 3 és també sp-->
		    <equal>
		      <clip pos="3" side="tl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		  </test>	 
		  <choose><!--si pos 4 no és sp o ND, assigna gènere de pos 4 al chunk-->
		    <when>
		      <test>
			<or>
			  <equal>
			    <clip pos="4" side="tl" part="nbr"/>
			    <lit-tag v="sg"/>
			  </equal>
			  <equal>
			    <clip pos="4" side="tl" part="nbr"/>
			    <lit-tag v="pl"/>
			  </equal>
			</or>
		      </test>
		      <let>
			<var n="nbr_chunk"/>
			<clip pos="4" side="tl" part="nbr"/>
		      </let>
		    </when>
		  </choose>
		</when>
	      </choose>
	    </when>

	    <when>
	      <test><!--si pos 2 no té nombre (ex: xifres) -->
		  <equal>
		    <clip pos="2" side="tl" part="nbr"/>
		    <lit v=""/>
		  </equal>
	      </test>
	      <choose>
		<when>
		  <test>
		    <or>
		      <equal>
			<clip pos="3" side="tl" part="nbr"/>
			<lit-tag v="sg"/>
		      </equal>
		      <equal>
			<clip pos="3" side="tl" part="nbr"/>
			<lit-tag v="pl"/>
		      </equal>
		    </or>
		  </test>
		  <let>
		    <var n="nbr_chunk"/>
		    <clip pos="3" side="tl" part="nbr"/>
		  </let>
		</when>
		<when>
		  <test>
		    <or>
		      <equal>
			<clip pos="4" side="tl" part="nbr"/>
			<lit-tag v="sg"/>
		      </equal>
		      <equal>
			<clip pos="4" side="tl" part="nbr"/>
			<lit-tag v="pl"/>
		      </equal>
		    </or>
		  </test>
		  <let>
		    <var n="nbr_chunk"/>
		    <clip pos="4" side="tl" part="nbr"/>
		  </let>
		</when>
		<otherwise>
		  <let> <!-- el nombre del chunk serà sp, que no estarà enllaçat amb la posició 2 (pq no té valor per a l'atribut nbr"-->
		    <var n="nbr_chunk"/>
		    <clip pos="1" side="tl" part="nbr"/>
		  </let>
		</otherwise>
	      </choose>
	    </when>
	  </choose>
	</otherwise>
      </choose>

    <choose><!--i aquí les operacions per a posició 3. -->
      <when>
	<test>
	  <equal>
	    <clip pos="3" side="tl" part="nbr"/>
	    <lit-tag v="ND"/>
	  </equal>
	</test>
	<choose>
	  <when>
	    <test>
	      <not>
		<equal>		  
		  <var n="nbr_chunk"/>
		  <lit v=""/>
		</equal>
	      </not>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="nbr"/>
	      <var n="nbr_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="nbr_chunk"/>
	      <lit-tag v="ND"/>
	    </let>
	  </otherwise>
	</choose>
      </when>
    </choose>
    <choose><!--i aquí les operacions per a posició 4. -->
      <when>
	<test>
	  <equal>
	    <clip pos="4" side="tl" part="nbr"/>
	    <lit-tag v="ND"/>
	  </equal>
	</test>
	<choose>
	  <when>
	    <test>
	      <not>
		<equal>		  
		  <var n="nbr_chunk"/>
		  <lit v=""/>
		</equal>
	      </not>
	    </test>
	    <let>
	      <clip pos="4" side="tl" part="nbr"/>
	      <var n="nbr_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="nbr_chunk"/>
	      <lit-tag v="ND"/>
	    </let>
	  </otherwise>
	</choose>
      </when>
    </choose>
  </def-macro>




 <def-macro n="f_concord5" npar="5"><!--1 = main parameter (typically noun); 2 = secondary parameter (typically adj); 3 , 4 and 5 = other secondary param. (typically det) -->
     <let>
       <var n="gen_chunk"/>
       <lit v=""/>
     </let>
     <let>
       <var n="nbr_chunk"/>
       <lit v=""/>
     </let>
     <!--PRIMER ASSIGNEM VALORS DE GD I ND SI CAL A LES POSICIONES SECUNDÀRIES -->
     <choose><!--posa GD i ND a la paraula si no té valor per a gènere o per a nombre (excepte números) -->
       <when>
	 <test>
	     <equal>
	       <clip pos="2" side="tl" part="a_num"/>
	       <lit v=""/>
	     </equal>
	 </test>
	 <choose>
	   <when><!--si la paraula no té valor per a gènere (i en aquest cas, tampoc per a nombre) -->
	     <test>
	       <equal>
		 <clip pos="2" side="tl" part="gen"/>
		 <lit v=""/>
	       </equal>
	     </test>
	     <let>
	       <var n="paraula1"/>
	       <clip pos="2" side="tl" part="lemh"/>
	     </let>
	     <append n="paraula1">
	       <clip pos="2" side="tl" part="tags"/>
	       <lit-tag v="GD"/>
	       <lit-tag v="ND"/>
	       <clip pos="2" side="tl" part="lemq"/>
	     </append>
	     <let>
	       <clip pos="2" side="tl" part="whole"/>
	       <var n="paraula1"/>
	     </let>
	   </when>
	   <when><!--si la paraula no té valor per a nombre (però sí per a gènere, ja que sinó hauria entrat pel when anterior) -->
	     <test>
	       <equal>
		 <clip pos="2" side="tl" part="nbr"/>
		 <lit v=""/>
	       </equal>
	     </test>
	     <let>
	       <var n="paraula1"/>
	       <clip pos="2" side="tl" part="lemh"/>
	     </let>
	     <append n="paraula1">
	       <clip pos="2" side="tl" part="tags"/>
	       <lit-tag v="ND"/>
	       <clip pos="2" side="tl" part="lemq"/>
	     </append>
	     <let>
	       <clip pos="2" side="tl" part="whole"/>
	       <var n="paraula1"/>
	     </let>
	   </when>
	 </choose>
       </when>
     </choose>

     <choose><!--posa GD i ND a la paraula si no té valor per a gènere o per a nombre (excepte números) -->
       <when>
	 <test>
	     <equal>
	       <clip pos="3" side="tl" part="a_num"/>
	       <lit v=""/>
	     </equal>
	 </test>
	 <choose>
	   <when><!--si la paraula no té valor per a gènere (i en aquest cas, tampoc per a nombre) -->
	     <test>
	       <equal>
		 <clip pos="3" side="tl" part="gen"/>
		 <lit v=""/>
	       </equal>
	     </test>
	     <let>
	       <var n="paraula1"/>
	       <clip pos="3" side="tl" part="lemh"/>
	     </let>
	     <append n="paraula1">
	       <clip pos="3" side="tl" part="tags"/>
	       <lit-tag v="GD"/>
	       <lit-tag v="ND"/>
	       <clip pos="3" side="tl" part="lemq"/>
	     </append>
	     <let>
	       <clip pos="3" side="tl" part="whole"/>
	       <var n="paraula1"/>
	     </let>
	   </when>
	   <when><!--si la paraula no té valor per a nombre (però sí per a gènere, ja que sinó hauria entrat pel when anterior) -->
	     <test>
	       <equal>
		 <clip pos="3" side="tl" part="nbr"/>
		 <lit v=""/>
	       </equal>
	     </test>
	     <let>
	       <var n="paraula1"/>
	       <clip pos="3" side="tl" part="lemh"/>
	     </let>
	     <append n="paraula1">
	       <clip pos="3" side="tl" part="tags"/>
	       <lit-tag v="ND"/>
	       <clip pos="3" side="tl" part="lemq"/>
	     </append>
	     <let>
	       <clip pos="3" side="tl" part="whole"/>
	       <var n="paraula1"/>
	     </let>
	   </when>
	 </choose>
       </when>
     </choose>

     <choose><!--posa GD i ND a la paraula si no té valor per a gènere o per a nombre (excepte números) -->
       <when>
	 <test>
	     <equal>
	       <clip pos="4" side="tl" part="a_num"/>
	       <lit v=""/>
	     </equal>
	 </test>
	 
	 <choose>
	   <when><!--si la paraula no té valor per a gènere (i en aquest cas, tampoc per a nombre) -->
	     <test>
	       <equal>
		 <clip pos="4" side="tl" part="gen"/>
		 <lit v=""/>
	       </equal>
	     </test>
	     <let>
	       <var n="paraula1"/>
	       <clip pos="4" side="tl" part="lemh"/>
	     </let>
	     <append n="paraula1">
	       <clip pos="4" side="tl" part="tags"/>
	       <lit-tag v="GD"/>
	       <lit-tag v="ND"/>
	       <clip pos="4" side="tl" part="lemq"/>
	     </append>
	     <let>
	       <clip pos="4" side="tl" part="whole"/>
	       <var n="paraula1"/>
	     </let>
	   </when>
	   <when><!--si la paraula no té valor per a nombre (però sí per a gènere, ja que sinó hauria entrat pel when anterior) -->
	     <test>
	       <equal>
		 <clip pos="4" side="tl" part="nbr"/>
		 <lit v=""/>
	       </equal>
	     </test>
	     <let>
	       <var n="paraula1"/>
	       <clip pos="4" side="tl" part="lemh"/>
	     </let>
	     <append n="paraula1">
	       <clip pos="4" side="tl" part="tags"/>
	       <lit-tag v="ND"/>
	       <clip pos="4" side="tl" part="lemq"/>
	     </append>
	     <let>
	       <clip pos="4" side="tl" part="whole"/>
	       <var n="paraula1"/>
	     </let>
	   </when>
	 </choose>
       </when>
     </choose>

     <choose><!--posa GD i ND a la paraula si no té valor per a gènere o per a nombre (excepte números) -->
       <when>
	 <test>
	     <equal>
	       <clip pos="5" side="tl" part="a_num"/>
	       <lit v=""/>
	     </equal>
	 </test>
	 <choose>
	   <when><!--si la paraula no té valor per a gènere (i en aquest cas, tampoc per a nombre) -->
	     <test>
	       <equal>
		 <clip pos="5" side="tl" part="gen"/>
		 <lit v=""/>
	       </equal>
	     </test>
	     <let>
	       <var n="paraula1"/>
	       <clip pos="5" side="tl" part="lemh"/>
	     </let>
	     <append n="paraula1">
	       <clip pos="5" side="tl" part="tags"/>
	       <lit-tag v="GD"/>
	       <lit-tag v="ND"/>
	       <clip pos="5" side="tl" part="lemq"/>
	     </append>
	     <let>
	       <clip pos="5" side="tl" part="whole"/>
	       <var n="paraula1"/>
	     </let>
	   </when>
	   <when><!--si la paraula no té valor per a nombre (però sí per a gènere, ja que sinó hauria entrat pel when anterior) -->
	     <test>
	       <equal>
		 <clip pos="5" side="tl" part="nbr"/>
		 <lit v=""/>
	       </equal>
	     </test>
	     <let>
	       <var n="paraula1"/>
	       <clip pos="5" side="tl" part="lemh"/>
	     </let>
	     <append n="paraula1">
	       <clip pos="5" side="tl" part="tags"/>
	       <lit-tag v="ND"/>
	       <clip pos="5" side="tl" part="lemq"/>
	     </append>
	     <let>
	       <clip pos="5" side="tl" part="whole"/>
	       <var n="paraula1"/>
	     </let>
	   </when>
	 </choose>
       </when>
     </choose>



<!--OPERACIONS DE GÈNERE -->
      <choose>
	<when>
	  <test>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="GD"/>
		</equal>
	      </test>
	      <let>
		<var n="gen_chunk"/>
		<lit-tag v="GD"/>
	      </let>
	    </when>
	    <when>
	      <test>
		<not><!--si gènere de pos 1 és masc o fem -->
		  <or>
		    <equal>
		      <clip pos="1" side="tl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="tl" part="gen"/>
		      <lit v=""/>
		    </equal>
		  </or>
		</not>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="gen"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	      <let>
		<var n="gen_chunk"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	    </when>
	    <otherwise><!--si gènere pos 1 és mf -->
	      <let>
		<var n="gen_chunk"/>
		<lit-tag v="GD"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	  </test>
	  <let>
	    <var n="gen_chunk"/>
	    <lit-tag v="GD"/>
	  </let>	
	</when>
	<when>
	  <test>
	    <not>
	      <or>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit v=""/>
		</equal>
	      </or>
	    </not>
	  </test>
	  <let>
	    <var n="gen_chunk"/>
	    <clip pos="1" side="tl" part="gen"/>
	  </let>
	</when>
	<otherwise><!--si gènere de pos 1 és mf -->
	  <choose>
	    <when>
	      <test><!--si el gènere de pos 2 és GD, el gènere del chunk serà tb GD (deixant pos 1 com a mf) per si es pot assignar gènere a pos 2 (p. ex. 'the pacient - el/la pacient') -->
		<and>
		  <not>
		    <equal>
		      <clip pos="2" side="tl" part="gen"/>
		      <lit-tag v="GD"/>
		    </equal>
		  </not>
		  <not>
		    <equal>
		      <clip pos="3" side="tl" part="gen"/>
		      <lit-tag v="GD"/>
		    </equal>
		  </not>
		  <not>
		    <equal>
		      <clip pos="4" side="tl" part="gen"/>
		      <lit-tag v="GD"/>
		    </equal>
		  </not>
		  <not>
		    <equal>
		      <clip pos="5" side="tl" part="gen"/>
		      <lit-tag v="GD"/>
		    </equal>
		  </not>
		</and>
	      </test>
	      <let>
		<var n="gen_chunk"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	    </when>
	  </choose>
	</otherwise>
      </choose>
      <choose><!--i aquí les operacions per a posició 3 -->
	<when>
	  <test>
	    <equal>
		<clip pos="3" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>		  
		    <var n="gen_chunk"/>
		    <lit v=""/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="3" side="tl" part="gen"/>
		<var n="gen_chunk"/>
	      </let>
	    </when>
	    <otherwise>
	       <let>
		 <var n="gen_chunk"/>
		 <lit-tag v="GD"/>
	       </let>
	    </otherwise>
	  </choose>
	</when>
      </choose> 
      <choose><!--i aquí les operacions per a posició 4 -->
	<when>
	  <test>
	    <equal>
		<clip pos="4" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>		  
		    <var n="gen_chunk"/>
		    <lit v=""/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="4" side="tl" part="gen"/>
		<var n="gen_chunk"/>
	      </let>
	    </when>
	    <otherwise>
	       <let>
		 <var n="gen_chunk"/>
		 <lit-tag v="GD"/>
	       </let>
	    </otherwise>
	  </choose>
	</when>
      </choose> 
      <choose><!--i aquí les operacions per a posició 5 -->
	<when>
	  <test>
	    <equal>
		<clip pos="5" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>		  
		    <var n="gen_chunk"/>
		    <lit v=""/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="5" side="tl" part="gen"/>
		<var n="gen_chunk"/>
	      </let>
	    </when>
	    <otherwise>
	       <let>
		 <var n="gen_chunk"/>
		 <lit-tag v="GD"/>
	       </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>    
	      
	      
<!--OPERACIONS DE NOMBRE -->

  <choose>
	<when>
	  <test>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="ND"/>
		</equal>
	      </test>
	      <let>
		<var n="nbr_chunk"/>
		<lit-tag v="ND"/>
	      </let>
	    </when>
	    <when>
	      <test>
		<not><!--si nombre de pos 1 és masc o fem -->
		  <or>
		    <equal>
		      <clip pos="1" side="tl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="tl" part="nbr"/>
		      <lit v=""/>
		    </equal>
		  </or>
		</not>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="nbr"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	      <let>
		<var n="nbr_chunk"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	    </when>
	    <otherwise><!--si nombre pos 1 és sp -->
	      <let>
		<var n="nbr_chunk"/>
		<lit-tag v="ND"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	  </test>
	  <let>
	    <var n="nbr_chunk"/>
	    <lit-tag v="ND"/>
	  </let>	
	</when>
	<when>
	  <test>
	    <not>
	      <or>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit v=""/>
		</equal>
	      </or>
	    </not>
	  </test>
	  <let>
	    <var n="nbr_chunk"/>
	    <clip pos="1" side="tl" part="nbr"/>
	  </let>
	</when>
	<otherwise><!--si nombre de pos 1 és sp -->
	<choose>
	    <when>
	      <test>
		<or>
		  <equal>
		    <clip pos="2" side="tl" part="nbr"/>
		    <lit-tag v="sg"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="tl" part="nbr"/>
		    <lit-tag v="pl"/>
		  </equal>
		</or>
	      </test>
	      <let>
		<var n="nbr_chunk"/>
		<clip pos="2" side="tl" part="nbr"/>
	      </let>
	    </when>
	    <when>
	      <test><!--si pos 2 és també sp-->
		<equal>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </test>	 
	      <choose><!--si pos 3 no és sp o ND, assigna gènere de pos 3 al chunk-->
		<when>
		  <test>
		    <or>
		      <equal>
			<clip pos="3" side="tl" part="nbr"/>
			<lit-tag v="sg"/>
		      </equal>
		      <equal>
			<clip pos="3" side="tl" part="nbr"/>
			<lit-tag v="pl"/>
		      </equal>
		    </or>
		  </test>
		  <let>
		    <var n="nbr_chunk"/>
		    <clip pos="3" side="tl" part="nbr"/>
		  </let>
		</when>		
		<when>
		  <test><!--si pos 3 és també sp-->
		    <equal>
		      <clip pos="3" side="tl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		  </test>	 
		  <choose><!--si pos 4 no és sp o ND, assigna gènere de pos 4 al chunk-->
		    <when>
		      <test>
			<or>
			  <equal>
			    <clip pos="4" side="tl" part="nbr"/>
			    <lit-tag v="sg"/>
			  </equal>
			  <equal>
			    <clip pos="4" side="tl" part="nbr"/>
			    <lit-tag v="pl"/>
			  </equal>
			</or>
		      </test>
		      <let>
			<var n="nbr_chunk"/>
			<clip pos="4" side="tl" part="nbr"/>
		      </let>
		    </when>

		    <when>
		      <test><!--si pos 4 és també sp-->
			<equal>
			  <clip pos="4" side="tl" part="nbr"/>
			  <lit-tag v="sp"/>
			</equal>
		      </test>	 
		      <choose><!--si pos 5 no és sp o ND, assigna gènere de pos 5 al chunk-->
			<when>
			  <test>
			    <or>
			      <equal>
				<clip pos="5" side="tl" part="nbr"/>
				<lit-tag v="sg"/>
			      </equal>
			      <equal>
				<clip pos="5" side="tl" part="nbr"/>
				<lit-tag v="pl"/>
			      </equal>
			    </or>
			  </test>
			  <let>
			    <var n="nbr_chunk"/>
			    <clip pos="5" side="tl" part="nbr"/>
			  </let>
			</when>
		      </choose>
		    </when>		
			
		  </choose>
		</when>
	      </choose>
	    </when>

	    <when>
	      <test><!--si pos 2 no té nombre (ex: xifres) -->
		  <equal>
		    <clip pos="2" side="tl" part="nbr"/>
		    <lit v=""/>
		  </equal>
	      </test>
	      <choose>
		<when>
		  <test>
		    <or>
		      <equal>
			<clip pos="3" side="tl" part="nbr"/>
			<lit-tag v="sg"/>
		      </equal>
		      <equal>
			<clip pos="3" side="tl" part="nbr"/>
			<lit-tag v="pl"/>
		      </equal>
		    </or>
		  </test>
		  <let>
		    <var n="nbr_chunk"/>
		    <clip pos="3" side="tl" part="nbr"/>
		  </let>
		</when>
		<when>
		  <test>
		    <or>
		      <equal>
			<clip pos="4" side="tl" part="nbr"/>
			<lit-tag v="sg"/>
		      </equal>
		      <equal>
			<clip pos="4" side="tl" part="nbr"/>
			<lit-tag v="pl"/>
		      </equal>
		    </or>
		  </test>
		  <let>
		    <var n="nbr_chunk"/>
		    <clip pos="4" side="tl" part="nbr"/>
		  </let>
		</when>
		<when>
		  <test>
		    <or>
		      <equal>
			<clip pos="5" side="tl" part="nbr"/>
			<lit-tag v="sg"/>
		      </equal>
		      <equal>
			<clip pos="5" side="tl" part="nbr"/>
			<lit-tag v="pl"/>
		      </equal>
		    </or>
		  </test>
		  <let>
		    <var n="nbr_chunk"/>
		    <clip pos="5" side="tl" part="nbr"/>
		  </let>
		</when>
		<otherwise>
		  <let> <!-- el nombre del chunk serà sp, que no estarà enllaçat amb la posició 2 (pq no té valor per a l'atribut nbr"-->
		    <var n="nbr_chunk"/>
		    <clip pos="1" side="tl" part="nbr"/>
		  </let>
		</otherwise>
	      </choose>
	    </when>
	  </choose>
	</otherwise>
      </choose>
       <choose><!--i aquí les operacions per a posició 3. -->
	<when>
	  <test>
	    <equal>
		<clip pos="3" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>		  
		    <var n="nbr_chunk"/>
		    <lit v=""/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="3" side="tl" part="nbr"/>
		<var n="nbr_chunk"/>
	      </let>
	    </when>
	    <otherwise>
	       <let>
		 <var n="nbr_chunk"/>
		 <lit-tag v="ND"/>
	       </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>
       <choose><!--i aquí les operacions per a posició 4. -->
	<when>
	  <test>
	    <equal>
		<clip pos="4" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>		  
		    <var n="nbr_chunk"/>
		    <lit v=""/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="4" side="tl" part="nbr"/>
		<var n="nbr_chunk"/>
	      </let>
	    </when>
	    <otherwise>
	       <let>
		 <var n="nbr_chunk"/>
		 <lit-tag v="ND"/>
	       </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>
      
       <choose><!--i aquí les operacions per a posició 5. -->
	<when>
	  <test>
	    <equal>
		<clip pos="5" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>		  
		    <var n="nbr_chunk"/>
		    <lit v=""/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="5" side="tl" part="nbr"/>
		<var n="nbr_chunk"/>
	      </let>
	    </when>
	    <otherwise>
	       <let>
		 <var n="nbr_chunk"/>
		 <lit-tag v="ND"/>
	       </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>
  </def-macro>


    <def-macro n="f_bcond" npar="2"><!--Para mirar se o branco contén ou non formato. É necesario pór esta función nas regras en que desaparece algunha palabra, para así decidir se o branco da palabra eliminada se debe eliminar ou conservar. Se contén formato hai que conservala, se non o contén debe eliminarse para que non aparezan dous espazos seguidos. -->
      <choose>
	<when>
	  <test>
	    <not>
	      <equal>
		<b pos="1"/>
		<lit v=" "/>
	      </equal>
	    </not>
	  </test>
	  <out>
	    <b pos="1"/>
	  </out>
	</when>     	    
      </choose>
    </def-macro>


   <def-macro n="million" npar="1">
      <choose>
	<when> 
	  <test>
	    <equal caseless="yes">
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="millón"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="lem"/>
	    <lit v="millón de"/>
	  </let>
	</when>
	<when> 
	  <test>
	    <equal caseless="yes">
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="un millón"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="lem"/>
	    <lit v="un millón de"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when> 
	  <test>
	    <equal caseless="yes">
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="billón"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="lem"/>
	    <lit v="billón de"/>
	  </let>
	</when>
	<when> 
	  <test>
	    <equal caseless="yes">
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="un billón"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="lem"/>
	    <lit v="un billón de"/>
	  </let>
	</when>
      </choose>
      
    </def-macro>


    <def-macro n="flexio_numerals" npar="2">
    <!--  <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>	
	  <let>
	    <clip pos="1" side="tl" part="gen"/>
	    <clip pos="2" side="tl" part="gen"/>
	  </let>
	</when>
      </choose> -->
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="sl" part="lem"/>
	      <lit v="percent"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="2" side="tl" part="lem"/>
	    <lit v="por cento"/>
	  </let>
	<!--  <let>
	    <clip pos="2" side="tl" part="a_nom"/>
	    <lit-tag v="adv"/>
	  </let> este e os dous lets seguintes son un arranxo pachangueiro para poder pór gen e nbr no chunk e que se poida facer a concordancia no t2x (o 90 das especies son endémicas)-->
	  <let>
	    <clip pos="2" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	  </let>
	  <let>
	    <clip pos="2" side="tl" part="nbr"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>
      </choose>

	  

    </def-macro>


    <def-macro n="det_no" npar="2"><!--No cars -> Ningún coche (muda o número do nome de pl a sg) -->
      
      <choose>
	<when> 
	  <test>
	    <and>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="no"/>
	      </equal>
	      <equal>
		<clip pos="2" side="sl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <clip pos="2" side="tl" part="nbr"/>
	    <lit-tag v="sg"/>
	  </let>
	  <let> 
	    <var n="negative"/>
	    <lit-tag v="negacio"/>
	  </let>
	</when>


	<when> 
	  <test>
	    <and>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="no"/>
	      </equal>
	      <equal>
		<clip pos="2" side="sl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <var n="negative"/>
	    <lit-tag v="negacio"/>
	  </let>
	</when>
	<otherwise>
	  <let>
	    <var n="negative"/>
	    <lit v=""/>
	  </let>
	</otherwise>
      </choose>

    </def-macro>


    <def-macro n="determiner" npar="1"><!-- to put in rules beginning with a determiner -->
      <choose>
	<when>
	  <test>
	      <equal>
		<clip pos="1" side="tl" part="a_det"/>
		<lit-tag v="det.ord"/>
	      </equal>
	  </test>
	  <let>
	    <var n="tipus_det"/>
	    <lit-tag v="UNDET"/>
	  </let>
	</when>
	<when>
	  <test>
	      <equal>
		<clip pos="1" side="tl" part="a_det"/>
		<lit-tag v="det.qnt"/>
	      </equal>
	  </test>
	  <let>
	    <var n="tipus_det"/>
	    <lit-tag v="UNDEF"/>
	  </let>
	</when>
	<otherwise>
	  <let>
	    <var n="tipus_det"/>
	    <lit-tag v="DET"/>
	  </let>
	</otherwise>
      </choose>
    </def-macro>
	  

    <def-macro n="comparatiu_adj1" npar="1"><!--para acrecentar o adverbio 'máis' en adjs comparativos. -->
      <let>
	<var n="adjectiu1"/>
	<lit v=""/>
      </let>
      <choose>
	<when>
	  <test>
	    <or>
	      <equal>
		<clip pos="1" side="sl" part="grau_adj"/>
		<lit-tag v="comp"/>
	      </equal>
	      <equal>
		<clip pos="1" side="sl" part="grau_adj"/>
		<lit-tag v="sup"/>
	      </equal>
	    </or>	  
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <or>
		    <equal caseless="yes">
		      <clip pos="1" side="sl" part="lem"/>
		      <lit v="good"/>
		    </equal>
		    <equal caseless="yes">
		      <clip pos="1" side="sl" part="lem"/>
		      <lit v="bad"/>
		    </equal>
		  </or>
		</not>
	      </test>
	      <append n="adjectiu1">
		<lit v="máis"/>
		<lit-tag v="preadv"/>
		<lit v="$ ^"/>
	      </append>	  
	    </when>
	  </choose>
	</when>
	<otherwise>
	  <append n="adjectiu1">
	    <lit v=""/>
	  </append>
	</otherwise>
      </choose>
    </def-macro>


    <def-macro n="comparatiu_adj2" npar="1"><!--para acrecentar o adverbio 'máis' en adjs comparativos. Para regras con 2 adjectivos. -->
      <let>
	<var n="adjectiu2"/>
	<lit v=""/>
      </let>
      <choose>
	<when>
	  <test>
	    <or>
	      <equal>
		<clip pos="1" side="sl" part="grau_adj"/>
		<lit-tag v="comp"/>
	      </equal>
	      <equal>
		<clip pos="1" side="sl" part="grau_adj"/>
		<lit-tag v="sup"/>
	      </equal>
	    </or>	  
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <or>
		    <equal caseless="yes">
		      <clip pos="1" side="sl" part="lem"/>
		      <lit v="good"/>
		    </equal>
		    <equal caseless="yes">
		      <clip pos="1" side="sl" part="lem"/>
		      <lit v="bad"/>
		    </equal>
		  </or>
		</not>
	      </test>
	      <append n="adjectiu2">
		<lit v="máis"/>
		<lit-tag v="preadv"/>
		<lit v="$ ^"/>
	      </append>	  
	    </when>
	  </choose>
	</when>
	<otherwise>
	  <append n="adjectiu2">
	    <lit v=""/>
	  </append>
	</otherwise>
      </choose>
    </def-macro>


    <def-macro n="firstWord" npar="1">
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="sl" part="a_np_acr"/>
	      <lit v=""/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal> 
		  <var n="EOS"/>
		  <lit v="true"/>
		</equal> 
	      </test>
	      <modify-case>
		<clip pos="1" side="tl" part="lem"/>
		<lit v="aa"/>
	      </modify-case>
	      <let>
		<var n="caseFirstWord"/>
		<lit v="Aa"/>
	      </let>
	    </when>
	    <otherwise> 
	      <let>
		<var n="caseFirstWord"/>
		<lit v="aa"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
	<otherwise>
	  <let>
	    <var n="caseFirstWord"/>
	    <lit v="aa"/>
	  </let>
	</otherwise>
      </choose>
      <let>
	<var n="EOS"/>
	<lit v="false"/>
      </let>
    </def-macro>



    <def-macro n="tipus_verbs" npar="1">
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="vblex.pron"/>
	    </equal>
	  </test>
	  <let>
	    <var n="tipus_verb"/>
	    <lit-tag v="pron"/>
	  </let>
	</when>
	<when>
	  <test>
	    <or>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lemh"/>
		<lit v="like"/>
	      </equal>
	      <equal caseless="yes">
		<clip pos="1" side="tl" part="lemh"/>
		<lit v="encantar"/>
	      </equal>
	    </or>
	  </test>
	  <let>
	    <var n="tipus_verb"/>
	    <lit-tag v="like"/>
	  </let>
	</when>
	<when>
	  <test>
	    <in caseless="yes">
	      <clip pos="1" side="sl" part="lemh"/>
	      <list n="reportingverb"/>
	    </in>
	  </test>
	  <let>
	    <var n="tipus_verb"/>
	    <lit-tag v="reporting"/>
	  </let>
	</when>
	<otherwise>
	  <let>
	    <var n="tipus_verb"/>
	    <clip pos="1" side="tl" part="a_verb"/>
	  </let>
	</otherwise>
      </choose>
    </def-macro>


<def-macro n="tipus_verbs_imp" npar="1"><!--para cando hai un verbo en forma impersoal nunha regra (o pronome non será proclítico senón enclítico: dicirse, converténdose/me... etc -->
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="vblex.pron"/>
	    </equal>
	  </test>
	  <let>
	    <var n="tipus_verb_imp"/>
	    <lit-tag v="pron"/>
	  </let>
	</when>
	<when>
	  <test>
	    <or>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lemh"/>
		<lit v="like"/>
	      </equal>
	      <equal caseless="yes">
		<clip pos="1" side="tl" part="lemh"/>
		<lit v="encantar"/>
	      </equal>
	    </or>
	  </test>
	  <let>
	    <var n="tipus_verb_imp"/>
	    <lit-tag v="like"/>
	  </let>
	</when>
	<when>
	  <test>
	    <in caseless="yes">
	      <clip pos="1" side="sl" part="lemh"/>
	      <list n="reportingverb"/>
	    </in>
	  </test>
	  <let>
	    <var n="tipus_verb_imp"/>
	    <lit-tag v="reporting"/>
	  </let>
	</when>
	<otherwise>
	  <let>
	    <var n="tipus_verb_imp"/>
	    <clip pos="1" side="tl" part="a_verb"/>
	  </let>
	</otherwise>
      </choose>
    </def-macro>
    
     <def-macro n="pron" npar="1"><!--Esta macro debe aplicarse, nas regras, despois da macro tipus_verbs. Atribúe á variábel 'pronom' o valor do pronome que teñen que levar os verbos pronominais -->
      <let>
	<var n="pronom"/>
	<lit v=""/>
      </let>
      <choose><!--envía o pronome nos verbos pronominais -->
	<when> 
	  <test>
	    <equal>
	      <var n="tipus_verb"/>
	      <lit-tag v="pron"/>
	    </equal>
	  </test>
	  <let>
	    <var n="pronom"/>
	    <lit v="prpers"/>
	  </let>
	  <append n="pronom">
	    <lit-tag v="prn.pro"/>
	    <lit-tag v="4"/>
	    <lit-tag v="mf"/>
	    <lit-tag v="5"/>
	    <lit v="$ ^"/>
	  </append>	
	</when>
      </choose> 
    </def-macro>

   


 <def-macro n="pronenc" npar="1"><!-- fai o mesmo que a función 'pron' mais crea un enclítico reflexivo (para verbos en formas non persoais), que atribúe á variábel 'pronomenc'. Só funciona se antes se creou a macro 'tipus_verbs_imp' para o verbo que ten que levar o enclítico. 
Non se crea mlu, para poder facer mudanzas de posición no t3x. No t3x créase a mlu e muda o pronome de 3a persoa a reflexivo se toca. -->
      <let>
	<var n="pronomenc"/>
	<lit v=""/>
      </let>
      <choose><!--envía o pronome nos verbos pronominais -->
	<when> 
	  <test>
	    <equal>
	      <var n="tipus_verb_imp"/>
	      <lit-tag v="pron"/>
	    </equal>
	  </test>
	  <let>
	    <var n="pronomenc"/>
	    <lit v="$^prpers"/>
	  </let>
	  <append n="pronomenc">
	    <lit-tag v="prn.enc"/>
	    <lit-tag v="4"/>
	    <lit-tag v="mf"/>
	    <lit-tag v="5"/>
	  </append>	
	</when>
      </choose> 
    </def-macro>



    <def-macro n="conj_verb1" npar="1"><!--conxuga o verbo -->

      <!--Primeira parte: se o verbo é modal -->

      <choose>
	<when>
	  <test>
	    <in caseless="yes">
	      <clip pos="1" side="sl" part="lem"/>
	      <list n="verbs_modals"/>
	    </in>
	  </test>
	  <choose>     
	    <when>
	      <test>
		<and>
		  <equal caseless="yes">
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="can"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="pres"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<var n="temps_chunk"/>
		<lit-tag v="pri"/>
	      </let>
	    </when>
	    <when>
	      <test>
		<and>
		  <equal caseless="yes">
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="can"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="past"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<var n="temps_chunk"/>
		<lit-tag v="cni"/>
	      </let>
	    </when>
	    <when>
	      <test>
		<or>
		  <equal caseless="yes">
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="must"/>
		  </equal>
		  <equal caseless="yes">
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="may"/>
		  </equal>
		</or>
	      </test>
	      <let>
		<var n="temps_chunk"/>
		<lit-tag v="pri"/>
	      </let>
	    </when>
	    <when>
	      <test>
		<or>
		  <equal caseless="yes">
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="should"/>
		  </equal>
		  <equal caseless="yes">
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="might"/>
		  </equal>
		</or>
	      </test>
	      <let>
		<var n="temps_chunk"/>
		<lit-tag v="cni"/>
	      </let>
	    </when>
	  </choose>
	  <let>
	    <var n="lema_SV"/>
	    <lit v="mod"/>
	  </let>
	  <let>
	    <var n="pers_chunk"/>
	    <lit-tag v="PD"/>
	  </let>
	  <let>
	    <var n="nbr_chunk"/>
	    <lit-tag v="ND"/>
	  </let>
	  <let>
	    <var n="verbfinal"/>
	    <concat>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <lit-tag v="5"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </concat>
	  </let>
	</when>
	

	<!-- Segunda parte: os demais casos, e seguen todos os outros verbos  -->
	<otherwise>
	  <choose>
	    
	    <when>
	      <test>
		<and>
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="past"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="pers"/>
		    <lit v=""/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="nbr"/>
		    <lit v=""/>
		  </equal>
		</and>
	      </test>
	      <let>
		<var n="lema_SV"/>
		<lit v="verbcj"/>
	      </let>
	      <let>
		<var n="temps_chunk"/>
		<lit-tag v="ifi"/>
	      </let>
	      <let>
		<var n="pers_chunk"/>
		<lit-tag v="PD"/>
	      </let>
	      <let>
		<var n="nbr_chunk"/>
		<lit-tag v="ND"/>
	      </let>
	      <let>
		<var n="verbfinal"/>
		<concat>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <lit-tag v="3"/>
		  <lit-tag v="4"/>
		  <lit-tag v="5"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</concat>
	      </let>
	    </when>
	    <when>
	      <test>
		<and>
		  <equal><!--é o caso de 'was' e algún outro, que teñen pers e nbr -->
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="past"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="nbr"/>
		    <lit-tag v="sg"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<var n="lema_SV"/>
		<lit v="verbcj"/>
	      </let>
	      <let>
		<var n="temps_chunk"/>
		<lit-tag v="ifi"/>
	      </let>
	      <let>
		<var n="pers_chunk"/>
		<lit-tag v="PD"/>
	      </let>
	      <let>
		<var n="nbr_chunk"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	      <let>
		<var n="verbfinal"/>
		<concat>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <lit-tag v="3"/>
		  <lit-tag v="4"/>
		  <lit-tag v="5"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</concat>
	      </let>
	    </when>
	    <when>	
	      <test>
		<equal>
		  <clip pos="1" side="sl" part="temps"/>
		  <lit-tag v="pres"/>
		</equal>
	      </test>
	      <let>
		<clip pos="1" side="tl" part="temps"/>
		<lit-tag v="pri"/>
	      </let>
	      <let>
		<var n="lema_SV"/>
		<lit v="verbcj"/>
	      </let>
	      <let>
		<var n="temps_chunk"/>
		<clip pos="1" side="tl" part="temps"/>
	      </let>
	      <let>
		<var n="pers_chunk"/>
		<lit-tag v="PD"/>
	      </let>
	      <let>
		<var n="nbr_chunk"/>
		<lit-tag v="ND"/>
	      </let>
	      <let>
		<var n="verbfinal"/>
		<concat>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <lit-tag v="3"/>
		  <lit-tag v="4"/>
		  <lit-tag v="5"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</concat>
	      </let>
	    </when>
	    <when>	
	      <test>
		<equal>
		  <clip pos="1" side="sl" part="temps"/>
		  <lit-tag v="pri"/>
		</equal>
	      </test>
	      <let>
		<var n="lema_SV"/>
		<lit v="verbcj"/>
	      </let>
	      <let>
		<var n="temps_chunk"/>
		<clip pos="1" side="tl" part="temps"/>
	      </let>
	      <let>
		<var n="pers_chunk"/>
		<clip pos="1" side="tl" part="pers"/>
	      </let>
	      <let>
		<var n="nbr_chunk"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	      <let>
		<var n="verbfinal"/>
		<concat>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <lit-tag v="3"/>
		  <lit-tag v="4"/>
		  <lit-tag v="5"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</concat>
	      </let>
	    </when>
	    <when>	
	      <test>
		<equal>
		  <clip pos="1" side="sl" part="temps"/>
		  <lit-tag v="ger"/>
		</equal>
	      </test>
	      <let>
		<var n="lema_SV"/>
		<lit v="ger"/>
	      </let>
	      <let>
		<var n="temps_chunk"/>
		<clip pos="1" side="tl" part="temps"/>
	      </let>
	      <let>
		<var n="pers_chunk"/>
		<lit-tag v="PD"/>
	      </let>
	      <let>
		<var n="nbr_chunk"/>
		<lit-tag v="ND"/>
	      </let>
	      <let>
		<var n="verbfinal"/>
		<concat>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <lit-tag v="3"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</concat>
	      </let>
	    </when>
	     <when>	
	      <test>
		<equal>
		  <clip pos="1" side="sl" part="temps"/>
		  <lit-tag v="inf"/>
		</equal>
	      </test>
	      <let>
		<var n="lema_SV"/>
		<lit v="inf"/>
	      </let>
	      <let>
		<var n="temps_chunk"/>
		<clip pos="1" side="tl" part="temps"/>
	      </let>
	      <let>
		<var n="pers_chunk"/>
		<lit-tag v="PD"/>
	      </let>
	      <let>
		<var n="nbr_chunk"/>
		<lit-tag v="ND"/>
	      </let>
	      <let>
		<var n="verbfinal"/>
		<concat>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <lit-tag v="3"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</concat>
	      </let>
	    </when>
	  </choose>
	</otherwise>
      </choose>
    </def-macro>



    <def-macro n="conj_verb_compost" npar="2"><!--conxuga os verbos formados por un auxiliar e unha forma non persoal (will come). 
    pos 1= do, will, shall ou would.
    pos 2= verbo non conxugado
    O resultado é unha soa forma léxica (virei) -->
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="do"/>
	      </equal>
	    </test>
	    <choose>
	      <when>
		<test>
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="pri"/>
		  </equal>
		</test>
		<let>
		  <var n="temps_chunk"/>
		  <lit-tag v="pri"/>
		</let>
		<let>
		  <var n="pers_chunk"/>
		  <clip pos="1" side="sl" part="pers"/>
		</let>
		<let>
		  <var n="nbr_chunk"/>
		  <clip pos="1" side="sl" part="nbr"/>
		</let>
		<let>
		  <var n="lema_SV"/>
		  <lit v="verbcj"/>
		</let>
		<let>
		  <var n="verbfinal"/>
		  <concat>
		    <clip pos="2" side="tl" part="lemh"/>
		    <clip pos="2" side="tl" part="a_verb"/>
		    <lit-tag v="3"/>
		    <lit-tag v="4"/>
		    <lit-tag v="5"/>
		    <clip pos="2" side="tl" part="lemq"/>
		  </concat>
		</let>
	      </when>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="pres"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="inf"/>
		    </equal>
		  </or>
		</test>
		<let>
		  <var n="temps_chunk"/>
		  <lit-tag v="pri"/>
		</let>
		<let>
		  <var n="pers_chunk"/>
		  <lit-tag v="PD"/>
		</let>
		<let>
		  <var n="nbr_chunk"/>
		  <lit-tag v="ND"/>
		</let>
		<let>
		  <var n="lema_SV"/>
		  <lit v="verbcj"/>
		</let>
		<let>
		  <var n="verbfinal"/>
		  <concat>
		    <clip pos="2" side="tl" part="lemh"/>
		    <clip pos="2" side="tl" part="a_verb"/>
		    <lit-tag v="3"/>
		    <lit-tag v="4"/>
		    <lit-tag v="5"/>
		    <clip pos="2" side="tl" part="lemq"/>
		  </concat>
		</let>
	      </when>
	      <when>
		<test>
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="past"/>
		  </equal> 
		</test>
		<let>
		  <var n="lema_SV"/>
		  <lit v="verbcj"/>
		</let>
		<let>
		  <var n="temps_chunk"/>
		  <lit-tag v="ifi"/>
		</let>
		<let>
		  <var n="pers_chunk"/>
		  <lit-tag v="PD"/>
		</let>
		<let>
		  <var n="nbr_chunk"/>
		  <lit-tag v="ND"/>
		</let>
		<let>
		  <var n="verbfinal"/>
		  <concat>
		    <clip pos="2" side="tl" part="lemh"/>
		    <clip pos="2" side="tl" part="a_verb"/>
		    <lit-tag v="3"/>
		    <lit-tag v="4"/>
		    <lit-tag v="5"/>
		    <clip pos="2" side="tl" part="lemq"/>
		  </concat>
		</let>
	      </when>
	    </choose>
	  </when>
	  <otherwise>
	    <choose>		
	  <when>
	    <test>
	      <or>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="will"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="shall"/>
		</equal>
	      </or>
	    </test>
	    <let>
	      <var n="temps_chunk"/>
	      <lit-tag v="fti"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="would"/>
	      </equal>
	    </test>
	    <let>
	      <var n="temps_chunk"/>
	      <lit-tag v="cni"/>
	    </let>
	  </when>		
	</choose>	
	<let>
	  <var n="pers_chunk"/>
	  <lit-tag v="PD"/>
	</let>
	<let>
	  <var n="nbr_chunk"/>
	  <lit-tag v="ND"/>
	</let>
	<let>
	  <var n="lema_SV"/>
	  <lit v="verbcj"/>
	</let>
	<let>
	  <var n="verbfinal"/>
	  <concat>
	    <clip pos="2" side="tl" part="lemh"/>
	    <clip pos="2" side="tl" part="a_verb"/>
	    <lit-tag v="3"/>
	    <lit-tag v="4"/>
	    <lit-tag v="5"/>
	    <clip pos="2" side="tl" part="lemq"/>
	  </concat>
	</let>
	      </otherwise>
	    </choose>
</def-macro>

<def-macro n="conj_be_ger" npar="2">
 	
	
  <let><!--este valor ten que ficar en branco ao principio, para que non se envíe nada agás se é pp -->
    <var n="gen_chunk"/>
    <lit v=""/>
  </let>
  <choose>
    <when> 
      <test>
	<equal>
	  <clip pos="1" side="sl" part="temps"/>
	  <lit-tag v="pp"/>
	</equal>
      </test>
      <let>
	<var n="temps_chunk"/>
	<clip pos="1" side="sl" part="temps"/>
      </let>	
      <let>
	<var n="pers_chunk"/>
	<lit v=""/>
      </let>	
      <let>
	<var n="gen_chunk"/>
	<lit-tag v="m"/>
      </let>
      <let>
	<var n="nbr_chunk"/>
	<lit-tag v="sg"/>
      </let>
      <let>
	<var n="verbfinal"/>
	<concat>
	  <clip pos="1" side="tl" part="lemh"/>
	  <clip pos="1" side="tl" part="a_verb"/>
	  <lit-tag v="3"/>
	  <lit-tag v="4"/>
	  <lit-tag v="5"/>
	  <clip pos="1" side="tl" part="lemq"/>
	</concat>
      </let>
    </when>

    
    <when>
      <test>
	<and>
	  <equal>
	    <clip pos="1" side="sl" part="temps"/>
	    <lit-tag v="past"/>
	  </equal>
	  <equal>
	    <clip pos="1" side="sl" part="pers"/>
	    <lit v=""/>
	  </equal>
	  <equal>
	    <clip pos="1" side="sl" part="nbr"/>
	    <lit v=""/>
	  </equal>
	</and>
      </test>
      <let>
	<var n="temps_chunk"/>
	<lit-tag v="pii"/><!--'dicía' -->
      </let>
      <let>
	<var n="pers_chunk"/>
	<lit-tag v="PD"/>
      </let>
      <let>
	<var n="nbr_chunk"/>
	<lit-tag v="ND"/>
      </let>
      <let>
	<var n="verbfinal"/>
	<concat>
	  <clip pos="2" side="tl" part="lemh"/> 
	  <clip pos="2" side="tl" part="a_verb"/>
	  <lit-tag v="3"/>
	  <lit-tag v="4"/>
	  <lit-tag v="5"/>
	  <clip pos="2" side="tl" part="lemq"/>
	</concat>
      </let>
    </when>

    
    <when>
      <test>
	<and>
	  <equal><!--é o caso de 'was' e algún outro, que teñen pers e nbr -->
	    <clip pos="1" side="sl" part="temps"/>
	    <lit-tag v="past"/>
	  </equal>
	  <equal>
	    <clip pos="1" side="sl" part="nbr"/>
	    <lit-tag v="sg"/>
	  </equal>
	</and>
      </test>
      <let>
	<var n="temps_chunk"/>
	<lit-tag v="pii"/>
      </let>
      <let>
	<var n="pers_chunk"/>
	<lit-tag v="PD"/>
      </let>
      <let>
	<var n="nbr_chunk"/>
	<clip pos="1" side="tl" part="nbr"/>
      </let>
      <let>
	<var n="verbfinal"/>
	<concat>
	  <clip pos="2" side="tl" part="lemh"/> 
	  <clip pos="2" side="tl" part="a_verb"/>
	  <lit-tag v="3"/>
	  <lit-tag v="4"/>
	  <lit-tag v="5"/>
	  <clip pos="2" side="tl" part="lemq"/>
	</concat>
      </let>
    </when>

    <when>	
      <test>
	<equal>
	  <clip pos="1" side="sl" part="temps"/>
	  <lit-tag v="pres"/>
	</equal>
      </test>

      <let>
	<var n="temps_chunk"/>
	<lit-tag v="pri"/>
      </let>
      <let>
	<var n="pers_chunk"/>
	<lit-tag v="PD"/>
      </let>
      <let>
	<var n="nbr_chunk"/>
	<lit-tag v="ND"/>
      </let>
      <let>
	<clip pos="1" side="tl" part="lemh"/>
	<lit v="estar"/>
      </let>
      <let>
	<clip pos="1" side="tl" part="a_verb"/>
	<lit-tag v="vblex"/>
      </let>
      <let>
	<var n="verbfinal"/>
	<concat>
	  <clip pos="1" side="tl" part="lemh"/>
	  <clip pos="1" side="tl" part="a_verb"/>
	  <lit-tag v="3"/>
	  <lit-tag v="4"/>
	  <lit-tag v="5"/>
	  <clip pos="1" side="tl" part="lemq"/>
	</concat>
      </let>
    </when>
    <when>	
      <test>
	<equal>
	  <clip pos="1" side="sl" part="temps"/>
	  <lit-tag v="pri"/>
	</equal>
      </test>

      <let>
	<clip pos="1" side="tl" part="lemh"/>
	<lit v="estar"/>
      </let>
      <let>
	<clip pos="1" side="tl" part="a_verb"/>
	<lit-tag v="vblex"/>
      </let>
      <let>
	<var n="temps_chunk"/>
	<clip pos="1" side="tl" part="temps"/>
      </let>
      <let>
	<var n="pers_chunk"/>
	<clip pos="1" side="tl" part="pers"/>
      </let>
      <let>
	<var n="nbr_chunk"/>
	<clip pos="1" side="tl" part="nbr"/>
      </let>
      <let>
	<var n="verbfinal"/>
	<concat>
	  <clip pos="1" side="tl" part="lemh"/>
	  <clip pos="1" side="tl" part="a_verb"/>
	  <lit-tag v="3"/>
	  <lit-tag v="4"/>
	  <lit-tag v="5"/>
	  <clip pos="1" side="tl" part="lemq"/>
	</concat>
      </let>
    </when>
    <when>
      <test>
	<or>
	  <equal>
	    <clip pos="1" side="sl" part="temps"/>
	    <lit-tag v="inf"/>
	  </equal>
	  <equal>
	    <clip pos="1" side="sl" part="temps"/>
	    <lit-tag v="ger"/>
	  </equal>
	</or>
      </test>
      <let>
	<var n="temps_chunk"/>
	<clip pos="1" side="tl" part="temps"/>
      </let>
      <let>
	<var n="pers_chunk"/>
	<lit-tag v="PD"/>
      </let>
      <let>
	<var n="nbr_chunk"/>
	<lit-tag v="ND"/>
      </let>
      <let>
	<clip pos="1" side="tl" part="lemh"/>
	<lit v="estar"/>
      </let>
      <let>
	<clip pos="1" side="tl" part="a_verb"/>
	<lit-tag v="vblex"/>
      </let>
      <let>
	<var n="verbfinal"/>
	<concat>
	  <clip pos="1" side="tl" part="lemh"/>
	  <clip pos="1" side="tl" part="a_verb"/>
	  <lit-tag v="3"/>
	  <clip pos="1" side="tl" part="lemq"/>
	</concat>
      </let>
    </when>
  </choose>
</def-macro>
	  
<def-macro n="conj_going_to_inf" npar="3"> 
  
      <let>
	<var n="lema_SV"/>
	<lit v="going_to_inf"/>
      </let>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="sl" part="temps"/>
	      <lit-tag v="pres"/>
	    </equal>
	  </test>
	  <let>
	    <var n="temps_chunk"/>
	    <lit-tag v="pri"/>
	  </let>	    
	  <let>
	    <var n="pers_chunk"/>
	    <lit-tag v="PD"/>
	  </let>
	  <let>
	    <var n="nbr_chunk"/>
	    <lit-tag v="ND"/>
	  </let>
	</when>
	<when>	
	  <test>
	    <equal>
	      <clip pos="1" side="sl" part="temps"/>
	      <lit-tag v="pri"/>
	    </equal>
	  </test>
	  <let>
	    <var n="temps_chunk"/>
	    <lit-tag v="pri"/>
	  </let>
	  <let>
	    <var n="pers_chunk"/>
	    <clip pos="1" side="tl" part="pers"/>
	  </let>
	  <let>
	    <var n="nbr_chunk"/>
	    <clip pos="1" side="tl" part="nbr"/>
	  </let>
	</when>
	<when>	
	  <test>
	    <equal>
	      <clip pos="1" side="sl" part="temps"/>
	      <lit-tag v="past"/>
	    </equal>
	  </test>
	  <let>
	    <var n="temps_chunk"/>
	    <lit-tag v="pii"/>
	  </let>	  
	  <choose>    
	    <when>
	      <test>
		<and>
		  <equal>
		    <clip pos="1" side="sl" part="pers"/>
		    <lit v=""/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="nbr"/>
		    <lit v=""/>
		  </equal>
		</and>
	      </test>
	      <let>
		<var n="pers_chunk"/>
		<lit-tag v="PD"/>
	      </let>
	      <let>
		<var n="nbr_chunk"/>
		<lit-tag v="ND"/>
	      </let>
	    </when>
	    <when>
	      <test>
		<!--é o caso de 'was' e algún outro, que teñen pers e nbr -->
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </test>
	      <let>
		<var n="pers_chunk"/>
		<lit-tag v="PD"/>
	      </let>
	      <let>
		<var n="nbr_chunk"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	    </when>
	  </choose>
	</when>
      </choose>
    <!--  <let>
	<var n="verbfinal"/>
	<concat>
	  <clip pos="2" side="tl" part="lemh"/> 
	  <clip pos="2" side="tl" part="a_verb"/>
	  <lit-tag v="3"/>
	  <lit-tag v="4"/>
	  <lit-tag v="5"/>
	  <clip pos="2" side="tl" part="lemq"/>
	  <lit v="$ ^"/>
	  <lit v="a"/>
	  <lit-tag v="pr"/>
	  <lit v="$ ^"/>
	  <clip pos="3" side="tl" part="lemh"/> 
	  <clip pos="3" side="tl" part="a_verb"/>
	  <lit-tag v="inf"/> 	  
	</concat>
      </let> -->
</def-macro>







<def-macro n="passa_inf_a_pres" npar="1">
	<choose>
	  <when>
	    <test>
	      <equal><!--Neste caso, se o tagger erra e escolle 'inf', trátase como se fose 'pres'-->
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="inf"/>
	      </equal>
	    </test>
	    <let>
	      <var n="temps_chunk"/>
	      <lit-tag v="pri"/>
	    </let>
	    <let>
	      <var n="pers_chunk"/>
	      <lit-tag v="PD"/>
	    </let>
	    <let>
	      <var n="nbr_chunk"/>
	      <lit-tag v="ND"/>
	    </let>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="verbcj"/>
	    </let>
	    <let>
	      <var n="verbfinal"/>
		<concat>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <lit-tag v="3"/>
		  <lit-tag v="4"/>
		  <lit-tag v="5"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</concat>
	    </let>
	  </when>
	</choose>
</def-macro>


<def-macro n="passa_inf_a_ifi" npar="1">
	<choose>
		<when>
			<test>
				<equal><!--Neste caso, se o tagger erra e escolle 'inf', trátase como se fose 'pres'-->
					<clip pos="1" side="sl" part="temps"/>
					<lit-tag v="inf"/>
				</equal>
			</test>
			<let>
				<var n="temps_chunk"/>
				<lit-tag v="ifi"/>
			</let>
			<let>
				<var n="pers_chunk"/>
				<lit-tag v="PD"/>
			</let>
			<let>
				<var n="nbr_chunk"/>
				<lit-tag v="ND"/>
			</let>
			<let>
				<var n="lema_SV"/>
				<lit v="verbcj"/>
			</let>
			<let>
				<var n="verbfinal"/>
				<concat>
					<clip pos="1" side="tl" part="lemh"/>
					<clip pos="1" side="tl" part="a_verb"/>
					<lit-tag v="3"/>
					<lit-tag v="4"/>
					<lit-tag v="5"/>
					<clip pos="1" side="tl" part="lemq"/>
				</concat>
			</let>
		</when>
	</choose>
</def-macro>

<def-macro n="passa_pp_a_ifip" npar="1">
  <choose>
	 <when><!--se entra como 'pp', trátase como se fose 'past' (ifi)-->
	    <test>
		<equal>
		  <clip pos="1" side="sl" part="temps"/>
		  <lit-tag v="pp"/>
		</equal>
	    </test>
	    <let>
	      <var n="temps_chunk"/>
	      <lit-tag v="ifi"/>
	    </let>
	    <let>
	      <var n="pers_chunk"/>
	      <lit-tag v="PD"/>
	    </let>
	    <let>
	      <var n="nbr_chunk"/>
	      <lit-tag v="ND"/>
	    </let>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="verbcj"/>
	    </let>
	    <let>
	      <var n="verbfinal"/>
		<concat>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <lit-tag v="3"/>
		  <lit-tag v="4"/>
		  <lit-tag v="5"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</concat>
	    </let>
	 </when>
  </choose>
</def-macro>



  </section-def-macros>

  <section-rules>

    <!--********************************* REGRAS DE SN ***************************************************** -->

<!-- primeiro as regras léxicas-->

    <rule comment="REGRA: ALL NOUNplural (para acrecentar o artigo definido en galego 'all students' :: 'todos os estudantes'"> 

      <pattern>
	<pattern-item n="all"/>
	<pattern-item n="nomplural"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="det_det_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu>
		<b/>
		<lu>
		  <lit v="o"/>
		  <lit-tag v="det.def"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <lit-tag v="pl"/>
		</lu>
		<b/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
      </action>
    </rule>

    <rule comment="REGRA: ALL ADJ NOUNplural (para acrecentar o artigo definido en galego 'all legal states' :: 'todos os estados legais'.">
      <pattern>
	<pattern-item n="all"/>
	<pattern-item n="adj"/>
	<pattern-item n="nomplural"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="det_det_nom_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>
		<lit v="todo"/>
		<lit-tag v="predet.3.4"/>  		  
		</lu>
		<b/>
		<lu>
		  <lit v="o"/>
		  <lit-tag v="det.def"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <lit-tag v="pl"/>
		</lu>
		<b/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="3" side="tl" part="gen_mf"/>
		  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="3" side="tl" part="nbr_sp"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
		<b/>
		<lu>
		  <var n="adjectiu1"/>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_adj"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>	  
      </action>
    </rule> 


 <rule comment="REGRA: DET NOM"> 
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	    <when>
	      <test>
		  <equal>
		      <clip pos="1" side="sl" part="lem"/>
		      <lit v="any"/>
		  </equal>
		</test>
	 <out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	      <tag><var n="negative"/></tag> <!-- para recoller se é negación-->
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <lit-tag v="sg"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	  </out>
	 </when>
	<otherwise>
	  <out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	      <tag><var n="negative"/></tag> <!-- para recoller se é negación-->
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	  </out>
	</otherwise>
	</choose>
      </action>
    </rule> 

    <rule comment="REGRA: NUM NOM1 OLD -> NUM NOM1 (300 years old - 300 anos)">
	    <pattern>
		    <pattern-item n="num"/>
		    <pattern-item n="yearmonth"/>
		    <pattern-item n="old"/>
	    </pattern>
	    <action>
		    <call-macro n="f_concord2">
			    <with-param pos="2"/>
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="million">
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="flexio_numerals">
			    <with-param pos="1"/>
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>
		    <choose>
			    <when>
				    <test>
					    <equal>
						    <clip pos="1" side="sl" part="lem"/>
						    <lit v="one"/>
					    </equal>
				    </test>
				    <let>
					    <clip pos="2" side="tl" part="nbr"/>
					    <lit-tag v="sg"/>
				    </let>
			    </when>
		    </choose>
		    <choose>
			    <when>
				    <test>
					    <not>
						    <equal>
							    <clip pos="1" side="sl" part="lem"/>
							    <lit v="one"/>
						    </equal>
					    </not>
				    </test>
				    <let>
					    <clip pos="2" side="tl" part="nbr"/>
					    <lit-tag v="pl"/>
				    </let>
			    </when>
		    </choose>
		    <out> 
			    <chunk name="num_yearold" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SN.UNDET"/></tag>
				    </tags>
				    <lu>   
					    <clip pos="1" side="tl" part="whole"/> 
				    </lu> 
				    <b pos="1"/> 
				    <lu>   
					    <clip pos="2" side="tl" part="lemh"/> 
					    <clip pos="2" side="tl" part="a_nom"/>
					    <clip pos="2" side="tl" part="gen"/>
					    <clip pos="2" side="tl" part="nbr"/>
					    <clip pos="2" side="tl" part="lemq"/>
				    </lu> 		
			    </chunk>
		    </out>
	    </action>
    </rule>

    <rule comment="REGRA: NUM NOM">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro> 
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	  <out> 
	    <chunk name="num_nom" case="caseFirstWord">
	      <tags>
		<tag><lit-tag v="SN.NUM"/></tag>
		<tag><var n="gen_chunk"/></tag>
		<tag><var n="nbr_chunk"/></tag>
	      </tags>
	      <lu>   
		<clip pos="1" side="tl" part="lem"/> 
		<clip pos="1" side="tl" part="a_num"/> 
		<clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		<clip pos="1" side="tl" part="gen_mf"/> 
		<clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		<clip pos="1" side="tl" part="nbr_sp"/>
	      </lu> 
	      <b pos="1"/>
	      <lu> 
		<clip pos="2" side="tl" part="lemh"/> 
		<clip pos="2" side="tl" part="a_nom"/> 
		<clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		<clip pos="2" side="tl" part="gen_mf"/>  
		<clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		<clip pos="2" side="tl" part="nbr_sp"/>
		<clip pos="2" side="tl" part="lemq"/> 
	      </lu> 
	    </chunk>
	  </out>
      </action>
    </rule>

    <rule comment="REGRA: DET DET NOM"> 
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <and>
		  <equal>
		    <clip pos="2" side="sl" part="lem"/>
		    <lit v="a"/>
		  </equal>
		  <in caseless="yes">
		    <clip pos="3" side="sl" part="lem"/>
		    <list n="temporais"/>
		  </in>
	      </and>
	    </test>
	    <out>
	    <chunk name="det_det_nom" case="caseFirstWord">
		  <tags>
		    <tag><lit-tag v="SN"/></tag>
		    <tag><var n="tipus_det"/></tag>
		    <tag><var n="gen_chunk"/></tag>
		    <tag><var n="nbr_chunk"/></tag>
		  </tags>
		  <lu>   
		    <clip pos="1" side="tl" part="whole"/> 
		  </lu> 
		  <b pos="1"/>
		  <lu>   
		    <lit v="a"/>
		    <lit-tag v="pr"/>
		  </lu> 
		  <b/>
		  <lu>   
		    <lit v="o"/>
		    <lit-tag v="det.def"/>
		    <clip pos="3" side="tl" part="gen"/>
		    <lit-tag v="sg"/>
		  </lu> 
		  <b pos="2"/>
		  <lu> 
		    <clip pos="3" side="tl" part="lemh"/> 
		    <clip pos="3" side="tl" part="a_nom"/>
		    <clip pos="3" side="tl" part="gen"/>
		    <lit-tag v="sg"/>
		    <clip pos="3" side="tl" part="lemq"/> 
		  </lu> 
		</chunk>
	    </out>
	  </when>
	   <when>
	    <test>
	      <and>
		  <equal>
		    <clip pos="2" side="sl" part="lem"/>
		    <lit v="a"/>
		  </equal>
		  <not>
		    <in caseless="yes">
		      <clip pos="3" side="sl" part="lem"/>
		      <list n="temporais"/>
		    </in>
		  </not>
	      </and>
	    </test>
	    <out>
	    <chunk name="det_det_nom" case="caseFirstWord">
		  <tags>
		    <tag><lit-tag v="SN"/></tag>
		    <tag><var n="tipus_det"/></tag>
		    <tag><var n="gen_chunk"/></tag>
		    <tag><var n="nbr_chunk"/></tag>
		  </tags>
		  <lu>   
		    <clip pos="1" side="tl" part="whole"/> 
		  </lu> 
		  <b pos="1"/>
		  <lu>   
		    <lit v="un"/>
		    <lit-tag v="det.ind"/>
		    <clip pos="3" side="tl" part="gen"/>
		    <lit-tag v="sg"/>
		  </lu>
		  <b pos="2"/>
		  <lu> 
		    <clip pos="3" side="tl" part="lemh"/> 
		    <clip pos="3" side="tl" part="a_nom"/>
		    <clip pos="3" side="tl" part="gen"/>
		    <lit-tag v="sg"/>
		    <clip pos="3" side="tl" part="lemq"/> 
		  </lu> 
		</chunk>
	    </out>
	  </when>
	  <otherwise>
	  <call-macro n="f_concord3">
	    <with-param pos="3"/>
	    <with-param pos="2"/>
	    <with-param pos="1"/>
	  </call-macro>
	      <out> 
		<chunk name="det_det_nom" case="caseFirstWord">
		  <tags>
		    <tag><lit-tag v="SN"/></tag>
		    <tag><var n="tipus_det"/></tag>
		    <tag><var n="gen_chunk"/></tag>
		    <tag><var n="nbr_chunk"/></tag>
		  </tags>
		  <lu>   
		    <clip pos="1" side="tl" part="lem"/> 
		    <clip pos="1" side="tl" part="a_det"/>
		    <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		    <clip pos="1" side="tl" part="gen_mf"/>
		    <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		    <clip pos="1" side="tl" part="nbr_sp"/>
		  </lu> 
		  <b pos="1"/>
		  <lu>   
		    <clip pos="2" side="tl" part="lem"/> 
		    <clip pos="2" side="tl" part="a_det"/>
		    <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		    <clip pos="2" side="tl" part="gen_mf"/>
		    <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		    <clip pos="2" side="tl" part="nbr_sp"/>
		  </lu> 
		  <b pos="2"/>
		  <lu> 
		    <clip pos="3" side="tl" part="lemh"/> 
		    <clip pos="3" side="tl" part="a_nom"/>
		    <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
		    <clip pos="3" side="tl" part="gen_mf"/>
		    <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
		    <clip pos="3" side="tl" part="nbr_sp"/>
		    <clip pos="3" side="tl" part="lemq"/> 
		  </lu> 
		</chunk>
	      </out>
	  </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="REGRA: DET NUM NOM"> 
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro> 
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<choose>		
	 <when>
	      <test>
		  <equal>
		      <clip pos="1" side="sl" part="lem"/>
		      <lit v="every"/>
		  </equal>
		</test>
	<out> 
	  <chunk name="det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <lit-tag v="sg"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/> 
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/> 
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/> 
	      <clip pos="3" side="tl" part="gen_mf"/> 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	  </out>
	  </when>
	<otherwise>
	<out> 
	  <chunk name="det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/> 
	      <clip pos="1" side="tl" part="nbr_sp"/> 
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/> 
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/> 
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/> 
	      <clip pos="3" side="tl" part="gen_mf"/> 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
	</otherwise>
	</choose>
      </action>
    </rule>


    <rule comment="REGRA: NUM NUM NOM"> 
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <and>
		<or>
		  <equal caseless="yes">
		    <clip pos="2" side="tl" part="lem"/>
		    <lit v="millón de"/>
		  </equal>
		  <equal caseless="yes">
		    <clip pos="2" side="tl" part="lem"/>
		    <lit v="un millón de"/>
		  </equal>
		</or>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="GD"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </let>
	  </when>
	  <otherwise>
	    <call-macro n="flexio_numerals">
	      <with-param pos="1"/>
	      <with-param pos="3"/>
	    </call-macro> 
	  </otherwise>
	</choose>
	<call-macro n="flexio_numerals">
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro> 
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="num_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.NUM"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_num"/> 
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/> 
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: DET DET NUM NOM"> 
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro> 
	<call-macro n="f_concord4">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_num"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>  
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: DET NUM NUM NOM">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <and>
		<or>
		  <equal caseless="yes">
		    <clip pos="3" side="tl" part="lem"/>
		    <lit v="millón de"/>
		  </equal>
		  <equal caseless="yes">
		    <clip pos="3" side="tl" part="lem"/>
		    <lit v="un millón de"/>
		  </equal>
		</or>
		<equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="GD"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </let>
	  </when>
	  <otherwise>
	    <call-macro n="flexio_numerals">
	      <with-param pos="2"/>
	      <with-param pos="4"/>
	    </call-macro> 
	  </otherwise>
	</choose>
	<call-macro n="flexio_numerals">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_num_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/> 
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_num"/>  
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>  
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <!-- SINTAGMAS NOMINAIS CUN ADJ -->

    <rule comment="REGRA: such a ADJ NOM (acrecentar tamén unha regra such a ADJ ADJ NOM?. Aquí non se puxo a función 'envia_adj' e por tanto desaparece o comparativo/superlativo: such a bigger field = un campo tan grande. Pensalo">  
      <pattern>
	<pattern-item n="such_a"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<choose><!--para dar xénero e número ao artigo acrecentado -->
	  <when>
	    <test>
	      <equal>
		<var n="gen_chunk"/>
		<lit-tag v="mf"/>
	      </equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </when>
	</choose>
	<choose><!--para dar xénero e número ao artigo acrecentado -->
	  <when>
	    <test>
	      <equal>
		<var n="nbr_chunk"/>
		<lit-tag v="sp"/>
	      </equal>
	    </test>
	    <let>
	      <var n="nbr_chunk"/>
	      <lit-tag v="ND"/>
	    </let>
	  </when>
	</choose>		
	<out> 
	  <chunk name="det_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <lit v="un"/>
	      <lit-tag v="det.ind.3.4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <lit v="tan"/>
	      <lit-tag v="preadv"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGRA: ADJ NOM">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>	  
	    <lu>  
	      <var n="adjectiu1"/> 
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: DET ADJ NOM">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>  
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	 <when>
	      <test>
		  <equal>
		      <clip pos="1" side="sl" part="lem"/>
		      <lit v="any"/>
		  </equal>
		</test>
	 <out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <lit-tag v="sg"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	  </chunk>
	  </out>
	 </when>
	 <when>
	      <test>
		  <equal>
		      <clip pos="1" side="sl" part="lem"/>
		      <lit v="several"/>
		  </equal>
		</test>
	 <out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <lit-tag v="pl"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <lit-tag v="pl"/>
	      <clip pos="3" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <lit-tag v="pl"/>
	    </lu> 
	  </chunk>
	  </out>
	 </when>
	<otherwise>
	<out> 
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	  </chunk>
	</out>
	</otherwise>
	</choose>
      </action>
    </rule>


    <rule comment="REGRA: NUM ADJ NOM">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>  
	<out> 
	  <chunk name="num_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.NUM"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_num"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>




    <rule comment="REGRA: DET DET ADJ NOM (your many beautiful cats)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp" />
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu>
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: DET NUM ADJ NOM (your three beautiful cats)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="2"/>
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_num_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu>
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

  <rule comment="REGLA: ADJ NUM ADJ NOM (top 100 listed companies)">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="num"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="2"/>
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>
	<out> 
	  <chunk name="adj_num_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu>
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: DET NUM ADJ NOM NOM (The Ten Best Coffee Tables)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="2"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="5"/>	 
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro> 
	<out> 
	  <chunk name="det_num_adj_nom_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: DET ADV (incl preadv) ADJ NOM">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>  
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro> 
	<out> 
	  <chunk name="det_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>	    
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="2" side="tl" part="whole"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: DET ADV (incl preadv) ADJ NOM NOM > the most challenging ski terrain">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="5"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>  
	<out> 
	  <chunk name="det_adv_adj_nom_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.DET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>	    
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b pos="3"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="4"/>
	    <lu>   
	      <clip pos="2" side="tl" part="whole"/> 
	    </lu> 
	    <b/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGRA: NUM ADV (incl preadv) ADJ NOM">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="1"/>
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro> 
	<out> 
	  <chunk name="num_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.NUM"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_num"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/> 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>	    
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="2" side="tl" part="whole"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: PREADV ADJ NOM">
      <pattern>
	<pattern-item n="preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>  
	<out> 
	  <chunk name="nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: DET DET ADV (incl preadv) ADJ NOM ">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="detquant"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="5"/>
	  <with-param pos="4"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="4"/>
	</call-macro>  
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	   <chunk name="det_det_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>	    
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>	    
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu>   
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu> 
	    <b pos="4"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: DET NUM ADV (incl preadv) ADJ NOM ">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="2"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="5"/>
	  <with-param pos="4"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="4"/>
	</call-macro>  
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_num_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>	    
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/> 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>	    
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu>   
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu> 
	    <b pos="4"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>




    <rule comment="REGRA: PREADV ADJ NOM (é como a regra anterior, mais tamén inclúe adverbios xunto con pp: 'locally produced materials'. Non hai ningunha regra para ADV ADJ(pp) NOM porque o adverbio non sempre modifica o adxectivo ou pp (....'always green articles'). Pensouse que cando é 'pp' é máis probábel que o adverbio modifique o pp, aínda que tamén non é sempre así.">
      <pattern>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="pp"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="f_concord2">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="nom_adj_adv" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <!-- SINTAGMAS NOMINAIS CON DOUS ADJS (ADJ ADJ)--> 

    <rule comment="REGRA: DET ADJ ADJ NOM">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="comparatiu_adj2">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <var n="adjectiu2"/>
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: DET DET ADJ ADJ NOM ">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="f_concord5">
	  <with-param pos="5"/>
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="comparatiu_adj2">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu2"/>
	      <clip pos="4" side="tl" part="lem"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="4"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: DET ADV ADJ ADJ NOM (a currently valid legislative delegation ->  unha delegación lexislativa actualmente válida)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="5"/>
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="comparatiu_adj2">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_nom_adj_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <var n="adjectiu2"/>
	      <clip pos="4" side="tl" part="lem"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: NUM ADV ADJ ADJ NOM (two currently valid legislative delegations)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="f_concord4">
	  <with-param pos="5"/>
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="comparatiu_adj2">
	  <with-param pos="4"/>
	</call-macro>
	<out> 
	  <chunk name="num_nom_adj_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.NUM"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <var n="adjectiu2"/>
	      <clip pos="4" side="tl" part="lem"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: NUM ADJ ADJ NOM">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="1"/>
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="comparatiu_adj2">
	  <with-param pos="3"/>
	</call-macro>
	<out> 
	  <chunk name="num_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.NUM"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_num"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu2"/>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: DET NUM ADJ ADJ NOM">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="2"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="f_concord5">
	  <with-param pos="5"/>
	  <with-param pos="4"/>
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="5"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="comparatiu_adj2">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_num_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu>
	    <b pos="3"/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="4"/>
	    <lu> 
	      <var n="adjectiu2"/>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: ADJ ADJ NOM">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>  
	<call-macro n="comparatiu_adj2">
	  <with-param pos="2"/>
	</call-macro>  
	<out> 
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <var n="adjectiu2"/>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: DET NUM PREADV ADJ ADJ NOM">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="2"/>
	  <with-param pos="6"/>
	</call-macro>
	<call-macro n="f_concord5">
	  <with-param pos="6"/>
	  <with-param pos="5"/>
	  <with-param pos="4"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="comparatiu_adj2">
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_num_nom_adj_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <clip pos="6" side="tl" part="lemh"/> 
	      <clip pos="6" side="tl" part="a_nom"/>
	      <clip pos="6" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="6" side="tl" part="gen_mf"/>
	      <clip pos="6" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="6" side="tl" part="nbr_sp"/>
	      <clip pos="6" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu2"/>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="4"/>
	    <lu> 
	      <clip pos="3" side="tl" part="whole"/>
	    </lu> 
	    <b pos="5"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: DET DETquant PREADV ADJ ADJ NOM">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="detquant"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="2"/>
	  <with-param pos="6"/>
	</call-macro>
	<call-macro n="f_concord5">
	  <with-param pos="6"/>
	  <with-param pos="5"/>
	  <with-param pos="4"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="comparatiu_adj2">
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_det_nom_adj_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <clip pos="6" side="tl" part="lemh"/> 
	      <clip pos="6" side="tl" part="a_nom"/>
	      <clip pos="6" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="6" side="tl" part="gen_mf"/>
	      <clip pos="6" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="6" side="tl" part="nbr_sp"/>
	      <clip pos="6" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu2"/>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="4"/>
	    <lu> 
	      <clip pos="3" side="tl" part="whole"/>
	    </lu> 
	    <b pos="5"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <!-- SINTAGMAS NOMINAIS CON DOUS ADJS COORDINADOS-->


    <rule comment="REGRA: ADJ AND ADJ NOM">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="f_concord3">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj2">
	  <with-param pos="3"/>
	</call-macro>
	<out>
	  <chunk name="nom_adj_conj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <var n="adjectiu1"/>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <var n="adjectiu2"/>
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

 <rule comment="REGRA: ADJ AND ADV ADJ NOM">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="f_concord3">
	  <with-param pos="5"/>
	  <with-param pos="4"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj2">
	  <with-param pos="4"/>
	</call-macro>
	<out>
	   <chunk name="nom_adj_conj_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <var n="adjectiu1"/>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <var n="adjectiu2"/>
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: DET ADJ AND ADJ NOM">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="5"/>
	  <with-param pos="4"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="comparatiu_adj2">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj_conj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <var n="adjectiu1"/>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <var n="adjectiu2"/>
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: DET ADJ AND ADV ADJ NOM">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="6"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="6"/>
	  <with-param pos="5"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="comparatiu_adj2">
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj_conj_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_nom"/>
	      <clip pos="6" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="6" side="tl" part="gen_mf"/>
	      <clip pos="6" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="6" side="tl" part="nbr_sp"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <var n="adjectiu1"/>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <var n="adjectiu2"/>
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: DET ADV ADJ AND ADJ NOM (the most popular and largest city)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="6"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="6"/>
	  <with-param pos="5"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="comparatiu_adj2">
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adv_adj_conj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_nom"/>
	      <clip pos="6" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="6" side="tl" part="gen_mf"/>
	      <clip pos="6" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="6" side="tl" part="nbr_sp"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <var n="adjectiu1"/>
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <var n="adjectiu2"/>
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>



    <!-- SINTAGMAS NOMINAIS CON DOUS ADJS CON VÍRGULA-->

    <rule comment="REGRA: DET ADJ, ADJ NOM (Those wild, wonderful places)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="coma"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="5"/>
	  <with-param pos="4"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="comparatiu_adj2">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_nom_adj_cm_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu1"/>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	    <lu>
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="4"/>
	    <lu> 
	      <var n="adjectiu2"/>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    

    <rule comment="REGRA: ADJ, ADJ NOM (wild, wonderful places)">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="coma"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="f_concord3">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>  
	<call-macro n="comparatiu_adj2">
	  <with-param pos="3"/>
	</call-macro>  
	<out> 
	  <chunk name="nom_adj_cm_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
 	    <b pos="1"/>
        <b pos="2"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu> 
	    <lu>
	      <clip pos="2" side="tl" part="whole"/> 
	    </lu>
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu2"/>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <!-- SINTAGMAS NOMINAIS CON APOS-->

    <rule comment="REGRA:  APOS ADJ APOS NOM">
      <pattern>
	<pattern-item n="apos"/>
	<pattern-item n="adj"/>
	<pattern-item n="apos"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="f_concord2">
	  <with-param pos="4"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="nom_'adj'" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu>
	    <lu>  
	      <var n="adjectiu1"/> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	    <lu>
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGRA: ADJ APOS NOM APOS">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="apos"/>
	<pattern-item n="nom"/>
	<pattern-item n="apos"/>
	
      </pattern>
      <action>
	<call-macro n="f_concord2">
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="'nom'_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="1"/>	  
	    <lu>  
	      <var n="adjectiu1"/> 
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: DET ADJ APOS 'NOM' APOS">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="apos"/>
	<pattern-item n="nom"/>
	<pattern-item n="apos"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="4"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>  
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_'nom'_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <lu>
	      <clip pos="5" side="tl" part="whole"/> 
	    </lu>
	    
	    <b pos="2"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGRA: DET APOS 'ADJ' APOS NOM">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="apos"/>
	<pattern-item n="adj"/>
	<pattern-item n="apos"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="5"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>  
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_nom_'adj'" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp" link-to="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="4"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/> 
	    </lu>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <lu>
	      <clip pos="4" side="tl" part="whole"/> 
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

    <!-- SINTAGMAS NOMINAIS CON MÁIS DUN NOME-->


    <rule comment="REGRA: NOM1 NOM2 -> NOM2 de NOM1">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <clip pos="2" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <in caseless="yes">
		    <clip pos="1" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="2" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="2" side="sl" part="lem"/>
		    <list n="days"/>
		  </in>
		</or>
	      </not>
	    </test>
	    <call-macro n="elimina_GDND">
	      <with-param pos="1"/>
	    </call-macro>
	    <out> 
	      <chunk name="nom_pr_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN.UNDET"/></tag>
		  <tag><clip pos="2" side="tl" part="gen"/></tag>
		  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		</tags>
		<lu> 
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen" link-to="3"/>
		  <clip pos="2" side="tl" part="nbr" link-to="4"/>
		  <clip pos="2" side="tl" part="lemq"/>  
		</lu> 
		<b pos="1"/>
		<lu>
		  <lit v="de"/>
		  <lit-tag v="pr"/>
		</lu>
		<b/>
		<lu> 
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_nom"/>
		  <clip pos="1" side="tl" part="gen"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="tl" part="lemq"/>  
		</lu> 
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <call-macro n="elimina_GDND">
	      <with-param pos="2"/>
	    </call-macro>
	    <out>
	      <chunk name="nom_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN.UNDET"/></tag>
		  <tag><clip pos="1" side="tl" part="gen"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		</tags>
		<lu> 
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_nom"/>
		  <clip pos="1" side="tl" part="gen" link-to="3"/>
		  <clip pos="1" side="tl" part="nbr" link-to="4"/>
		  <clip pos="1" side="tl" part="lemq"/>  
		</lu> 
		<b pos="1"/>
		<lu> 
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/>  
		</lu> 
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="REGRA: DET NOM1 NOM2 -> DET NOM2 de NOM1">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <clip pos="3" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <in caseless="yes">
		    <clip pos="2" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="3" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="3" side="sl" part="lem"/>
		    <list n="days"/>
		  </in>
		</or>
	      </not>
	    </test>
	<call-macro n="f_concord2">
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="2"/>
	</call-macro>
	    <out> 
	      <chunk name="det_nom_pr_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="1"/>
		<lu> 
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="3" side="tl" part="gen_mf"/>
		  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="3" side="tl" part="nbr_sp"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu> 
		<b pos="2"/>
		<lu>
		  <lit v="de"/>
		  <lit-tag v="pr"/>
		</lu>
		<b/>
		<lu>   
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu> 
	      </chunk>
	    </out>
	  </when>
	  <otherwise><!--'his son James' non fai mudanza da orde do nome. Tampouco '(they crossed) the wall Friday-->
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="3"/>
	</call-macro>
	    <out> 
	      <chunk name="det_nom_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="1"/>
		<lu> 
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/>  
		</lu> 
		<b pos="2"/>
		<lu>   
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu> 
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="REGRA: NUM NOM1 NOM2 -> NUM NOM2 de NOM1 (Three street chairs) ">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <clip pos="3" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <in caseless="yes">
		    <clip pos="2" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="3" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="3" side="sl" part="lem"/>
		    <list n="days"/>
		  </in>
		</or>
	      </not>
	    </test>	
	<call-macro n="f_concord2">
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="2"/>
	</call-macro>
	<out> 
	  <chunk name="num_nom_pr_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.NUM"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_num"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
	  </when>
	  <otherwise>	
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="3"/>
	</call-macro>
	<out>
	  <chunk name="num_nom_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.NUM"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_num"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
	  </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="REGRA: NUM-NOM1 NOM2 -> NOM2 de NUM NOM1(pl) (Three-month extension - extensión de tres meses)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="guio"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

<!--aquí non se pon a función f_concord entre 3 e 1 porque os valores non van ligados ao chunk e por tanto non se poden deixar GDs--> 
	<call-macro n="elimina_GDND">
	  <with-param pos="3"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	    </test>
	    <choose>
	      <when>
		<test>
		  <not>
		    <equal>
		      <clip pos="3" side="tl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </not>
		</test>
		<let>
		  <clip pos="1" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="gen"/>
		</let>
	      </when>
	      <otherwise>
		<let>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="m"/>
		</let>
	      </otherwise>
	    </choose>
	  </when>
	</choose>
	<out> 
	  <chunk name="nom_pr_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.NUM"/></tag>
	      <tag><clip pos="4" side="tl" part="gen"/></tag>
	      <tag><clip pos="4" side="tl" part="nbr"/></tag>
	    </tags>	
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen" link-to="3"/>
	      <clip pos="4" side="tl" part="nbr" link-to="4"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="3"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_num"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	    </lu> 
	    <b/> 
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <lit-tag v="pl"/><!--atención! e cando é 'one-month'? - arranxar -->
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: ADJ-NOM1 NOM2 -> NOM2 de NOM1 ADJ (open-source software)">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

<!--aquí non se pon a función f_concord entre 3 e 1 porque os valores non van ligados ao chunk e por tanto non se poden deixar GDs--> 
	<call-macro n="elimina_GDND">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="posa_GDND">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>
		    <clip pos="3" side="tl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="1" side="tl" part="gen"/>
		<clip pos="3" side="tl" part="gen"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
	</choose>
	<choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>
		    <clip pos="3" side="tl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="1" side="tl" part="nbr"/>
		<clip pos="3" side="tl" part="nbr"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
	</choose>
	<out> 
	  <chunk name="nom_pr_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><clip pos="4" side="tl" part="gen"/></tag>
	      <tag><clip pos="4" side="tl" part="nbr"/></tag>
	    </tags>	
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen" link-to="3"/>
	      <clip pos="4" side="tl" part="nbr" link-to="4"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="3"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b/> 
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="gen" />
	      <clip pos="1" side="tl" part="nbr" />
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: DET ADJ-NOM1 NOM2 -> DET NOM2 de NOM1 ADJ (the open-source software)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="5"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
<!--aquí non se pon a función f_concord entre 4 e 2 porque os valores non van ligados ao chunk e por tanto non se poden deixar GDs'nin NDs:-->
	<call-macro n="elimina_GDND">
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="posa_GDND">
	  <with-param pos="2"/>
	</call-macro>
	<choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>
		    <clip pos="4" side="tl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="gen"/>
		<clip pos="4" side="tl" part="gen"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
	</choose>
	<choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>
		    <clip pos="4" side="tl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="nbr"/>
		<clip pos="4" side="tl" part="nbr"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
	</choose>
	<out> 
	  <chunk name="det_nom_pr_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>	
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu>
	    <b pos="1"/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="4"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen" />
	      <clip pos="2" side="tl" part="nbr" />
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>



    <rule comment="REGRA: NUM ADJ-NOM1 NOM2 -> NOM NOM2 de NOM1 ADJ (three open-source softwares)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="1"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="5"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

<!--aquí non se pon a función f_concord entre 4 e 2 porque os valores non van ligados ao chunk e por tanto non se poden deixar GDs'nin NDs:-->
	<call-macro n="elimina_GDND">
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="posa_GDND">
	  <with-param pos="2"/>
	</call-macro>
	<choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>
		    <clip pos="4" side="tl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="gen"/>
		<clip pos="4" side="tl" part="gen"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
	</choose>
	<choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>
		    <clip pos="4" side="tl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="nbr"/>
		<clip pos="4" side="tl" part="nbr"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
	</choose>

	<out> 
	  <chunk name="num_nom_pr_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.NUM"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>	
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_num"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf" />
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp" />
	    </lu>
	    <b pos="1"/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="4"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen" />
	      <clip pos="2" side="tl" part="nbr" />
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: ADJ-NOM1 NOM2 NOM3-> NOM3 de NOM1 NOM ADJ (open-source software systems) falta comprobar np e days">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="4"/>
	</call-macro>	
<!--aquí non se pon a función f_concord entre 3 e 1 porque os valores non van ligados ao chunk e por tanto non se poden deixar GDs'nin NDs:-->
	<call-macro n="elimina_GDND">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="posa_GDND">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>
		    <clip pos="3" side="tl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="1" side="tl" part="gen"/>
		<clip pos="3" side="tl" part="gen"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
	</choose>
	<choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>
		    <clip pos="3" side="tl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="1" side="tl" part="nbr"/>
		<clip pos="3" side="tl" part="nbr"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
	</choose>
	<out> 
	  <chunk name="nom_pr_nom_pr_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><clip pos="5" side="tl" part="gen"/></tag>
	      <tag><clip pos="5" side="tl" part="nbr"/></tag>
	    </tags>	
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen" link-to="3"/>
	      <clip pos="5" side="tl" part="nbr" link-to="4"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen" />
	      <clip pos="4" side="tl" part="nbr" />
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b pos="3"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="4"/>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="gen" />
	      <clip pos="1" side="tl" part="nbr" />
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: DET ADJ-NOM1 NOM2 NOM3-> NOM3 de NOM1 NOM ADJ (the open-source software systems)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="6"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="6"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="5"/>
	</call-macro>	
<!--aquí non se pon a función f_concord entre 4 e 2 porque os valores non van ligados ao chunk e por tanto non se poden deixar GDs ni NDs--> 
	<call-macro n="elimina_GDND">
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="posa_GDND">
	  <with-param pos="2"/>
	</call-macro>
	<choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>
		    <clip pos="4" side="tl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="gen"/>
		<clip pos="4" side="tl" part="gen"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
	</choose>
	<choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>
		    <clip pos="4" side="tl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="nbr"/>
		<clip pos="4" side="tl" part="nbr"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
	</choose>
	<out> 
	  <chunk name="det_nom_pr_nom_pr_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu>
	    <b pos="1"/>
	    <lu> 
	      <clip pos="6" side="tl" part="lemh"/> 
	      <clip pos="6" side="tl" part="a_nom"/>
	      <clip pos="6" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="6" side="tl" part="gen_mf"/>
	      <clip pos="6" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="6" side="tl" part="nbr_sp"/>
	      <clip pos="6" side="tl" part="lemq"/>  
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen" />
	      <clip pos="5" side="tl" part="nbr" />
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="4"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="5"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen" />
	      <clip pos="2" side="tl" part="nbr" />
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: NUM ADJ-NOM1 NOM2 NOM3-> NOM3 de NOM1 NOM ADJ (three open-source software systems)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>

	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="1"/>
	  <with-param pos="6"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="6"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="5"/>
	</call-macro>	
<!--aquí non se pon a función f_concord entre 4 e 2 porque os valores non van ligados ao chunk e por tanto non se poden deixar GDs ni NDs--> 
	<call-macro n="elimina_GDND">
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="posa_GDND">
	  <with-param pos="2"/>
	</call-macro>
	<choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>
		    <clip pos="4" side="tl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="gen"/>
		<clip pos="4" side="tl" part="gen"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
	</choose>
	<choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<not>
		  <equal>
		    <clip pos="4" side="tl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
		</not>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="nbr"/>
		<clip pos="4" side="tl" part="nbr"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
	</choose>
	<out> 
	  <chunk name="num_nom_pr_nom_pr_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.NUM"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>	

	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_num"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf" />
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp" />
	    </lu>
	    <b pos="1"/>
	    <lu> 
	      <clip pos="6" side="tl" part="lemh"/> 
	      <clip pos="6" side="tl" part="a_nom"/>
	      <clip pos="6" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="6" side="tl" part="gen_mf"/>
	      <clip pos="6" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="6" side="tl" part="nbr_sp"/>
	      <clip pos="6" side="tl" part="lemq"/>  
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen" />
	      <clip pos="5" side="tl" part="nbr" />
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="4"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="5"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen" />
	      <clip pos="2" side="tl" part="nbr" />
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>



    <rule comment="REGRA: ADV-ADJ NOM -> NOM ADV ADJ (non-free software)">
      <pattern>
	<pattern-item n="adv"/>
	<pattern-item n="guio"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="f_concord2">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>	
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <b/>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/>
	    </lu> 
	    <b pos="3"/> 
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: NUM ADV-ADJ NOM (two non-free softwares)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="adv"/>
	<pattern-item n="guio"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="1"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="5"/>
	  <with-param pos="4"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="num_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.NUM"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>	
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_num"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu>
	    <b pos="1"/> 
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b/>
	    <lu>   
	      <clip pos="2" side="tl" part="whole"/>
	    </lu> 
	    <b pos="4"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp" />
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: DET ADV-ADJ NOM (the non-free software)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adv"/>
	<pattern-item n="guio"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="5"/>
	  <with-param pos="4"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>	
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu>
	    <b pos="1"/> 
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b/>
	    <lu>   
	      <clip pos="2" side="tl" part="whole"/>
	    </lu> 
	    <b pos="4"/> 
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3" />
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>



    <rule comment="REGRA: DET DET NOM1 NOM2 -> DET DET NOM2 de NOM1">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <clip pos="4" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="4" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <in caseless="yes">
		    <clip pos="4" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="3" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="4" side="sl" part="lem"/>
		    <list n="days"/>
		  </in>
		</or>
	      </not>
	    </test>	    
	    <call-macro n="f_concord3">
	      <with-param pos="4"/>
	      <with-param pos="2"/>
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="3"/>
	    </call-macro>	    
	    <out> 
	      <chunk name="det_det_nom_pr_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="1"/>
		<lu>   
		  <clip pos="2" side="tl" part="lem"/> 
		  <clip pos="2" side="tl" part="a_det"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="2"/>
		<lu> 
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_nom"/>
		  <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="4" side="tl" part="gen_mf"/>
		  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="4" side="tl" part="nbr_sp"/>
		  <clip pos="4" side="tl" part="lemq"/>  
		</lu> 
		<b pos="3"/>
		<lu>
		  <lit v="de"/>
		  <lit-tag v="pr"/>
		</lu>
		<b/>
		<lu>   
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu> 
	      </chunk>
	    </out>
	  </when>
	  <otherwise><!--'his first son John' -->	    
	    <call-macro n="f_concord3">
	      <with-param pos="3"/>
	      <with-param pos="2"/>
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="4"/>
	    </call-macro>
	    <out> 
	      <chunk name="det_det_nom_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="1"/>
		<lu>   
		  <clip pos="2" side="tl" part="lem"/> 
		  <clip pos="2" side="tl" part="a_det"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="2"/>
		<lu> 
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="3" side="tl" part="gen_mf"/>
		  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="3" side="tl" part="nbr_sp"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu> 
		<b pos="3"/>
		<lu>   
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_nom"/>
		  <clip pos="4" side="tl" part="gen"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu> 
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="REGRA: DET NUM NOM1 NOM2 -> DET NUM NOM2 de NOM1">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="2"/>
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <clip pos="4" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="4" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <in caseless="yes">
		    <clip pos="4" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="3" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="4" side="sl" part="lem"/>
		    <list n="days"/>
		  </in>
		</or>
	      </not>
	    </test>	    
	    <call-macro n="f_concord3">
	      <with-param pos="4"/>
	      <with-param pos="2"/>
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="3"/>
	    </call-macro>
	    <out> 
	      <chunk name="det_num_nom_pr_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="1"/>
		<lu>   
		  <clip pos="2" side="tl" part="lem"/> 
		  <clip pos="2" side="tl" part="a_num"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="2"/>
		<lu> 
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_nom"/>
		  <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="4" side="tl" part="gen_mf"/>
		  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="4" side="tl" part="nbr_sp"/>
		  <clip pos="4" side="tl" part="lemq"/>  
		</lu> 
		<b pos="3"/>
		<lu>
		  <lit v="de"/>
		  <lit-tag v="pr"/>
		</lu>
		<b/>
		<lu>   
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu> 
	      </chunk>
	    </out>
	  </when>
	  <otherwise><!--His three cats Tom... -->	    
	    <call-macro n="f_concord3">
	      <with-param pos="3"/>
	      <with-param pos="2"/>
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="4"/>
	    </call-macro>
	    <out> 
	      <chunk name="det_num_nom_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="1"/>
		<lu>   
		  <clip pos="2" side="tl" part="lem"/> 
		  <clip pos="2" side="tl" part="a_num"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="2"/>
		<lu> 
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="3" side="tl" part="gen_mf"/>
		  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="3" side="tl" part="nbr_sp"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu> 
		<b pos="3"/>
		<lu>   
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_nom"/>
		  <clip pos="4" side="tl" part="gen"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu> 
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="REGRA: DET NUM-NOM1 NOM2 ->DET NOM2 de NUM NOM1(pl) (A three-month extension - unha extensión de tres meses">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="guio"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="2"/>
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="5"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

<!--aquí non se pon a función f_concord entre 4 e 2 porque os valores non van ligados ao chunk e por tanto non se poden deixar GDs ni NDs--> 
	<call-macro n="elimina_GDND">
	  <with-param pos="4"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	    </test>
	    <choose>
	      <when>
		<test>
		  <not>
		    <equal>
		      <clip pos="4" side="tl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </not>
		</test>
		<let>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="4" side="tl" part="gen"/>
		</let>
	      </when>
	      <otherwise>
		<let>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="m"/>
		</let>
	      </otherwise>
	    </choose>
	  </when>
	</choose>
	<out> 
	  <chunk name="det_nom_pr_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu> 
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	    </lu> 
	    <b pos="4"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="pl"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: ADJ NOM1 NOM2 -> NOM2 de NOM1 ADJ">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>  
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <clip pos="3" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <in caseless="yes">
		    <clip pos="2" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="3" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="3" side="sl" part="lem"/>
		    <list n="days"/>
		  </in>
		</or>
	      </not>
	    </test> 	    
	    <call-macro n="elimina_GDND">
	      <with-param pos="2"/>
	    </call-macro>   
	    <call-macro n="posa_GDND">
	      <with-param pos="1"/>
	    </call-macro>
	    <choose>
	      <when>
		<test>
		  <equal>
		    <clip pos="1" side="tl" part="gen"/>
		    <lit-tag v="GD"/>
		  </equal>
		</test>
		<choose>
		  <when>
		    <test>
		      <not>
			<equal>
			  <clip pos="2" side="tl" part="gen"/>
			  <lit-tag v="mf"/>
			</equal>
		      </not>
		    </test>
		    <let>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="2" side="tl" part="gen"/>
		    </let>
		  </when>
		  <otherwise>
		    <let>
		      <clip pos="1" side="tl" part="gen"/>
		      <lit-tag v="m"/>
		    </let>
		  </otherwise>
		</choose>
	      </when>
	    </choose>
	    <choose>
	      <when>
		<test>
		  <equal>
		    <clip pos="1" side="tl" part="nbr"/>
		    <lit-tag v="ND"/>
		  </equal>
		</test>
		<choose>
		  <when>
		    <test>
		      <not>
			<equal>
			  <clip pos="2" side="tl" part="nbr"/>
			  <lit-tag v="sp"/>
			</equal>
		      </not>
		    </test>
		    <let>
		      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="nbr"/>
		    </let>
		  </when>
		  <otherwise>
		    <let>
		      <clip pos="1" side="tl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </let>
		  </otherwise>
		</choose>
	      </when>
	    </choose>	  
	    <out> 
	      <chunk name="nom_pr_nom_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN.UNDET"/></tag>
		  <tag><clip pos="3" side="tl" part="gen"/></tag>
		  <tag><clip pos="3" side="tl" part="nbr"/></tag>
		</tags>
		<lu> 
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen" link-to="3"/>
		  <clip pos="3" side="tl" part="nbr" link-to="4"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu> 
		<b pos="1"/>
		<lu>
		  <lit v="de"/>
		  <lit-tag v="pr"/>
		</lu>
		<b/>
		<lu>   
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu> 
		<b pos="2"/>
		<lu> 
		  <var n="adjectiu1"/>   
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_adj"/>
		  <clip pos="1" side="tl" part="gen"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="tl" part="lemq"/> 
		</lu> 
	      </chunk>
	    </out>
	  </when>
	  <otherwise>	    
	    <call-macro n="f_concord2">
	      <with-param pos="2"/>
	      <with-param pos="1"/>
	    </call-macro>  
	    <call-macro n="elimina_GDND">
	      <with-param pos="3"/>
	    </call-macro>   
	    <out> <!--'beautiful son James' -->
	      <chunk name="nom_adj_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN.UNDET"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu> 
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/>  
		</lu> 
		<b pos="1"/>
		<lu> 
		  <var n="adjectiu1"/>   
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_adj"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		  <clip pos="1" side="tl" part="lemq"/> 
		</lu>
		<b pos="2"/> 
		<lu>   
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu> 	    
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="REGRA: DET ADJ NOM1 NOM2 -> DET NOM2 de NOM1 ADJ">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
      	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>  
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <clip pos="4" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="4" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <in caseless="yes">
		    <clip pos="4" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="3" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="4" side="sl" part="lem"/>
		    <list n="days"/>
		  </in>
		</or>
	      </not>
	    </test>
	    <call-macro n="f_concord3">
	      <with-param pos="4"/>
	      <with-param pos="1"/>
	      <with-param pos="2"/>
	    </call-macro>   	    
	    <call-macro n="elimina_GDND">
	      <with-param pos="3"/>
	    </call-macro> 
	    <out> 
	      <chunk name="det_nom_pr_nom_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="1"/>
		<lu> 
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_nom"/>
		  <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="4" side="tl" part="gen_mf"/>
		  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="4" side="tl" part="nbr_sp"/>
		  <clip pos="4" side="tl" part="lemq"/>  
		</lu> 
		<b pos="2"/>
		<lu>
		  <lit v="de"/>
		  <lit-tag v="pr"/>
		</lu>
		<b/>
		<lu>   
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu> 
		<b pos="3"/>
		<lu> 
		  <var n="adjectiu1"/>   
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu> 
	      </chunk>
	    </out>
	  </when>
	  <otherwise><!--'his beautiful son James' -->
	    <call-macro n="f_concord3">
	      <with-param pos="3"/>
	      <with-param pos="2"/>
	      <with-param pos="1"/>
	    </call-macro>   	    
	    <call-macro n="elimina_GDND">
	      <with-param pos="4"/>
	    </call-macro>
	    <out> 
	      <chunk name="det_nom_adj_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="1"/>
		<lu> 
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="3" side="tl" part="gen_mf"/>
		  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="3" side="tl" part="nbr_sp"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu> 
		<b pos="2"/>
		<lu> 
		  <var n="adjectiu1"/>   
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu> 
		<b pos="3"/>
		<lu>   
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_nom"/>
		  <clip pos="4" side="tl" part="gen"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu>     
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>

 <rule comment="REGRA: ADJ1 ADJ2 NOM1 NOM2 -> NOM2 de NOM1 ADJ2 ADJ1">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>  
	<call-macro n="comparatiu_adj2">
	  <with-param pos="2"/>
	</call-macro>  
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <clip pos="4" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="4" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <in caseless="yes">
		    <clip pos="4" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="3" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="4" side="sl" part="lem"/>
		    <list n="days"/>
		  </in>
		</or>
	      </not>
	    </test>
	    <call-macro n="f_concord3">
	      <with-param pos="4"/>
	      <with-param pos="1"/>
	      <with-param pos="2"/>
	    </call-macro>   	    
	    <call-macro n="elimina_GDND">
	      <with-param pos="3"/>
	    </call-macro> 
	    <out> 
	      <chunk name="nom_pr_nom_adj_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN.UNDET"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu> 
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_nom"/>
		  <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="4" side="tl" part="gen_mf"/>
		  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="4" side="tl" part="nbr_sp"/>
		  <clip pos="4" side="tl" part="lemq"/>  
		</lu> 
		<b pos="1"/>
		<lu>
		  <lit v="de"/>
		  <lit-tag v="pr"/>
		</lu>
		<b/>
		<lu>   
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu> 
		<b pos="2"/>
		<lu> 
		  <var n="adjectiu2"/>   
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu> 
		<b pos="3"/>
		<lu>   
		  <var n="adjectiu1"/>  
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_adj"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu> 
	      </chunk>
	    </out>
	  </when>
	  <otherwise><!--'his beautiful son James' -->
	    <call-macro n="f_concord3">
	      <with-param pos="3"/>
	      <with-param pos="2"/>
	      <with-param pos="1"/>
	    </call-macro>   	    
	    <call-macro n="elimina_GDND">
	      <with-param pos="4"/>
	    </call-macro>
	    <out> 
	      <chunk name="nom_adj_adj_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN.UNDET"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu> 
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="3" side="tl" part="gen_mf"/>
		  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="3" side="tl" part="nbr_sp"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu> 
		<b pos="1"/>
		<lu> 
		  <var n="adjectiu2"/>   
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu> 
		<b pos="2"/>
		<lu>   
		  <var n="adjectiu1"/> 
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_adj"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="3"/>
		<lu>   
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_nom"/>
		  <clip pos="4" side="tl" part="gen"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu>     
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>


 <rule comment="REGRA: DET ADJ1 ADJ2 NOM1 NOM2 -> DET NOM2 de NOM1 ADJ2 ADJ1">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>  
	<call-macro n="comparatiu_adj2">
	  <with-param pos="3"/>
	</call-macro>  
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <clip pos="5" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="5" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <equal>
		    <clip pos="4" side="tl" part="a_nom"/>
		    <lit-tag v="np.ant"/>
		  </equal>
		  <equal>
		    <clip pos="4" side="tl" part="a_nom"/>
		    <lit-tag v="np.cog"/>
		  </equal>
		  <in caseless="yes">
		    <clip pos="5" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="4" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="5" side="sl" part="lem"/>
		    <list n="days"/>
		  </in>
		</or>
	      </not>
	    </test>
	    <call-macro n="f_concord4">
	      <with-param pos="5"/>
	      <with-param pos="2"/>
	      <with-param pos="3"/>
	      <with-param pos="1"/>
	    </call-macro>   	    
	    <call-macro n="elimina_GDND">
	      <with-param pos="4"/>
	    </call-macro> 
	    <out> 
	      <chunk name="det_nom_pr_nom_adj_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="1"/>
		<lu> 
		  <clip pos="5" side="tl" part="lemh"/> 
		  <clip pos="5" side="tl" part="a_nom"/>
		  <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="5" side="tl" part="gen_mf"/>
		  <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="5" side="tl" part="nbr_sp"/>
		  <clip pos="5" side="tl" part="lemq"/>  
		</lu> 
		<b pos="2"/>
		<lu>
		  <lit v="de"/>
		  <lit-tag v="pr"/>
		</lu>
		<b/>
		<lu>   
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_nom"/>
		  <clip pos="4" side="tl" part="gen"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu> 
		<b pos="3"/>
		<lu> 
		  <var n="adjectiu2"/>   
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_adj"/>
		  <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="3" side="tl" part="gen_mf"/>
		  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="3" side="tl" part="nbr_sp"/>
		  <clip pos="3" side="tl" part="lemq"/> 
		</lu> 
		<b pos="4"/>
		<lu>   
		  <var n="adjectiu1"/>  
		  <clip pos="2" side="tl" part="lem"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		</lu> 
	      </chunk>
	    </out>
	  </when>
	  <otherwise><!--'his beautiful son James' -->
	    <call-macro n="f_concord4">
	      <with-param pos="4"/>
	      <with-param pos="3"/>
	      <with-param pos="2"/>
	      <with-param pos="1"/>
	    </call-macro>   	    
	    <call-macro n="elimina_GDND">
	      <with-param pos="5"/>
	    </call-macro>
	    <out> 
	      <chunk name="det_nom_pr_nom_adj_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="1"/>
		<lu> 
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_nom"/>
		  <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="4" side="tl" part="gen_mf"/>
		  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="4" side="tl" part="nbr_sp"/>
		  <clip pos="4" side="tl" part="lemq"/>  
		</lu> 
		<b pos="2"/>
		<lu> 
		  <var n="adjectiu2"/>   
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_adj"/>
		  <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="3" side="tl" part="gen_mf"/>
		  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="3" side="tl" part="nbr_sp"/>
		  <clip pos="3" side="tl" part="lemq"/> 
		</lu> 
		<b pos="3"/>
		<lu>   
		  <var n="adjectiu1"/> 
		  <clip pos="2" side="tl" part="lem"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="4"/>
		<lu>   
		  <clip pos="5" side="tl" part="lemh"/> 
		  <clip pos="5" side="tl" part="a_nom"/>
		  <clip pos="5" side="tl" part="gen"/>
		  <clip pos="5" side="tl" part="nbr"/>
		  <clip pos="5" side="tl" part="lemq"/>
		</lu>     
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>


    <rule comment="REGRA: NOM1 NOM2 NOM3 -> NOM3 de NOM2 do NOM1 (nomes comúns: outra maneira de solucionar reordenamentos non desexados de nomes propios, que nas regras anteriores faise mediante operacións na regra">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
	<pattern-item n="nomcomu"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

	<choose>
	  <when>
	    <test>
	      <not>
		<or>		  
		  <in caseless="yes">
		    <clip pos="3" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="3" side="sl" part="lem"/>
		    <list n="days"/>
		  </in>
		</or>
	      </not>
	    </test>

	    <call-macro n="elimina_GDND">
	      <with-param pos="2"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="genere_nombre">
	      <with-param pos="1"/>
	    </call-macro>

	<out> 
	  <chunk name="nom_pr_nom_pr_det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><clip pos="3" side="tl" part="gen"/></tag>
	      <tag><clip pos="3" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen" link-to="3"/>
	      <clip pos="3" side="tl" part="nbr" link-to="4"/>
	      <clip pos="3" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="1"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>
	      <lit v="o"/><!--De momento ponse artigo, talvez non sexa sempre correcto, estudalo. -->
	      <lit-tag v="det.def"/>
	      <var n="genere"/>
	      <var n="nombre"/>
	    </lu>
	    <b/> 
	    <lu> 
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
	  </when>
	  <otherwise>
	    <call-macro n="elimina_GDND">
	      <with-param pos="3"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="genere_nombre">
	      <with-param pos="1"/>
	    </call-macro>
	    <out> 
	  <chunk name="nom_nom_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><clip pos="2" side="tl" part="gen"/></tag>
	      <tag><clip pos="2" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr" link-to="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>
	      <lit v="o"/><!--De momento ponse artigo, talvez non sexa sempre correcto, estudalo. -->
	      <lit-tag v="det.def"/>
	      <var n="genere"/>
	      <var n="nombre"/>
	    </lu>
	    <b pos="2"/>
	    <lu> 
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu> 
	    <b/>	    
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>  
	    </lu> 
	  </chunk>
	</out>
	  </otherwise>
	</choose>
      </action>
    </rule>

  <rule comment="REGRA: NOMpropi1 NOMpropi2 NOMpropi3 -> NOMpropi1 NOMpropi2 NOMpropi3">
      <pattern>
	<pattern-item n="nompropi"/>
	<pattern-item n="nompropi"/>
	<pattern-item n="nompropi"/>
      </pattern>
      <action>
	<call-macro n="genere_nombre">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

	<out> 
	  <chunk name="nom_nom_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu> 
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr" link-to="4"/>
	      <clip pos="1" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: DET NOM1 NOM2 NOM3 -> DET NOM3 de NOM2 do NOM1">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
	<pattern-item n="nomcomu"/>
      </pattern>
      <action>
	<call-macro n="genere_nombre">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>		  
		  <in caseless="yes">
		    <clip pos="4" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="4" side="sl" part="lem"/>
		    <list n="days"/>
		  </in>
		</or>
	      </not>
	    </test>
	    <call-macro n="f_concord2">
	      <with-param pos="4"/>
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="3"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="2"/>
	    </call-macro>
	    <call-macro n="genere_nombre">
	      <with-param pos="2"/>
	    </call-macro>
	<out> 
	  <chunk name="det_nom_pr_nom_pr_det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>
	      <lit v="o"/><!--De momento ponse artigo, talvez non sexa sempre correcto, estudalo. -->
	      <lit-tag v="det.def"/>
	      <var n="genere"/>
	      <var n="nombre"/>
	    </lu>
	    <b/> 
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
	  </when>
	  <otherwise>
	    
	    <call-macro n="f_concord2">
	      <with-param pos="3"/>
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="4"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="2"/>
	    </call-macro>
	    <call-macro n="genere_nombre">
	      <with-param pos="2"/>
	    </call-macro>
	    
	    <out> 
	  <chunk name="det_nom_pr_det_nom_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>
	      <lit v="o"/><!--De momento ponse artigo, talvez non sexa sempre correcto, estudalo. -->
	      <lit-tag v="det.def"/>
	      <var n="genere"/>
	      <var n="nombre"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="3"/>
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
	  </otherwise>
	</choose>

      </action>
    </rule>

    <rule comment="REGRA: ADJ NOM1 NOM2 NOM3 -> NOM3 de NOM2 de NOM1 ADJ (professional video game design -> deseño de xogo de vídeo profesional (?)">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
	<pattern-item n="nomcomu"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro> 
	<choose>
	  <when>
	    <test>
	      <not>
		<or>		  
		  <in caseless="yes">
		    <clip pos="4" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="4" side="sl" part="lem"/>
		    <list n="days"/>
		  </in>
		</or>
	      </not>
	    </test> 
	    <call-macro n="f_concord2">
	      <with-param pos="4"/>
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="2"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="3"/>
	    </call-macro>
	<out> 
	  <chunk name="nom_pr_nom_pr_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="1"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/> 
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
	  </when>
	  <otherwise>
	    <call-macro n="f_concord2">
	      <with-param pos="3"/>
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="2"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="4"/>
	    </call-macro>
	<out> 
	  <chunk name="nom_pr_nom_adj_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/> 
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu>
	    <b pos="3"/> 
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	  </chunk>
	</out>
	  </otherwise>
	</choose>

      </action>
    </rule>

    <rule comment="REGRA: DET ADJ NOM1 NOM2 NOM3 -> DET NOM3 de NOM2 de NOM1 ADJ">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
	<pattern-item n="nomcomu"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro> 
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>		  
		  <in caseless="yes">
		    <clip pos="5" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="5" side="sl" part="lem"/>
		    <list n="days"/>
		  </in>
		</or>
	      </not>
	    </test> 
	    <call-macro n="f_concord3">
	      <with-param pos="5"/>
	      <with-param pos="2"/>
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="4"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="3"/>
	    </call-macro>
	<out> 
	  <chunk name="det_nom_pr_nom_pr_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b pos="4"/> 
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
	  </when>
	  <otherwise> 
	    <call-macro n="f_concord3">
	      <with-param pos="4"/>
	      <with-param pos="2"/>
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="5"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="3"/>
	    </call-macro>
	    <out> 
	  <chunk name="det_nom_pr_nom_adj_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="4"/> 
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
	  </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="REGRA: NOM1 NOM2 NOM3 NOM4-> NOM4 de NOM3 de NOM2 de NOM1 (video game design industry -> industria de deseño de xogo de vídeo (?)">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
	<pattern-item n="nomcomu"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="3"/>
	</call-macro>
	<out> 
	  <chunk name="nom_pr_nom_pr_nom_pr_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><clip pos="4" side="tl" part="gen"/></tag>
	      <tag><clip pos="4" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen" link-to="3"/>
	      <clip pos="4" side="tl" part="nbr" link-to="4"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="1"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/> 
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu> 
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: DET NOM1 NOM2 NOM3 NOM4-> DET NOM4 de NOM3 de NOM2 de NOM1 (the video game design industry -> a industria de deseño de xogo de vídeo (?)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
	<pattern-item n="nom"/>
	<pattern-item n="nomcomu"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>		  
		  <in caseless="yes">
		    <clip pos="5" side="sl" part="lem"/>
		    <list n="tractaments"/>
		  </in>
		  <in caseless="yes">
		    <clip pos="5" side="sl" part="lem"/>
		    <list n="days"/>
		  </in>
		</or>
	      </not>
	    </test> 
	    
	<call-macro n="f_concord2">
	  <with-param pos="5"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="4"/>
	</call-macro>
	<out> 
	  <chunk name="det_nom_pr_nom_pr_nom_pr_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="3"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="4"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/> 
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
	  </when>
	  <otherwise>	    
	    <call-macro n="f_concord2">
	      <with-param pos="4"/>
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="2"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="3"/>
	    </call-macro>
	    <call-macro n="elimina_GDND">
	      <with-param pos="5"/>
	    </call-macro>
	<out> 
	  <chunk name="det_nom_pr_nom_pr_nom_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="3"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b pos="4"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
	  </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="REGRA: NOM1 and NOM2 -> NOM1 i NOM2">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>	
	<call-macro n="elimina_GDND">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="1"/>
	</call-macro>
	<choose><!--To determine value of variables of gender-->
	  <when> 
	    <test>
	      <and>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="f"/>
		</equal>
		<equal>
		  <clip pos="3" side="tl" part="gen"/>
		  <lit-tag v="f"/>
		</equal>
	      </and>	    
	    </test>
	    <let><var n="genere"/><lit-tag v="f"/></let>
	  </when>
	  <otherwise>
	    <let><var n="genere"/><lit-tag v="m"/></let>
	  </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="nom_conj_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="genere"/></tag>
	      <tag><lit-tag v="pl"/></tag>
	    </tags>
	    <lu>  
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>  
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>  
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: NOM1 and NOM2 NOM3 (safety and security issues)">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="nom"/>
	<pattern-item n="nomcomu"/>
      </pattern>
      <action>
      <call-macro n="elimina_GDND">
	<with-param pos="1"/>
      </call-macro>
      <call-macro n="elimina_GDND">
	<with-param pos="3"/>
      </call-macro>
      <call-macro n="elimina_GDND">
	<with-param pos="4"/>
      </call-macro>
	<choose><!--To determine value of variables of gender-->
	  <when> 
	    <test>
	      <and>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="f"/>
		</equal>
		<equal>
		  <clip pos="3" side="tl" part="gen"/>
		  <lit-tag v="f"/>
		</equal>
	      </and>	    
	    </test>
	    <let><var n="genere"/><lit-tag v="f"/></let>
	  </when>
	  <otherwise>
	    <let><var n="genere"/><lit-tag v="m"/></let>
	  </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="nom_conj_nom_pr_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="genere"/></tag>
	      <tag><lit-tag v="pl"/></tag>
	    </tags>
	    <lu>  
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>  
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="3"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>

	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: ADJ NOM1 and NOM2 -> NOM1 e NOM2 ADJ ('native plants and animals')">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
      <call-macro n="elimina_GDND">
	<with-param pos="2"/>
      </call-macro>
      <call-macro n="elimina_GDND">
	<with-param pos="4"/>
      </call-macro>
      <call-macro n="f_concord2">
	<with-param pos="2"/>
	<with-param pos="1"/>
      </call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>  
	<choose><!--To determine value of variables of gender and
		    number-->
	  <when> 
	    <test>
	      <and>
		<equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="f"/>
		</equal>
		<equal>
		  <clip pos="4" side="tl" part="gen"/>
		  <lit-tag v="f"/>
		</equal>
	      </and>	    
	    </test>
	    <let><var n="genere"/><lit-tag v="f"/></let>
	  </when>
	  <otherwise>
	    <let><var n="genere"/><lit-tag v="m"/></let>
	  </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="nom_conj_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="genere"/></tag>
	      <tag><lit-tag v="pl"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>  
	    </lu>
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <!-- OUTROS SINTAGMAS NOMINAIS -->
       
           <rule comment="REGRA: NUM-NOM1-OLD -> de NUM (48-year-old - de 48 anos)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="guio"/>
	<pattern-item n="yearmonth"/>
	<pattern-item n="guio"/>
	<pattern-item n="old"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="num_yearold" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	    </tags>	
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	    <b/> 
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <lit-tag v="pl"/><!--atención! e cando é 'one-month'? - arranxar -->
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGRA: the NUM-NOM1-OLD -> O de NUM (the 48-year-old - o de 48 anos)">
      <pattern>
        <pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="guio"/>
	<pattern-item n="yearmonth"/>
	<pattern-item n="guio"/>
	<pattern-item n="old"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="num_yearold" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>	
	    <lu>
	      <lit v="o"/>
	      <lit-tag v="det.def.3.4"/>
	    </lu>
	    <b/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="2" side="tl" part="whole"/> 
	    </lu> 
	    <b/> 
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="pl"/><!--atención! e cando é 'one-month'? - arranxar -->
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    
   <rule comment="REGLA: NUM NOM1 OLD NOM3 -> NOM3 de NUM NOM1(pl) (48 year old man - home de 48 anos)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="yearmonth"/>
	<pattern-item n="old"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <or>
		<equal>
		  <clip pos="1" side="sl" part="lem"/> 
		  <lit v="1"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="lem"/> 
		  <lit v="one"/>
		</equal>
	      </or>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="nbr"/> 
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <clip pos="2" side="tl" part="nbr"/> 
	      <lit-tag v="pl"/>
	    </let>
	  </otherwise>
	</choose>
	<out> 
	  <chunk name="nom_num_yearold" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><clip pos="4" side="tl" part="gen"/></tag>
	      <tag><clip pos="4" side="tl" part="nbr"/></tag>
	    </tags>	
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen" link-to="3"/>
	      <clip pos="4" side="tl" part="nbr" link-to="4"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="1"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b pos="2"/>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGLA: NUM-NOM1-OLD NOM3 unknown -> NOM3 de NUM NOM1(pl) unknown (9-year-old xxxxxx - de 9 anos xxxxxx)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="guio"/>
	<pattern-item n="yearmonth"/>
	<pattern-item n="guio"/>
	<pattern-item n="old"/>
	<pattern-item n="descon"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro> 
	<choose>
	  <when>
	    <test>
	      <or>
		<equal>
		  <clip pos="1" side="sl" part="lem"/> 
		  <lit v="1"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="lem"/> 
		  <lit v="one"/>
		</equal>
	      </or>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="nbr"/> 
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <clip pos="3" side="tl" part="nbr"/> 
	      <lit-tag v="pl"/>
	    </let>
	  </otherwise>
	</choose> 
	<out> 
	  <chunk name="pr_num_yearold" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA.mf.sp"/></tag>
	    </tags>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	    <b/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	  <b pos="5"/>	  
	  <chunk name="unknown">
	    <tags>
	    <tag><lit-tag v="unknown"/></tag>
	  </tags>
	  <lu>
	    <clip pos="6" side="tl" part="whole"/> 
	  </lu>
	  </chunk>
	</out>
      </action>
    </rule>


  <rule comment="REGLA: DET NUM-NOM1-OLD NOM3 unknown-> DET NOM3 de NUM NOM1(pl) unknown (the 9-year-old xxxxxx - de 9 anos xxxxx)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="guio"/>
	<pattern-item n="yearmonth"/>
	<pattern-item n="guio"/>
	<pattern-item n="old"/>
	<pattern-item n="descon"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="4"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <or>
		<equal>
		  <clip pos="2" side="sl" part="lem"/> 
		  <lit v="1"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="2" side="sl" part="lem"/> 
		  <lit v="one"/>
		</equal>
	      </or>
	    </test>
	    <let>
	      <clip pos="4" side="tl" part="nbr"/> 
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <clip pos="4" side="tl" part="nbr"/> 
	      <lit-tag v="pl"/>
	    </let>
	  </otherwise>
	</choose> 
	<out> 
	  <chunk name="pr_num_yearold" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="whole"/> 
	    </lu> 
	    <b/> 
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	  <b pos="6"/>	  
	  <chunk name="unknown">
	    <tags>
	    <tag><lit-tag v="unknown"/></tag>
	  </tags>
	  <lu>
	    <clip pos="7" side="tl" part="whole"/> 
	  </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: NUM-NOM1-OLD NOM3 -> NOM3 de NUM NOM1(pl) (48-year-old man - home de 48 anos)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="guio"/>
	<pattern-item n="yearmonth"/>
	<pattern-item n="guio"/>
	<pattern-item n="old"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <or>
		<equal>
		  <clip pos="1" side="sl" part="lem"/> 
		  <lit v="1"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="lem"/> 
		  <lit v="one"/>
		</equal>
	      </or>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="nbr"/> 
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <clip pos="3" side="tl" part="nbr"/> 
	      <lit-tag v="pl"/>
	    </let>
	  </otherwise>
	</choose>
	<out> 
	  <chunk name="nom_num_yearold" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><clip pos="6" side="tl" part="gen"/></tag>
	      <tag><clip pos="6" side="tl" part="nbr"/></tag>
	    </tags>	
	    <lu> 
	      <clip pos="6" side="tl" part="lemh"/> 
	      <clip pos="6" side="tl" part="a_nom"/>
	      <clip pos="6" side="tl" part="gen" link-to="3"/>
	      <clip pos="6" side="tl" part="nbr" link-to="4"/>
	      <clip pos="6" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="5"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	    <b/> 
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <lit-tag v="pl"/><!--atención! e cando é 'one-month'? - arranxar -->
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
 
    
    <rule comment="REGLA: DET NUM-NOM1-OLD NOM3 -> DET NOM3 de NUM NOM1(pl) (the 48-year-old man - o home de 48 anos)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="guio"/>
	<pattern-item n="yearmonth"/>
	<pattern-item n="guio"/>
	<pattern-item n="old"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="4"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="7"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <or>
		<equal>
		  <clip pos="2" side="sl" part="lem"/> 
		  <lit v="1"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="lem"/> 
		  <lit v="one"/>
		</equal>
	      </or>
	    </test>
	    <let>
	      <clip pos="4" side="tl" part="nbr"/> 
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <clip pos="4" side="tl" part="nbr"/> 
	      <lit-tag v="pl"/>
	    </let>
	  </otherwise>
	</choose>
	<out> 
	  <chunk name="det_nom_num_yearold" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="7" side="tl" part="lemh"/> 
	      <clip pos="7" side="tl" part="a_nom"/>
	      <clip pos="7" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="7" side="tl" part="gen_mf"/>
	      <clip pos="7" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="7" side="tl" part="nbr_sp"/>
	      <clip pos="7" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="6"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="2" side="tl" part="whole"/> 
	    </lu> 
	    <b/> 
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


  <rule comment="REGLA: DET NUM NOM1 OLD NOM3 -> DET NOM3 de NUM NOM1(pl) (the 48 year old man - o home de 48 anos)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="yearmonth"/>
	<pattern-item n="old"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="5"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <or>
		<equal>
		  <clip pos="2" side="sl" part="lem"/> 
		  <lit v="1"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="lem"/> 
		  <lit v="one"/>
		</equal>
	      </or>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="nbr"/> 
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <clip pos="3" side="tl" part="nbr"/> 
	      <lit-tag v="pl"/>
	    </let>
	  </otherwise>
	</choose>
	<out> 
	  <chunk name="det_nom_num_yearold" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="5" side="tl" part="gen_mf"/>
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>
	      <clip pos="5" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b pos="3"/>
	    <lu>   
	      <clip pos="2" side="tl" part="whole"/> 
	    </lu> 
	    <b pos="4"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>



 <rule comment="REGLA: DET NOM ago (a week ago)"> 
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="ago"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="2"/>
	</call-macro> 
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="1"/>
	</call-macro> 
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="hai_det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SP"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	      <tag><var n="negative"/></tag> <!-- BCN per recollir si es negacio-->
	    </tags>
	    <lu>	      
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="1"/>	    
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule> 

 <rule comment="REGLA: NUM NOM ago (two weeks ago)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="ago"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="2"/>
	</call-macro> 
	<call-macro n="flexio_numerals">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="1"/>
	</call-macro> 
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="hai_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SP.NUM"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>	      
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_num"/> 
	      <clip pos="1" side="tl" part="gen"/> 
	      <clip pos="1" side="tl" part="nbr"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/> 
	      <clip pos="2" side="tl" part="gen"/>  
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>



 <rule comment="REGLA: NOM ago (years ago)"> 
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="ago"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="1"/>
	</call-macro> 
	<out>
	  <chunk name="hai_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SADV"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>	      
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="1"/>
	    <lu> 
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: COMA WHICH (noun, which noun -> o cal)"> 
      <pattern>
	<pattern-item n="coma"/>
	<pattern-item n="which"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="coma">
	    <tags>
	      <tag><clip pos="1" side="tl" part="tags"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk name="relnom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="REL"/></tag>
	      <tag><lit-tag v="nn"/></tag>
	      <tag><lit-tag v="GD"/></tag>
	      <tag><lit-tag v="ND"/></tag>
	    </tags>
	    <lu>
	      <lit v="o cal"/> 
	      <lit-tag v="rel"/>
	      <lit-tag v="nn"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule> 


    <rule comment="REGRA: PREP WHICH (to which all belong -> 'ao cal(rel.nn)' e non 'a que(rel.an.)')"> 
      <pattern>
	<pattern-item n="prep"/>
	<pattern-item n="which"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk name="relnom">
	    <tags>
	      <tag><lit-tag v="REL"/></tag>
	      <tag><lit-tag v="nn"/></tag>
	      <tag><lit-tag v="GD"/></tag>
	      <tag><lit-tag v="ND"/></tag>
	    </tags>
	    <lu>
	      <lit v="o cal"/> 
	      <lit-tag v="rel"/>
	      <lit-tag v="nn"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule> 


    <rule comment="REGRA: NUMERAL. Se pode ser 'm' ou 'f', sairá como GD. É necesario tratalo no interchunk ou postchunk.">
      <pattern>
	<pattern-item n="num"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="num" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="NUM"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_num"/> 
	      <clip pos="1" side="tl" part="gen" link-to="2"/>
	      <clip pos="1" side="tl" part="nbr" link-to="3"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: DETERMINANTE ">          
      <pattern>
	<pattern-item n="det"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="det" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="DET"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu>	
	  </chunk>
	</out>
      </action>
    </rule> 




    <rule comment="REGRA: NOME ( para colocar a cola nas multipalabras con g )">
      <pattern>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu> 
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr" link-to="4"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>



    <rule comment="REGLA: PRONOM">
      <pattern>
	<pattern-item n="prnsubj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <not>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/> 
		  <lit v="prpers"/>
		</equal>
	      </not>
	    </test>
	      <let>
		<var n="lema"/>
		<lit v="prnsubj2"/><!--lemes 'we all' etc, són subjectes però no desapareixen en el t2x. -->
	      </let>
	  </when>
	  <otherwise>	    
	      <let>
		<var n="lema"/>
		<lit v="prnsubj"/>
	      </let>
	  </otherwise>
	</choose>		  
	<out>
	  <chunk namefrom="lema" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
	      <tag><clip pos="1" side="tl" part="pers"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/>  
	      <clip pos="1" side="tl" part="a_prn"/>  
	      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/> 
	      <clip pos="1" side="tl" part="pers"/>
	      <clip pos="1" side="tl" part="gen" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule> 

    
    <rule comment="REGRA: PRONOME reflexivo">
      <pattern>
	<pattern-item n="prnref"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	  
	<out>
	  <chunk name="prnref" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SNref"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
	      <tag><clip pos="1" side="tl" part="pers"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/>  
	      <clip pos="1" side="tl" part="a_prn"/>  
	      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/> 
	      <clip pos="1" side="tl" part="pers"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    




    <rule comment="REGRA: DET NUM (para cando vai diante de descoñecidas, cando menos que concorden entre elas) - The two xxx : o(s) dous xxx">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="det_num" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu> 
		<b pos="1"/>
		<lu> 
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_num"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		</lu> 
	      </chunk>
	    </out>	
      </action>
    </rule>


    <rule comment="REGRA: PREPOSICIÓ PRONOM_OBJECTE : with him - con el" >
      <pattern>
	<pattern-item n="prep"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <or>
		<and>
		  <equal>
		    <clip pos="2" side="sl" part="pers"/> 
		    <lit-tag v="p3"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="nbr"/> 
		    <lit-tag v="pl"/>
		  </equal>
		</and>
		<and>
		  <equal>
		    <clip pos="2" side="sl" part="pers"/> 
		    <lit-tag v="p1"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="nbr"/> 
		    <lit-tag v="pl"/>
		  </equal>
		</and>
	      </or>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="m"/><!--with them : con eles (e non elas) / with us : con nós-->
	    </let>
	  </when>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="2" side="sl" part="pers"/> 
		  <lit-tag v="p3"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/> 
		  <lit-tag v="sg"/>
		</equal>
		<not>
		  <equal>
		    <clip pos="2" side="sl" part="gen"/>
		    <lit-tag v="nt"/>
		  </equal>
		</not>	
		</and>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="sl" part="gen"/>
	    </let><!--with her/him : pq a trad. do pron obj 3a sg é 'mf' en galego (lle), é necesario mudar a 'm' ou 'f' para o pronome tónico (el/ela) -->
	  </when>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="2" side="sl" part="pers"/> 
		  <lit-tag v="p1"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/> 
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit v="min"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="2" side="sl" part="pers"/> 
		  <lit-tag v="p2"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/> 
		  <lit-tag v="sp"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit v="ti"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	  </chunk>	  
	  <b pos="1"/>
	  <chunk name="probj">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><lit-tag v="tn"/></tag>
	      <tag><clip pos="2" side="tl" part="pers"/></tag>
	      <tag><clip pos="2" side="tl" part="gen"/></tag>
	      <tag><clip pos="2" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>  
	      <clip pos="2" side="tl" part="lem"/>
	      <lit-tag v="prn"/>
	      <lit-tag v="2"/>
	      <clip pos="2" side="tl" part="pers"/>
	      <clip pos="2" side="tl" part="gen" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr" link-to="5"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>



<!-- SINTAGMAS NOMINAIS CON MUDANZA DE PREP DIANTE DE INFINITIVO -->
    



    <rule comment="REGRA: DET NOM TO INF (Regra que muda a preposición TO do inglés por DE do galego para A nomes de control e para PER para os demais ('the need to work' - 'a necesidade de traballar' vs. 'a book to read' - 'un libro para ler'. Como é d'aplicación xeral codifícase vía regra e non léxica. Os nomes de control (ou equi nouns) lístanse baixo a marca equinouns. Así evítase duplicar entradas. As excepcións que poidan existir deben codificarse no léxico). 
		   EN principio a regra xustifícase para evitar que a prep TO se traduza por A.">

      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs"> <!-- para tratar a cola en verbos multipalabra -->
	  <with-param pos="4"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="controlnouns"/>
	      </in>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="lem"/>
	      <lit v ="de"/>
	    </let>
	  </when> 
	  <otherwise>
	    <let>
	      <clip pos="3" side="tl" part="lem"/>
	      <lit v ="para"/>
	    </let>
	  </otherwise>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <out>
	      <chunk name="det_nom_to_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="whole"/>
		</lu>
		<b pos="3"/>
		<mlu>
		  <lu>
		    <clip pos="4" side="tl" part="lemh"/>
		    <clip pos="4" side="tl" part="a_verb"/>
		    <clip pos="4" side="tl" part="temps" link-to="5"/>

		  </lu>
		  <lu>
		    <lit v="se"/>
		    <lit-tag v="prn.enc.ref.p3.mf.sp"/>
		    <clip pos="4" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="det_nom_to_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="whole"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/>
		  <clip pos="4" side="tl" part="a_verb"/>
		  <clip pos="4" side="tl" part="temps" link-to="5"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>

 <rule comment="REGRA: DET NOM TO INF+clitic (igual que a anterior, con inf + pronome obj= inf+clítico)">

      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs"> <!-- para tratar a cola en verbos multipalabra -->
	  <with-param pos="4"/>
	</call-macro>

	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="controlnouns"/>
	      </in>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="lem"/>
	      <lit v ="de"/>
	    </let>
	  </when> 
	  <otherwise>
	    <let>
	      <clip pos="3" side="tl" part="lem"/>
	      <lit v ="para"/>
	    </let>
	  </otherwise>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <out>
	      <chunk name="det_nom_to_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>		    
		<lu>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="whole"/>
		</lu>
		<b pos="3"/>
		<mlu>
		  <lu>
		    <clip pos="4" side="tl" part="lemh"/>
		    <clip pos="4" side="tl" part="a_verb"/>
		    <clip pos="4" side="tl" part="temps" link-to="5"/>
		  </lu>
		  <lu>
		    <lit v="se"/>
		    <lit-tag v="prn.enc.ref.p3.mf.sp"/>
		  </lu>
		  <lu>
		    <clip pos="5" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="5" side="tl" part="pers"/>
		    <clip pos="5" side="tl" part="gen"/>
		    <clip pos="5" side="tl" part="nbr"/>
		    <clip pos="4" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="det_nom_to_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>		    
		<lu>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="whole"/>
		</lu>
		<b pos="3"/>
		<mlu>
		  <lu>
		    <clip pos="4" side="tl" part="lemh"/>
		    <clip pos="4" side="tl" part="a_verb"/>
		    <clip pos="4" side="tl" part="temps" link-to="5"/>
		  </lu>
		  <lu>
		    <clip pos="5" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="5" side="tl" part="pers"/>
		    <clip pos="5" side="tl" part="gen"/>
		    <clip pos="5" side="tl" part="nbr"/>
		    <clip pos="4" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
	<call-macro n="f_bcond">
	  <with-param pos="4"/>
	  <with-param pos="5"/>
	</call-macro>
      </action>
    </rule>


    <rule comment="REGRA: NOM TO INF (Regra que muda a preposición TO do inglés por DE do galego para A nomes de control e para PER para os demais ('the need to work' - 'a necesidade de traballar' vs. 'a book to read' - 'un libro para ler'. Como é d'aplicación xeral codifícase vía regra e non léxica. Os nomes de control (ou equi nouns) lístanse baixo a marca equinouns. Así evítase duplicar entradas. As excepcións que poidan existir deben codificarse no léxico). 
		   EN principio a regra xustifícase para evitar que a prep TO se traduza por A.">

      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs"> <!-- para tratar a cola en verbos multipalabra -->
	  <with-param pos="3"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<list n="controlnouns"/>
	      </in>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit v ="de"/>
	    </let>
	  </when> 
	  <otherwise>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit v ="para"/>
	    </let>
	  </otherwise>
	</choose>


	<choose>
	  <when>
	    <test>
	      <equal>
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <out>

	      <chunk name="nom_to_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN.UNDET"/></tag>
		  <tag><clip pos="1" side="tl" part="gen"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_nom"/>
		  <clip pos="1" side="tl" part="gen" link-to="3"/>
		  <clip pos="1" side="tl" part="nbr" link-to="4"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="whole"/>
		</lu>
		<b pos="2"/>
		<mlu>
		  <lu>
		    <clip pos="3" side="tl" part="lemh"/>
		    <clip pos="3" side="tl" part="a_verb"/>
		    <clip pos="3" side="tl" part="temps" link-to="5"/>

		  </lu>
		  <lu>
		    <lit v="se"/>
		    <lit-tag v="prn.enc.ref.p3.mf.sp"/>
		    <clip pos="3" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="nom_to_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN.UNDET"/></tag>
		  <tag><clip pos="1" side="tl" part="gen"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_nom"/>
		  <clip pos="1" side="tl" part="gen" link-to="3"/>
		  <clip pos="1" side="tl" part="nbr" link-to="4"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="whole"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_verb"/>
		  <clip pos="3" side="tl" part="temps" link-to="5"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>

   <rule comment="REGRA: NOM TO INF + PRNobj">

      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs"> <!-- para tratar a cola en verbos multipalabra -->
	  <with-param pos="3"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<list n="controlnouns"/>
	      </in>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit v ="de"/>
	    </let>
	  </when> 
	  <otherwise>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit v ="para"/>
	    </let>
	  </otherwise>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <out>
	      <chunk name="nom_to_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN.UNDET"/></tag>
		  <tag><clip pos="1" side="tl" part="gen"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_nom"/>
		  <clip pos="1" side="tl" part="gen" link-to="3"/>
		  <clip pos="1" side="tl" part="nbr" link-to="4"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="whole"/>
		</lu>
		<b pos="2"/>
		<mlu>
		  <lu>
		    <clip pos="3" side="tl" part="lemh"/>
		    <clip pos="3" side="tl" part="a_verb"/>
		    <clip pos="3" side="tl" part="temps" link-to="5"/>
		  </lu>
		  <lu>
		    <lit v="se"/>
		    <lit-tag v="prn.enc.ref.p3.mf.sp"/>
		  </lu>
		  <lu>
		    <clip pos="4" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="4" side="tl" part="pers"/>
		    <clip pos="4" side="tl" part="gen"/>
		    <clip pos="4" side="tl" part="nbr"/>
		    <clip pos="3" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="nom_to_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN.UNDET"/></tag>
		  <tag><clip pos="1" side="tl" part="gen"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_nom"/>
		  <clip pos="1" side="tl" part="gen" link-to="3"/>
		  <clip pos="1" side="tl" part="nbr" link-to="4"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="whole"/>
		</lu>
		<b pos="2"/>
		<mlu>
		  <lu>
		    <clip pos="3" side="tl" part="lemh"/>
		    <clip pos="3" side="tl" part="a_verb"/>
		    <clip pos="3" side="tl" part="temps" link-to="5"/>
		  </lu>
		  <lu>
		    <clip pos="4" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="4" side="tl" part="pers"/>
		    <clip pos="4" side="tl" part="gen"/>
		    <clip pos="4" side="tl" part="nbr"/>
		    <clip pos="3" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
	<call-macro n="f_bcond">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
      </action>
    </rule>

    <rule comment="REGRA: DET ADJ NOM TO INF ((Regra que muda a preposición TO do inglés por DE do galego para A nomes de control e para PER para os demais ('the need to work' - 'a necesidade de traballar' vs. 'a book to read' - 'un libro para ler'. Como é d'aplicación xeral codifícase vía regra e non léxica. Os nomes de control (ou equi nouns) lístanse baixo a marca equinouns. Así evítase duplicar entradas. As excepcións que poidan existir deben codificarse no léxico). 
		   EN principio a regra xustifícase para evitar que a prep TO se traduza por A.">

      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="tipus_verbs"> <!-- para tratar a cola en verbos multipalabra -->
	  <with-param pos="5"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="3" side="sl" part="lem"/>
		<list n="controlnouns"/>
	      </in>
	    </test>
	    <let>
	      <clip pos="4" side="tl" part="lem"/>
	      <lit v ="de"/>
	    </let>
	  </when> 
	  <otherwise>
	    <let>
	      <clip pos="4" side="tl" part="lem"/>
	      <lit v ="para"/>
	    </let>
	  </otherwise>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <out>
	      <chunk name="det_nom_adj_to_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="3" side="tl" part="gen_mf"/>
		  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="3" side="tl" part="nbr_sp"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <var n="adjectiu1"/>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/>
		</lu>
		<b pos="4"/>
		<mlu>
		  <lu>
		    <clip pos="5" side="tl" part="lemh"/>
		    <clip pos="5" side="tl" part="a_verb"/>
		    <clip pos="5" side="tl" part="temps" link-to="5"/>

		  </lu>
		  <lu>
		    <lit v="se"/>
		    <lit-tag v="prn.enc.ref.p3.mf.sp"/>
		    <clip pos="5" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="det_nom_adj_to_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="3" side="tl" part="gen_mf"/>
		  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="3" side="tl" part="nbr_sp"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <var n="adjectiu1"/>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/>
		</lu>
		<b pos="4"/>
		<lu>
		  <clip pos="5" side="tl" part="lemh"/>
		  <clip pos="5" side="tl" part="a_verb"/>
		  <clip pos="5" side="tl" part="temps" link-to="5"/>
		  <clip pos="5" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>


   <rule comment="REGRA: DET ADJ NOM TO INF PRNobj (igual que a anterior mais con inf + clítico).">

      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="genere_nombre">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="tipus_verbs"> <!-- para tratar a cola en verbos multipalabra -->
	  <with-param pos="5"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="3" side="sl" part="lem"/>
		<list n="controlnouns"/>
	      </in>
	    </test>
	    <let>
	      <clip pos="4" side="tl" part="lem"/>
	      <lit v ="de"/>
	    </let>
	  </when> 
	  <otherwise>
	    <let>
	      <clip pos="4" side="tl" part="lem"/>
	      <lit v ="para"/>
	    </let>
	  </otherwise>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <out>
	      <chunk name="det_nom_adj_to_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>		    
		<lu>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="3" side="tl" part="gen_mf"/>
		  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="3" side="tl" part="nbr_sp"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <var n="adjectiu1"/>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/>
		</lu>
		<b pos="4"/>
		<mlu>
		  <lu>
		    <clip pos="5" side="tl" part="lemh"/>
		    <clip pos="5" side="tl" part="a_verb"/>
		    <clip pos="5" side="tl" part="temps" link-to="5"/>

		  </lu>
		  <lu>
		    <lit v="se"/>
		    <lit-tag v="prn.enc.ref.p3.mf.sp"/>
		  </lu>
		  <lu>
		    <clip pos="6" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="6" side="tl" part="pers"/>
		    <clip pos="6" side="tl" part="gen"/>
		    <clip pos="6" side="tl" part="nbr"/>
		    <clip pos="5" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="det_nom_adj_to_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="1" side="tl" part="gen_mf"/>
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="3" side="tl" part="gen_mf"/>
		  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="3" side="tl" part="nbr_sp"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <var n="adjectiu1"/>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
		  <clip pos="2" side="tl" part="gen_mf"/>
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/>
		</lu>
		<b pos="4"/>
		<mlu>
		  <lu>
		    <clip pos="5" side="tl" part="lemh"/>
		    <clip pos="5" side="tl" part="a_verb"/>
		    <clip pos="5" side="tl" part="temps" link-to="5"/>
		  </lu>
		  <lu>
		    <clip pos="6" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="6" side="tl" part="pers"/>
		    <clip pos="6" side="tl" part="gen"/>
		    <clip pos="6" side="tl" part="nbr"/>
		    <clip pos="5" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
	<call-macro n="f_bcond">
	  <with-param pos="5"/>
	  <with-param pos="6"/>
	</call-macro>
      </action>
    </rule>

<!--sintagma nominal con relativo -->


 <rule comment="REGLA: whose NOM">
      <pattern>
	<pattern-item n="relaa"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="GD"/>
		  </equal>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="mf"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="gen_qual"/>
	      <var n="gen_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_qual"/>
	      <lit-tag v="m"/>
	    </let>
	  </otherwise>	    
	</choose>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="ND"/>
		  </equal>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="sp"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="nbr_qual"/>
	      <var n="nbr_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="nbr_qual"/>
	      <lit-tag v="sg"/>
	    </let>
	  </otherwise>	    
	</choose>
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_qual" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.DET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <lit v="o"/> 
	      <lit-tag v="det.def"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="cuxo"/>
	      <clip pos="1" side="tl" part="a_rel"/>
	      <var n="gen_qual"/>
	      <var n="nbr_qual"/>
	    </lu>  
	  </chunk>
	</out>
      </action>
    </rule> 

  <rule comment="REGLA: whose DET NOM"> 
      <pattern>
	<pattern-item n="relaa"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="GD"/>
		  </equal>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="mf"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="gen_qual"/>
	      <var n="gen_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_qual"/>
	      <lit-tag v="m"/>
	    </let>
	  </otherwise>	    
	</choose>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="ND"/>
		  </equal>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="sp"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="nbr_qual"/>
	      <var n="nbr_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="nbr_qual"/>
	      <lit-tag v="sg"/>
	    </let>
	  </otherwise>	    
	</choose>
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_det_nom_qual" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.DET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <lit v="o"/> 
	      <lit-tag v="det.def"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="cuxo"/>
	      <clip pos="1" side="tl" part="a_rel"/>
	      <var n="gen_qual"/>
	      <var n="nbr_qual"/>
	    </lu>  
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGLA: whose NUM NOM"> 
      <pattern>
	<pattern-item n="relaa"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>	
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="GD"/>
		  </equal>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="mf"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="gen_qual"/>
	      <var n="gen_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_qual"/>
	      <lit-tag v="m"/>
	    </let>
	  </otherwise>	    
	</choose>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="ND"/>
		  </equal>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="sp"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="nbr_qual"/>
	      <var n="nbr_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="nbr_qual"/>
	      <lit-tag v="sg"/>
	    </let>
	  </otherwise>	    
	</choose>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro> 
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_num_nom_qual" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.DET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <lit v="o"/> 
	      <lit-tag v="det.def"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/> 
	      <clip pos="1" side="tl" part="nbr_sp"/> 
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/> 
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/> 
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/> 
	      <clip pos="3" side="tl" part="gen_mf"/> 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="cuxo"/>
	      <clip pos="1" side="tl" part="a_rel"/>
	      <var n="gen_qual"/>
	      <var n="nbr_qual"/>
	    </lu>  
	  </chunk>
	</out>
      </action>
    </rule>

 <rule comment="REGLA: whose DET NUM NOM"> 
      <pattern>
	<pattern-item n="relaa"/>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="3"/>
	</call-macro>
		<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="GD"/>
		  </equal>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="mf"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="gen_qual"/>
	      <var n="gen_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_qual"/>
	      <lit-tag v="m"/>
	    </let>
	  </otherwise>	    
	</choose>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="ND"/>
		  </equal>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="sp"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="nbr_qual"/>
	      <var n="nbr_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="nbr_qual"/>
	      <lit-tag v="sg"/>
	    </let>
	  </otherwise>	    
	</choose>
	<call-macro n="flexio_numerals">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro> 
	<call-macro n="f_concord4">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_det_num_nom_qual" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.DET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <lit v="o"/> 
	      <lit-tag v="det.def"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_num"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>  
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu>
	    <b/>
	    <lu>
	      <lit v="cuxo"/>
	      <clip pos="1" side="tl" part="a_rel"/>
	      <var n="gen_qual"/>
	      <var n="nbr_qual"/>
	    </lu>  
	  </chunk>
	</out>
      </action>
    </rule>

 <rule comment="REGLA: whose NUM NUM NOM">
      <pattern>
	<pattern-item n="relaa"/>
	<pattern-item n="num"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="million">
	  <with-param pos="3"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <and>
		<or>
		  <equal caseless="yes">
		    <clip pos="3" side="tl" part="lem"/>
		    <lit v="millón de"/>
		  </equal>
		  <equal caseless="yes">
		    <clip pos="3" side="tl" part="lem"/>
		    <lit v="un millón de"/>
		  </equal>
		</or>
		<equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="GD"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </let>
	  </when>
	  <otherwise>
	    <call-macro n="flexio_numerals">
	      <with-param pos="2"/>
	      <with-param pos="4"/>
	    </call-macro> 
	  </otherwise>
	</choose>
	<call-macro n="flexio_numerals">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="GD"/>
		  </equal>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="mf"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="gen_qual"/>
	      <var n="gen_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_qual"/>
	      <lit-tag v="m"/>
	    </let>
	  </otherwise>	    
	</choose>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="ND"/>
		  </equal>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="sp"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="nbr_qual"/>
	      <var n="nbr_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="nbr_qual"/>
	      <lit-tag v="sg"/>
	    </let>
	  </otherwise>	    
	</choose>
	<call-macro n="f_concord4">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_num_num_nom_qual" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.DET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <lit v="o"/> 
	      <lit-tag v="det.def"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/> 
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_num"/>  
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>  
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>  
	    </lu>
	    <b/>
	    <lu>
	      <lit v="cuxo"/>
	      <clip pos="1" side="tl" part="a_rel"/>
	      <var n="gen_qual"/>
	      <var n="nbr_qual"/>
	    </lu>  
	  </chunk>
	</out>
      </action>
    </rule>

 <rule comment="REGLA: whose ADJ NOM">
      <pattern>
	<pattern-item n="relaa"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="GD"/>
		  </equal>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="mf"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="gen_qual"/>
	      <var n="gen_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_qual"/>
	      <lit-tag v="m"/>
	    </let>
	  </otherwise>	    
	</choose>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="ND"/>
		  </equal>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="sp"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="nbr_qual"/>
	      <var n="nbr_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="nbr_qual"/>
	      <lit-tag v="sg"/>
	    </let>
	  </otherwise>	    
	</choose>
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro>  
	<out> 
	  <chunk name="det_nom_adj_qual" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.DET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <lit v="o"/> 
	      <lit-tag v="det.def"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/>  
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="cuxo"/>
	      <clip pos="1" side="tl" part="a_rel"/>
	      <var n="gen_qual"/>
	      <var n="nbr_qual"/>
	    </lu>  
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGLA: whose DET ADJ NOM (whose many beautiful cats)">
      <pattern>
	<pattern-item n="relaa"/>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="GD"/>
		  </equal>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="mf"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="gen_qual"/>
	      <var n="gen_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_qual"/>
	      <lit-tag v="m"/>
	    </let>
	  </otherwise>	    
	</choose>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="ND"/>
		  </equal>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="sp"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="nbr_qual"/>
	      <var n="nbr_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="nbr_qual"/>
	      <lit-tag v="sg"/>
	    </let>
	  </otherwise>	    
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>
	<out> 
	  <chunk name="det_det_nom_adj_qual" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.DET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>  
	      <lit v="o"/> 
	      <lit-tag v="det.def"/> 
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp" />
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu>
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="cuxo"/>
	      <clip pos="1" side="tl" part="a_rel"/>
	      <var n="gen_qual"/>
	      <var n="nbr_qual"/>
	    </lu>  
	  </chunk>
	</out>
      </action>
    </rule>

  <rule comment="REGLA: whose NUM ADJ NOM (whose three beautiful cats)">
      <pattern>
	<pattern-item n="relaa"/>
	<pattern-item n="num"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="GD"/>
		  </equal>
		  <equal>
		    <var n="gen_chunk"/>
		    <lit-tag v="mf"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="gen_qual"/>
	      <var n="gen_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_qual"/>
	      <lit-tag v="m"/>
	    </let>
	  </otherwise>	    
	</choose>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="ND"/>
		  </equal>
		  <equal>
		    <var n="nbr_chunk"/>
		    <lit-tag v="sp"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="nbr_qual"/>
	      <var n="nbr_chunk"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="nbr_qual"/>
	      <lit-tag v="sg"/>
	    </let>
	  </otherwise>	    
	</choose>
	<call-macro n="million">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="flexio_numerals">
	  <with-param pos="2"/>
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="3"/>
	</call-macro>
	<out> 
	  <chunk name="det_num_nom_adj_qual" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.DET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>   
	      <lit v="o"/> 
	      <lit-tag v="det.def"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="4" side="tl" part="gen_mf"/>
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu>
	    <b pos="3"/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="cuxo"/>
	      <clip pos="1" side="tl" part="a_rel"/>
	      <var n="gen_qual"/>
	      <var n="nbr_qual"/>
	    </lu>   
	  </chunk>
	</out>
      </action>
    </rule>


<!-- SINTAGMAS ADXECTIVAIS -->


    <rule comment="REGRA: ADXECTIVO + enough (strong enough :: bastante forte)">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="enough"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>    
	<choose>
	  <when>
	    <test>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	  </when>  
	  <when>
	    <test>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="f"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	  </when> 
	  <when>
	    <test>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="m"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </otherwise>
	</choose>   
	<out>   
	  <chunk name="adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><lit-tag v="ND"/></tag>
	    </tags>    	
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b/>
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <lit-tag v="2"/>
	      <lit-tag v="3"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule> 

    <rule comment="REGRA: ADXECTIVO (queda como GD e ND para o interchunk)">
      <pattern>
	<pattern-item n="adj2pos"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>  
	<choose>
	  <when>
	    <test>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	  </when>
	  <when><!--isto faise para o caso único de 'lesbian', que tería que traducirse como feminino se non hai máis información -->
	    <test>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="f"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	  </when>
	  <when>
	    <test>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="m"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </otherwise>
	</choose>    	      
	<out>   
	  <chunk name="adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><lit-tag v="ND"/></tag>
	    </tags>    	
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <lit-tag v="2"/>
	      <lit-tag v="3"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule> 



    <rule comment="REGRA: PREADV ADXECTIVO ('very difficult'; fica como GD e ND para o interchunk)">
      <pattern>
	<pattern-item n="preadv"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro> 	 
	<choose>
	  <when>
	    <test>
		<equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="2" side="tl" part="gen"/>
	    </let>
	  </when>
	  <when>
	    <test>
		<equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="f"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="2" side="tl" part="gen"/>
	    </let>
	  </when>
	  <when>
	    <test>
		<equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="m"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="2" side="tl" part="gen"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </otherwise>
	</choose>    
	<out>   
	  <chunk name="adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><lit-tag v="ND"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu>
	    <b pos="1"/> 
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="2"/>
	      <lit-tag v="3"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule> 


 <rule comment="REGRA: NPLOC-PP (London-based)">
      <pattern>
	<pattern-item n="nploc"/>
	<pattern-item n="guio"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="pp_pr_np" case="caseFirstWord">
	    <tags>	
	      <tag><lit-tag v="SA"/></tag>
	      <tag><lit-tag v="GD"/></tag>
	      <tag><lit-tag v="ND"/></tag>
	    </tags>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="2"/>
	      <lit-tag v="3"/>
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="en"/>
	      <lit-tag v="pr"/>
	    </lu> 
	    <b/>
	    <lu> 
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
</rule>


 <rule comment="REGRA: DET NPLOC-PP (a London-based)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nploc"/>
	<pattern-item n="guio"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="det" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="DET"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="2"/>
	      <lit-tag v="3"/>
	    </lu>	
	  </chunk>
	  <b pos="1"/>
	  <chunk name="pp_pr_np">
	    <tags>	
	      <tag><lit-tag v="SA"/></tag>
	      <tag><lit-tag v="GD"/></tag>
	      <tag><lit-tag v="ND"/></tag>
	    </tags>
	    <lu> 
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="2"/>
	      <lit-tag v="3"/>
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="en"/>
	      <lit-tag v="pr"/>
	    </lu> 
	    <b/>
	    <lu> 
	      <clip pos="2" side="tl" part="whole"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
</rule>


    <rule comment="REGRA: ADJ TO INF (muda a prep TO por DE; os adxectivos que non cumpran a regra deben codificarse no léxico. Fica como GD e ND para o interchunk)">
      <pattern>
	<pattern-item n="adj2"/> <!-- só se queren adjs 'reais' non PPs-->
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs"> 
	  <with-param pos="3"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </otherwise>
	</choose>   

	    <choose>
	      <when>
		<test>
		  <equal>
		    <var n="tipus_verb"/>
		    <lit-tag v="pron"/>
		  </equal>
		</test>
		<out>

		  <chunk name="adj_de_inf" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SA"/></tag>
		      <tag><var n="gen_chunk"/></tag>
		      <tag><lit-tag v="ND"/></tag>
		      <tag><lit-tag v="inf"/></tag> 
		    </tags>
		    <lu>
		      <var n="adjectiu1"/>
		      <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_adj"/>
		      <lit-tag v="2"/>
		      <lit-tag v="3"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <lit v="de"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b pos="2"/>
		    <mlu>
		      <lu>
			<clip pos="3" side="tl" part="lemh"/>
			<clip pos="3" side="tl" part="a_verb"/>
			<clip pos="3" side="tl" part="temps" link-to="4"/>
		      </lu>
		      <lu>
			<lit v="se"/>
			<lit-tag v="prn.enc.ref.p3.mf.sp"/>
			<clip pos="3" side="tl" part="lemq"/>
		      </lu>
		    </mlu>
		  </chunk>
		</out>
	      </when>
	      <otherwise>
		<out>
		  <chunk name="adj_de_inf" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SA"/></tag>
		      <tag><var n="gen_chunk"/></tag>
		      <tag><lit-tag v="ND"/></tag>
		      <tag><lit-tag v="inf"/></tag> 
		    </tags>
		    <lu>
		      <var n="adjectiu1"/>
		      <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_adj"/>
		      <lit-tag v="2"/>
		      <lit-tag v="3"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <lit v="de"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/>
		      <clip pos="3" side="tl" part="a_verb"/>
		      <clip pos="3" side="tl" part="temps" link-to="4"/>
		      <clip pos="3" side="tl" part="lemq"/>
		    </lu>
		  </chunk>
		</out>
	      </otherwise>
	    </choose>
      </action>
    </rule>


    <rule comment="REGRA: ADJ TO INF PRNobj (muda a prep TO por DE; os adxectivos que non cumpran a regra deben codificarse no léxico. Fica como GD e ND para o interchunk)">
      <pattern>
	<pattern-item n="adj2"/> <!-- só se queren adjs 'reais' non PPs-->
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs"> 
	  <with-param pos="3"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </otherwise>
	</choose>   
	<choose>
	  <when>
	    <test>
	      <equal>
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <out>

	      <chunk name="adj_de_inf_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><lit-tag v="ND"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <var n="adjectiu1"/>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_adj"/>
		  <lit-tag v="2"/>
		  <lit-tag v="3"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <lit v="de"/>
		  <lit-tag v="pr"/>
		</lu>
		<b pos="2"/>
		<mlu>
		  <lu>
		    <clip pos="3" side="tl" part="lemh"/>
		    <clip pos="3" side="tl" part="a_verb"/>
		    <clip pos="3" side="tl" part="temps" link-to="4"/>
		  </lu>
		  <lu>
		    <lit v="se"/>
		    <lit-tag v="prn.enc.ref.p3.mf.sp"/>
		  </lu>
		  <lu>
		    <clip pos="4" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="4" side="tl" part="pers"/>
		    <clip pos="4" side="tl" part="gen"/>
		    <clip pos="4" side="tl" part="nbr"/>
		    <clip pos="3" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="adj_de_inf_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><lit-tag v="ND"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <var n="adjectiu1"/>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_adj"/>
		  <lit-tag v="2"/>
		  <lit-tag v="3"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <lit v="de"/>
		  <lit-tag v="pr"/>
		</lu>
		<b pos="2"/>
		<mlu>
		  <lu>
		    <clip pos="3" side="tl" part="lemh"/>
		    <clip pos="3" side="tl" part="a_verb"/>
		    <clip pos="3" side="tl" part="temps" link-to="4"/>
		  </lu>
		  <lu>
		    <clip pos="4" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="4" side="tl" part="pers"/>
		    <clip pos="4" side="tl" part="gen"/>
		    <clip pos="4" side="tl" part="nbr"/>
		    <clip pos="3" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
	<call-macro n="f_bcond">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
      </action>
    </rule>


    <rule comment="REGRA: ADV ADJ TO INF (muda a prep TO por DE; os adxectivos que non cumpran a regra deben codificarse no léxico. Fica como GD e ND para o interchunk)">
      <pattern>
	<pattern-item n="preadv"/> 
	<pattern-item n="adj2"/> <!-- se se queren adjs 'reais' non PPs-->
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs"> <!-- para tratar a cola en verbos multipalabra -->
	  <with-param pos="4"/>
	</call-macro>		
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="2" side="tl" part="gen"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </otherwise>
	</choose>   
	<choose>
	  <when>
	    <test>
	      <equal>
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <out>

	      <chunk name="adv_adj_de_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><lit-tag v="ND"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <var n="adjectiu1"/>
		  <clip pos="2" side="tl" part="lem"/>
		  <clip pos="2" side="tl" part="a_adj"/>
		  <lit-tag v="2"/>
		  <lit-tag v="3"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <lit v="de"/>
		  <lit-tag v="pr"/>
		</lu>
		<b pos="3"/>

		<mlu>
		  <lu>
		    <clip pos="4" side="tl" part="lemh"/>
		    <clip pos="4" side="tl" part="a_verb"/>
		    <clip pos="4" side="tl" part="temps" link-to="4"/>

		  </lu>
		  <lu>
		    <lit v="se"/>
		    <lit-tag v="prn.enc.ref.p3.mf.sp"/>
		    <clip pos="4" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="adv_adj_de_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><lit-tag v="ND"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <var n="adjectiu1"/>
		  <clip pos="2" side="tl" part="lem"/>
		  <clip pos="2" side="tl" part="a_adj"/>
		  <lit-tag v="2"/>
		  <lit-tag v="3"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <lit v="de"/>
		  <lit-tag v="pr"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/>
		  <clip pos="4" side="tl" part="a_verb"/>
		  <clip pos="4" side="tl" part="temps" link-to="4"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>


   <rule comment="REGRA: ADV ADJ TO INF ENC ( muda a prep TO por DE; os adxectivos que non entren na regra deben codificarse no léxico. Fica como GD e ND para o interchunk)">
      <pattern>
	<pattern-item n="preadv"/> 
	<pattern-item n="adj2"/> <!-- se se queren adjs 'reais' non PPs-->
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs"> <!-- para tratar a cola en verbos multipalabra -->
	  <with-param pos="4"/>
	</call-macro>			
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="2" side="tl" part="gen"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </otherwise>
	</choose> 
	<choose>
	  <when>
	    <test>
	      <equal>
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <out>
	      <chunk name="adv_adj_de_inf_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><lit-tag v="ND"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <var n="adjectiu1"/>
		  <clip pos="2" side="tl" part="lem"/>
		  <clip pos="2" side="tl" part="a_adj"/>
		  <lit-tag v="2"/>
		  <lit-tag v="3"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <lit v="de"/>
		  <lit-tag v="pr"/>
		</lu>
		<b pos="3"/>
		<mlu>
		  <lu>
		    <clip pos="4" side="tl" part="lemh"/>
		    <clip pos="4" side="tl" part="a_verb"/>
		    <clip pos="4" side="tl" part="temps" link-to="4"/>
		  </lu>
		  <lu>
		    <lit v="se"/>
		    <lit-tag v="prn.enc.ref.p3.mf.sp"/>
		  </lu>
		  <lu>
		    <clip pos="5" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="5" side="tl" part="pers"/>
		    <clip pos="5" side="tl" part="gen"/>
		    <clip pos="5" side="tl" part="nbr"/>
		    <clip pos="4" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="adv_adj_de_inf_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><lit-tag v="ND"/></tag>
		  <tag><lit-tag v="inf"/></tag> 
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <var n="adjectiu1"/>
		  <clip pos="2" side="tl" part="lem"/>
		  <clip pos="2" side="tl" part="a_adj"/>
		  <lit-tag v="2"/>
		  <lit-tag v="3"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <lit v="de"/>
		  <lit-tag v="pr"/>
		</lu>
		<b pos="3"/>
		<mlu>
		  <lu>
		    <clip pos="4" side="tl" part="lemh"/>
		    <clip pos="4" side="tl" part="a_verb"/>
		    <clip pos="4" side="tl" part="temps" link-to="4"/>
		  </lu>
		  <lu>
		    <clip pos="5" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="5" side="tl" part="pers"/>
		    <clip pos="5" side="tl" part="gen"/>
		    <clip pos="5" side="tl" part="nbr"/>
		    <clip pos="4" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
	<call-macro n="f_bcond">
	  <with-param pos="4"/>
	  <with-param pos="5"/>
	</call-macro>
      </action>
    </rule>




    <!--********************************* REGRAS DE SV ***************************************************** -->
    
      
    <rule comment="REGRA: INF (para colocar a cola nas multipalabras)">
      <pattern>
	<pattern-item n="multiverbos"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <not><!-- se é un destes tres, non se envia nada-->
		<or>
		  <equal caseless="yes">	    	
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="will"/>
		  </equal>
		  <equal caseless="yes">	    	
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="shall"/>
		  </equal>
		  <equal caseless="yes">	    	
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="would"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <choose>
	      <when>
		<test>
		  <equal>	    	
		    <var n="tipus_verb"/>
		    <lit-tag v="pron"/>
		  </equal>
		</test>
		<let>
		  <var n="pronomenc"/>
		  <lit v="$ ^prpers"/>
		</let>
		<append n="pronomenc">
		  <lit-tag v="prn.enc.4.mf.5"/>
		</append>
		<let>
		  <var n="lema_SV"/>
		  <lit v="inf_enc"/>
		</let>
	      </when>
	      <otherwise>
		<let>
		  <var n="lema_SV"/>
		  <lit v="inf"/>
		</let>
		<let>
		  <var n="pronomenc"/>
		  <lit v=""/>
		</let>
	      </otherwise>
	    </choose>		  
	    <out>		  
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><clip pos="1" side="tl" part="temps"/></tag>
		  <tag><lit-tag v="PD"/></tag>
		  <tag><lit-tag v="ND"/></tag>
		</tags> 
		<lu>
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_verb"/>
		  <clip pos="1" side="tl" part="temps" link-to="3"/>
		  <var n="pronomenc"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>		
	      </chunk>
	      <b pos="1"/>
	      <chunk namefrom="lema_SV" case="caseSecondWord">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		</tags> 		
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>
		  <var n="pronomenc"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	  </when>
	</choose>
      </action>
    </rule>
    
    <rule comment="REGRA: VERB copulatiu">
      <pattern>
	<pattern-item n="copulatiu"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<!--aquí sobrescribíronse algúns valores atribuídos pola macro conj_verb1 -->
	<let>
	  <var n="lema_SV"/><!--fai que o lema do chunk siga o lema do verbo -->
	  <clip pos="1" side="sl" part="lem"/>
	</let>
	<choose>	 
	  <when> <!--para os verbos copulativos, decidiuse traducir o pasado, non como 'foi' senón como 'era'  -->
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="past"/>
	      </equal> 
	    </test>
	    <let>
	      <var n="temps_chunk"/>
	      <lit-tag v="pii"/>
	    </let>
	    <let>
	      <var n="verbfinal"/>
		<concat>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <lit-tag v="3"/>
		  <lit-tag v="4"/>
		  <lit-tag v="5"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</concat>
	    </let>
	  </when>
	</choose>
	<out><!--envíase todo tal e como ficou -->
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>	       
	      <tag><lit-tag v="Vcop"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 		
	    <lu>
	      <var n="verbfinal"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: VERB copulativo PP (o verb 'ser' do pasado acrecenta aquí a forma perifrástica">
      <pattern>
	<pattern-item n="copulatiu"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="lema_SV"/>
	  <clip pos="1" side="sl" part="lem"/>
	</let>
	<append n="lema_SV">
	  <lit v="_pp"/>
	</append>
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>	       
	      <tag><lit-tag v="Vcop"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	      <tag><lit-tag v="GD"/></tag>
	    </tags> 		
	    <lu>
	      <var n="verbfinal"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_pp"/>
	      <lit-tag v="6"/>
	      <lit-tag v="5"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>




    <rule comment="REGRA: VERB copulatiu ADV">
      <pattern>
	<pattern-item n="be"/>    
	<pattern-item n="adv_not"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="lema_SV"/><!--fai que o lema do chunk verbal siga o lema do verb (faise así con todos os copulativos) -->
	  <clip pos="1" side="sl" part="lem"/>
	</let>
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk namefrom="lema_SV">
	    <tags>	       
	      <tag><lit-tag v="Vcop"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 		
	    <lu>
	      <var n="verbfinal"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


 <rule comment="REGRA: be_sorry coma/punto">
      <pattern>
	<pattern-item n="be_sorry"/>
	<pattern-item n="comasent"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	<var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
	<concat>
	  <var n="lema_SV"/>
	  <lit v="_enc"/>	
	</concat>
	</let>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="sl" part="tags"/>
		<lit-tag v="sent"/>
	      </equal>
	    </test>
	    <let>
	      <var n="lema"/>
	      <lit v="punt"/>
	    </let>
	 </when>
	 <otherwise>
	    <let>
	      <var n="lema"/>
	      <lit v="coma"/>
	    </let>
	  </otherwise>
	</choose>
	<choose>
	 <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="inf"/>
	      </equal>
	    </test>
	    	<let>
		  <var n="lema_SV"/>
		  <lit v="inf_enc"/>
		</let>
		<let>
		  <var n="pronomenc"/>
		  <lit v=""/>
		</let>
	    <out>
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><clip pos="1" side="tl" part="temps"/></tag>
		  <tag><lit-tag v="PD"/></tag>
		  <tag><lit-tag v="ND"/></tag>
		</tags> 
		  <lu>
		    <clip pos="1" side="tl" part="lemh"/> 
		    <clip pos="1" side="tl" part="a_verb"/>
		    <clip pos="1" side="tl" part="temps" link-to="3"/>
		    <var n="pronomenc"/>
		  </lu>
		<lu>
		<lit v="prpers"/>	
		<lit-tag v="prn.enc.p3.m.sg"/>
		<clip pos="1" side="tl" part="lemq"/>
		</lu>
	       </chunk>	
	      <b pos="1"/>
	      <chunk namefrom="lema">
		<tags>
		  <tag><clip pos="2" side="tl" part="tags"/></tag>
		</tags>
		<lu>
		  <clip pos="2" side="tl" part="whole"/>
		</lu>
	      </chunk>
	    </out>
	  </when>
	<otherwise>
	    <out>
		<chunk namefrom="lema_SV" case="caseFirstWord">
		  <tags>	       
			  <tag><lit-tag v="SV"/></tag>
			  <tag><var n="tipus_verb"/></tag>
			  <tag><var n="temps_chunk"/></tag>
			  <tag><var n="pers_chunk"/></tag>
			  <tag><var n="nbr_chunk"/></tag>
		  </tags> 
		  <mlu>
		    <lu>
			    <clip pos="1" side="tl" part="lemh"/>
			    <clip pos="1" side="tl" part="a_verb"/>
			    <lit-tag v="3"/>
			    <lit-tag v="4"/>
			    <lit-tag v="5"/>
			    <var n="pronomenc"/>
		    </lu>
		    <lu>
			    <lit v="prpers"/>	
			    <lit-tag v="prn.enc.p3.m.sg"/>
			    <clip pos="1" side="tl" part="lemq"/>
		    </lu>
		  </mlu>
	      </chunk>	
	      <b pos="1"/>
	      <chunk namefrom="lema">
		<tags>
		  <tag><clip pos="2" side="tl" part="tags"/></tag>
		</tags>
		<lu>
		  <clip pos="2" side="tl" part="whole"/>
		</lu>
	      </chunk>
	    </out>
	    </otherwise>
	</choose>
      </action>
    </rule>



    <rule comment="REGRA: be sorry ADV">
      <pattern>
	<pattern-item n="be_sorry"/>    
	<pattern-item n="adv_not"/>  
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk namefrom="lema_SV">
	    <tags>	       
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 		
	    <lu>
	      <var n="verbfinal"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: be sorry ADV coma/punto">
      <pattern>
	<pattern-item n="be_sorry"/>    
	<pattern-item n="adv_not"/>  
	<pattern-item n="comasent"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="3" side="sl" part="tags"/>
		<lit-tag v="sent"/>
	      </equal>
	    </test>
	    <let>
	      <var n="lema"/>
	      <lit v="punt"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="lema"/>
	      <lit v="coma"/>
	    </let>
	  </otherwise>
	</choose>		
	    <out>
	      <b pos="1"/>
	      <chunk name="pro_verbcj" case="caseFirstWord">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags> 
		<lu>
		  <lit v="prpers"/>
		  <lit-tag v="prn.pro.p3.m.sg"/>
		</lu>
		<b/>
		<lu>
		  <var n="verbfinal"/>
		</lu>
	      </chunk>	
	      <b pos="2"/>
	      <chunk namefrom="lema">
		<tags>
		  <tag><clip pos="3" side="tl" part="tags"/></tag>
		</tags>
		<lu>
		  <clip pos="3" side="tl" part="whole"/>
		</lu>
	      </chunk>
	    </out>
      </action>
    </rule>

  <rule comment="REGRA: VERBO">
      <pattern>
	<pattern-item n="verbcj"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	 <choose>
	     <when>
		<test>
		  <equal>	    	
		    <var n="tipus_verb"/>
		    <lit-tag v="pron"/>
		  </equal>
		</test>
		  <let>
			<var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
			<concat>
			    <var n="lema_SV"/>
			    <lit v="_enc"/>	
			</concat>
		  </let>
		  <out>		  
		    <chunk namefrom="lema_SV" case="caseFirstWord">
			<tags>	       
			    <tag><lit-tag v="SV"/></tag>
			    <tag><var n="tipus_verb"/></tag>
			    <tag><var n="temps_chunk"/></tag>
			    <tag><var n="pers_chunk"/></tag>
			    <tag><var n="nbr_chunk"/></tag>
			</tags> 
			<mlu>
			  <lu>
			    <clip pos="1" side="tl" part="lemh"/>
			    <clip pos="1" side="tl" part="a_verb"/>
			    <lit-tag v="3"/>
			    <lit-tag v="4"/>
			    <lit-tag v="5"/>
			    <var n="pronomenc"/>
			  </lu>
			  <lu>
			    <lit v="se"/>
			    <lit-tag v="prn.enc.ref.p3.mf.sp"/>
			    <clip pos="1" side="tl" part="lemq"/>
			    </lu>
			  </mlu>
		    </chunk>
		  </out>
	      </when>
	      <otherwise>
		<out>
		  <chunk namefrom="lema_SV" case="caseFirstWord">
		    <tags>	       
		      <tag><lit-tag v="SV"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		      <tag><var n="temps_chunk"/></tag>
		      <tag><var n="pers_chunk"/></tag>
		      <tag><var n="nbr_chunk"/></tag>
		    </tags> 		
		    <lu>
		      <var n="verbfinal"/>
		    </lu>
		  </chunk>
		</out>
	      </otherwise>
	  </choose>
      </action>
    </rule>


    <rule comment="REGLA: VbSER + PRN(SUBJECT) are you...  es...">
      <pattern>
	<pattern-item n="verbcjser"/>
	<pattern-item n="prnobjsubj"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>		 
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="verbcj" case="caseFirstWord">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><clip pos="2" side="tl" part="pers"/></tag>
		  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <var n="verbfinal"/>
		</lu> 	
		<b pos="1"/>	
		<lu>
		  <var n="pronom"/>
		  <clip pos="2" side="tl" part="lem"/>
		  <lit-tag v="prn.subj"/>
		  <clip pos="2" side="tl" part="pers"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		</lu>
	      </chunk>
	    </out>
      </action>
    </rule>

    
    <rule comment="REGRA: VERBO+clítico: finds it-> atópao">
      <pattern>
	<pattern-item n="verbcj"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>		 
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	  <!--    <and>-->
		  <equal caseless="yes">	    	
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="can"/>
		  </equal>
<!--		  <equal caseless="yes">	    	
		    <clip pos="2" side="sl" part="gen"/>
		    <lit-tag v="nt"/>
		  </equal>
	      </and>-->
	    </test>
	    <out>
	      <chunk namefrom="lema_SV" case="caseFirstWord">
	      <tags>	       
		      <tag><lit-tag v="SV"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		      <tag><var n="temps_chunk"/></tag>
		      <tag><var n="pers_chunk"/></tag>
		      <tag><var n="nbr_chunk"/></tag>
	      </tags> 
		<lu>			
		      <clip pos="1" side="tl" part="lemh"/>
		      <clip pos="1" side="tl" part="a_verb"/>
		      <lit-tag v="3"/>
		      <lit-tag v="4"/>
		      <lit-tag v="5"/>
		      <clip pos="1" side="tl" part="lemq"/>
		</lu>
		</chunk>
	    </out>
	  </when>
	  <otherwise>	      
	      <let>
		<var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
		<concat>
			<var n="lema_SV"/>
			<lit v="_enc"/>	
		</concat>
	      </let>
	      <out>
		<chunk namefrom="lema_SV" case="caseFirstWord">
			<tags>	       
				<tag><lit-tag v="SV"/></tag>
				<tag><var n="tipus_verb"/></tag>
				<tag><var n="temps_chunk"/></tag>
				<tag><var n="pers_chunk"/></tag>
				<tag><var n="nbr_chunk"/></tag>
			</tags> 
			<mlu>
			  <lu>
				  
				  <clip pos="1" side="tl" part="lemh"/>
				  <clip pos="1" side="tl" part="a_verb"/>
				  <lit-tag v="3"/>
				  <lit-tag v="4"/>
				  <lit-tag v="5"/>
				  <var n="pronomenc"/>
			  </lu>
			  <lu>
				  <clip pos="2" side="tl" part="lem"/>
				  <lit-tag v="prn.enc"/>
				  <clip pos="2" side="tl" part="pers"/>
				  <clip pos="2" side="tl" part="gen"/>
				  <clip pos="2" side="tl" part="nbr"/>
				  <clip pos="1" side="tl" part="lemq"/>
			  </lu>
			</mlu>
		</chunk>
                <b pos="1"/>
	      </out>
	  </otherwise>
      </choose>
    </action>
</rule>



    <rule comment="REGRA: VERBO MODAL (have to, want to). Para cando aparece só ou cun verbo descoñecido">
      <pattern>
	<pattern-item n="mod"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>			 
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="passa_inf_a_pres"><!--Se o tagger erra e escolle 'inf', tratarase como se fose 'pres'-->
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="passa_pp_a_ifip"><!--se entra como 'pp', tratarase como se fose 'past' -->
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>	       
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 		
	    <lu>
	      <var n="verbfinal"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: INF (para colocar a cola nas multipalabras)">
      <pattern>
	<pattern-item n="inf"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <not><!-- se é un destes tres, non se envia nada-->
		<or>
		  <equal caseless="yes">	    	
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="will"/>
		  </equal>
		  <equal caseless="yes">	    	
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="shall"/>
		  </equal>
		  <equal caseless="yes">	    	
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="would"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <choose>
	      <when>
		<test>
		  <equal>	    	
		    <var n="tipus_verb"/>
		    <lit-tag v="pron"/>
		  </equal>
		</test>
		<let>
		  <var n="pronomenc"/>
		  <lit v="$ ^prpers"/>
		</let>
		<append n="pronomenc">
		  <lit-tag v="prn.enc.4.mf.5"/>
		</append>
		<let>
		  <var n="lema_SV"/>
		  <lit v="inf_enc"/>
		</let>
	      </when>
	      <otherwise>
		<let>
		  <var n="lema_SV"/>
		  <lit v="inf"/>
		</let>
		<let>
		  <var n="pronomenc"/>
		  <lit v=""/>
		</let>
	      </otherwise>
	    </choose>		  
	    <out>		  
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><clip pos="1" side="tl" part="temps"/></tag>
		  <tag><lit-tag v="PD"/></tag>
		  <tag><lit-tag v="ND"/></tag>
		</tags> 
		<lu>
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_verb"/>
		  <clip pos="1" side="tl" part="temps" link-to="3"/>
		  <var n="pronomenc"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	  </when>
	</choose>
      </action>
    </rule>

    <rule comment="REGRA: INF+clítico">
      <pattern>
	<pattern-item n="inf"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test><!-- se é un destes tres, non se envia nada-->
	      <not>
		<or>
		  <equal caseless="yes">	    	
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="will"/>
		  </equal>
		  <equal caseless="yes">	    	
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="shall"/>
		  </equal>
		  <equal caseless="yes">	    	
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="would"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <choose>
	      <when>
		<test>
		  <equal>	    	
		    <var n="tipus_verb"/>
		    <lit-tag v="pron"/>
		  </equal>
		</test>
		<let>
		  <var n="pronomenc"/>
		  <lit v="$ ^prpers"/>
		</let>
		<append n="pronomenc">
		  <lit-tag v="prn.enc.4.mf.5"/>
		</append>
		<let>
		  <var n="lema_SV"/>
		  <lit v="inf_enc_enc"/>
		</let>
	      </when>
	      <otherwise>
		<let>
		  <var n="lema_SV"/>
		  <lit v="inf_enc"/>
		</let>
		<let>
		  <var n="pronomenc"/>
		  <lit v=""/>
		</let>
	      </otherwise>
	    </choose>		  
	    <out>		  
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><clip pos="1" side="tl" part="temps"/></tag>
		  <tag><lit-tag v="PD"/></tag>
		  <tag><lit-tag v="ND"/></tag>
		</tags> 
	<!--	<mlu>-->
		  <lu>
		    <clip pos="1" side="tl" part="lemh"/> 
		    <clip pos="1" side="tl" part="a_verb"/>
		    <clip pos="1" side="tl" part="temps" link-to="3"/>
		    <var n="pronomenc"/>
		  </lu>
		  <lu>
		    <clip pos="2" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="2" side="tl" part="pers"/>
		    <clip pos="2" side="tl" part="gen"/>
		    <clip pos="2" side="tl" part="nbr"/>
		    <clip pos="1" side="tl" part="lemq"/>
		  </lu>
	<!--	</mlu>-->
	      </chunk>
	    </out>
	  </when> 
	</choose>
      </action>
    </rule>


    <rule comment="REGRA: TO INF (muda a prep 'a' por 'por' diante de infinitivo')">
      <pattern>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<let>				<!-- mudanza de preposición-->
	  <clip pos="1" side="tl" part="lem"/>
	  <lit v ="para"/>
	</let>
	<out>
	  <chunk name="pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	  </chunk>	  
	  <b pos="1"/>
	</out>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal caseless="yes">	    	
		    <clip pos="2" side="sl" part="lem"/>
		    <lit v="will"/>
		  </equal>
		  <equal caseless="yes">	    	
		    <clip pos="2" side="sl" part="lem"/>
		    <lit v="shall"/>
		  </equal>
		  <equal caseless="yes">	    	
		    <clip pos="2" side="sl" part="lem"/>
		    <lit v="would"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <choose>
	      <when>
		<test>
		  <equal>	    	
		    <var n="tipus_verb"/>
		    <lit-tag v="pron"/>
		  </equal>
		</test>
		<let>
		  <var n="pronomenc"/>
		  <lit v="$ ^prpers"/>
		</let>
		<append n="pronomenc">
		  <lit-tag v="prn.enc.4.mf.5"/>
		</append>
		<let>
		  <var n="lema_SV"/>
		  <lit v="inf_enc"/>
		</let>
	      </when>
	      <otherwise>
		<let>
		  <var n="lema_SV"/>
		  <lit v="inf"/>
		</let>
		<let>
		  <var n="pronomenc"/>
		  <lit v=""/>
		</let>
	      </otherwise>
	    </choose>		  
	    <out>		  
	      <chunk namefrom="lema_SV">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><lit-tag v="PD"/></tag>
		  <tag><lit-tag v="ND"/></tag>
		</tags> 
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="temps" link-to="3"/>
		  <var n="pronomenc"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	  </when>
	</choose>
      </action>
    </rule>

 <rule comment="REGRA: TO INF PRNobj (muda a prep 'a' por 'per' diante de infinitivo')">
      <pattern>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<let>				<!-- mudanza de preposición-->
	  <clip pos="1" side="tl" part="lem"/>
	  <lit v ="para"/>
	</let>
	<out>
	  <chunk name="pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	  </chunk>	  
	  <b pos="1"/>
	</out>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal caseless="yes">	    	
		    <clip pos="2" side="sl" part="lem"/>
		    <lit v="will"/>
		  </equal>
		  <equal caseless="yes">	    	
		    <clip pos="2" side="sl" part="lem"/>
		    <lit v="shall"/>
		  </equal>
		  <equal caseless="yes">	    	
		    <clip pos="2" side="sl" part="lem"/>
		    <lit v="would"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <choose>
	      <when>
		<test>
		  <equal>	    	
		    <var n="tipus_verb"/>
		    <lit-tag v="pron"/>
		  </equal>
		</test>
		<let>
		  <var n="pronomenc"/>
		  <lit v="$ ^prpers"/>
		</let>
		<append n="pronomenc">
		  <lit-tag v="prn.enc.4.mf.5"/>
		</append>
		<let>
		  <var n="lema_SV"/>
		  <lit v="inf_enc_enc"/>
		</let>
	      </when>
	      <otherwise>
		<let>
		  <var n="lema_SV"/>
		  <lit v="inf_enc"/>
		</let>
		<let>
		  <var n="pronomenc"/>
		  <lit v=""/>
		</let>
	      </otherwise>
	    </choose>		  
	    <out>		  
	      <chunk namefrom="lema_SV">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><lit-tag v="PD"/></tag>
		  <tag><lit-tag v="ND"/></tag>
		</tags> 
	<!--	<mlu> -->
		  <lu>
		    <clip pos="2" side="tl" part="lemh"/> 
		    <clip pos="2" side="tl" part="a_verb"/>
		    <clip pos="2" side="tl" part="temps" link-to="3"/>
		    <var n="pronomenc"/>
		  </lu>
		  <lu>
		    <clip pos="3" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="3" side="tl" part="pers"/>
		    <clip pos="3" side="tl" part="gen"/>
		    <clip pos="3" side="tl" part="nbr"/>
		    <clip pos="2" side="tl" part="lemq"/>
		  </lu>
	<!--	</mlu> -->
	      </chunk>
	    </out>
	  </when>
	</choose>
      </action>
    </rule>


   <rule comment="REGRA: PPRS (para colocar a cola nas multipalabras. de momento 'pprs' non se sirve para nada, copiouse a regra do xerundio para tratalo como o chunk xerundio; máis adiante debe estudarse a utilitade do pprs.)">
      <pattern>
	<pattern-item n="pprs"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>	    	
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <let><!--atención: aquí non será unha mlu senón unha lu separada, para podelo avanzar no t3x. Para iso ponse '$ ^'. En caso que non se poida avanzar, no t3x elimínase o espazo e faise unha 'mlu' -->
	      <var n="pronomenc"/>
	      <lit v="$ ^prpers"/>
	    </let>
	    <append n="pronomenc">
	      <lit-tag v="prn.enc.4.mf.5"/>
	    </append>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="ger_enc"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="ger"/>
	    </let>
	    <let>
	      <var n="pronomenc"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>	
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><lit-tag v="ger"/></tag>
	      <tag><lit-tag v="PD"/></tag> 
	      <tag><lit-tag v="ND"/></tag> 
	    </tags>  	
	    <lu>	
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="3"/>
	      <var n="pronomenc"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGRA: PPRS+clítico (ídem regra anterior PPRS)">
      <pattern>
	<pattern-item n="pprs"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>	    	
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <let><!--antención: aquí non será unha mlu senon unha lu separada, para podelo avanzar no t3x. Por iso o '$ ^'. En caso de que non sexa necesario avanzalo, no t3x elimínase o espazo e faise unha 'mlu' -->
	      <var n="pronomenc"/>
	      <lit v="$ ^prpers"/>
	    </let>
	    <append n="pronomenc">
	      <lit-tag v="prn.enc.4.mf.5"/>
	    </append>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="ger_enc_enc"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="ger_enc"/>
	    </let>
	    <let>
	      <var n="pronomenc"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><lit-tag v="ger"/></tag>
	      <tag><lit-tag v="PD"/></tag>
	      <tag><lit-tag v="ND"/></tag>
	    </tags>  
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="3"/>
	      <var n="pronomenc"/>
	    </lu>		  
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit-tag v="prn.enc"/>
	      <clip pos="2" side="tl" part="pers"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>	
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: GER (para colocar a cola nas multipalabras e o pronome dos verbos pronominais)">
      <pattern>
	<pattern-item n="ger"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>	    	
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <let><!--atención:non será mlu senón lu, para podelo avanzar no t3x. Por iso o '$ ^'. Se non, no t3x elimínase o espazo e faise unha 'mlu' -->
	      <var n="pronomenc"/>
	      <lit v="$ ^prpers"/>
	    </let>
	    <append n="pronomenc">
	      <lit-tag v="prn.enc.4.mf.5"/>
	    </append>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="ger_enc"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="ger"/>
	    </let>
	    <let>
	      <var n="pronomenc"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>	
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><lit-tag v="ger"/></tag>
	      <tag><lit-tag v="PD"/></tag> 
	      <tag><lit-tag v="ND"/></tag> 
	    </tags>  	
	    <lu>	
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="3"/>
	      <var n="pronomenc"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>



    
    <rule comment="REGRA: GER+clítico">
      <pattern>
	<pattern-item n="ger"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>	    	
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <let><!--atención:non será mlu senón lu, para podelo avanzar no t3x. Por iso o '$ ^'. Se non, no t3x elimínase o espazo e faise unha 'mlu' -->
	      <var n="pronomenc"/>
	      <lit v="$ ^prpers"/>
	    </let>
	    <append n="pronomenc">
	      <lit-tag v="prn.enc.4.mf.5"/>
	    </append>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="ger_enc_enc"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="ger_enc"/>
	    </let>
	    <let>
	      <var n="pronomenc"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><lit-tag v="ger"/></tag>
	      <tag><lit-tag v="PD"/></tag>
	      <tag><lit-tag v="ND"/></tag>
	    </tags>  
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="3"/>
	      <var n="pronomenc"/>
	    </lu>		  
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit-tag v="prn.enc"/>
	      <clip pos="2" side="tl" part="pers"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>	
	  </chunk>
	</out>
      </action>
    </rule>
     
    <rule comment="REGRA: NO GER NOM, no eating area > área de non comer">
	    <pattern>
		    <pattern-item n="no"/>
		    <pattern-item n="ger"/>
		    <pattern-item n="nom"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="2"/>
		    </call-macro>
		    <let>
			    <clip pos="2" side="tl" part="temps"/>
			    <lit-tag v="inf"/>
		    </let>
		    <out>
			    <chunk name="no_ger_nom" case="caseFirstWord">
				    <tags>	       
					    <tag><lit-tag v="SN.UNDET.no_ger_nom"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <!--<tag><clip pos="2" side="tl" part="temps"/></tag>-->
					    <tag><lit-tag v="PD"/></tag>  
					    <tag><lit-tag v="ND"/></tag>
				    </tags>
				    <lu>	
				    <get-case-from pos="1">
					    <clip pos="3" side="tl" part="whole"/> 
				    </get-case-from>
				    </lu>
				    <b/>
				    <lu>
					    <lit v="de"/>
					    <lit-tag v="pr"/>
				    </lu>
				    <b/>
				    <lu>
					    <lit v="non"/>
					    <lit-tag v="adv"/>
				    </lu>
				    <b/>
				    <lu>	
					    <clip pos="2" side="tl" part="lemh"/> 
					    <clip pos="2" side="tl" part="a_verb"/>
					    <clip pos="2" side="tl" part="temps"/>
					    <clip pos="2" side="tl" part="lemq"/>
				    </lu>
			    </chunk>
		    </out>
	    </action>
    </rule>


   <rule comment="REGRA: PREP GER ">
      <pattern>
	<pattern-item n="prep_cnjadv"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<let>
	  <clip pos="2" side="tl" part="temps"/>
	  <lit-tag v="inf"/>
	</let>
	<choose>
	  <when>
	    <test>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="before"/>
		</equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="antes de"/>
	    </let>
	  </when>
	  <when>
	    <test>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="after"/>
		</equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="despois de"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/>
	      <lit-tag v="pr"/><!--perquè per a 'before' i 'after' no envii <cnjadv> -->
	    </lu> 
	  </chunk>	  
	  <b pos="1"/>
	</out>
	<choose>
	  <when>
	    <test>
	      <equal>	    	
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>

	<!--    <let>
	      <var n="pronomenc"/>
	      <lit v="+es"/>
	    </let>
	    <append n="pronomenc">
	      <lit-tag v="prn.enc.ref.p3.mf.sp"/>
	    </append>  -->
	    <let>
	      <var n="pronomenc"/> <!--MG: això s'hauria d'afegir per a fer nou mecanisme de reflexius: no enviar mlu sinó lu, asignar pers i nbre en el t2x si cal, i en el t3x arreglar-ho (I did it without marrying - ho vaig fer sense casar-ME) pingui -->
	      <lit v="$ ^prpers"/>
	    </let>
	    <append n="pronomenc">
	      <lit-tag v="prn.enc.4.mf.5"/>
	    </append> 

	    <let>
	      <var n="lema_SV"/>
	      <lit v="inf_enc"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="inf"/>
	    </let>
	    <let>
	      <var n="pronomenc"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk namefrom="lema_SV">
	    <tags>	       
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><clip pos="2" side="tl" part="temps"/></tag>
	     <tag><lit-tag v="PD"/></tag>  
	      <tag><lit-tag v="ND"/></tag>
	    </tags> 	
	    <lu>	
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_verb"/>
	      <clip pos="2" side="tl" part="temps" link-to="3"/>
	      <var n="pronomenc"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGRA: PREP GER+clítico">
      <pattern>
	<pattern-item n="prep_cnjadv"/>
	<pattern-item n="ger"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<let>
	  <clip pos="2" side="tl" part="temps"/>
	  <lit-tag v="inf"/>
	</let>	
	<choose>
	  <when>
	    <test>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="before"/>
		</equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="antes de"/>
	    </let>
	  </when>
	  <when>
	    <test>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="after"/>
		</equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="despois de"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <lit-tag v="pr"/><!--perquè per a 'before' i 'after' no envii <cnjadv> -->
	    </lu> 
	  </chunk>	  
	  <b pos="1"/>
	</out>
	<choose>
	  <when>
	    <test>
	      <equal>	    	
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <let>
	      <var n="pronomenc"/>
	      <lit v="$ ^prpers"/>
	    </let>
	    <append n="pronomenc">
	      <lit-tag v="prn.enc.4.mf.5"/>
	    </append>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="inf_enc_enc"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="inf_enc"/>
	    </let>
	    <let>
	      <var n="pronomenc"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk namefrom="lema_SV">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><clip pos="2" side="tl" part="temps"/></tag>
	    </tags>  	
	  <!--  <mlu>-->
	      <lu>
		<clip pos="2" side="tl" part="lemh"/> 
		<clip pos="2" side="tl" part="a_verb"/>
		<clip pos="2" side="tl" part="temps" link-to="3"/>
		<var n="pronomenc"/>
	      </lu>
	      <lu>
		<clip pos="3" side="tl" part="lem"/>
		<lit-tag v="prn.enc"/>
		<clip pos="3" side="tl" part="pers"/>
		<clip pos="3" side="tl" part="gen"/>
		<clip pos="3" side="tl" part="nbr"/>
		<clip pos="2" side="tl" part="lemq"/>
	      </lu>
	  <!--  </mlu>		-->
	  </chunk>
	</out>
      </action>
    </rule>


 <rule comment="PREP HABERger PARTICIPIO (without having finished - sen acabar)">
      <pattern>
	<pattern-item n="prep_cnjadv"/>
	<pattern-item n="haveger"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<let>
	  <clip pos="2" side="tl" part="temps"/>
	  <lit-tag v="inf"/>
	</let>	
	<choose>
	  <when>
	    <test>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="before"/>
		</equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="antes de"/>
	    </let>
	  </when>
	  <when>
	    <test>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="after"/>
		</equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="despois de"/>
	    </let>
	  </when>
	</choose>
	
	<choose>
	  <when>
	    <test>
	      <equal>	    	
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <let>
	      <var n="pronomenc"/>
	      <lit v="$ ^prpers"/>
	    </let>
	    <append n="pronomenc">
	      <lit-tag v="prn.enc.4.mf.5"/>
	    </append> 
	    <let>
	      <var n="lema_SV"/>
	      <lit v="have_enc_pp"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="pronomenc"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <lit-tag v="pr"/><!--para que para 'before' e 'after' non envíe <cnjadv> -->
	    </lu> 
	  </chunk>	  
	  <b pos="1"/>
	  <chunk namefrom="have_enc_pp">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><clip pos="2" side="tl" part="temps"/></tag>
	      <tag><lit-tag v="PD"/></tag>  
	      <tag><lit-tag v="ND"/></tag>
	    </tags> 
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <clip pos="3" side="tl" part="temps" link-to="3"/>
	      <var n="pronomenc"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="PREP HABERger PARTICIPIO clítico (without having finished it - sen acabalo)">
      <pattern>
	<pattern-item n="prep_cnjadv"/>
	<pattern-item n="haveger"/>
	<pattern-item n="pp"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<let>
	  <clip pos="2" side="tl" part="temps"/>
	  <lit-tag v="inf"/>
	</let>	
	<choose>
	  <when>
	    <test>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="before"/>
		</equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="antes de"/>
	    </let>
	  </when>
	  <when>
	    <test>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="after"/>
		</equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="despois de"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>	    	
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <let>
	      <var n="pronomenc"/>
	      <lit v="$ ^prpers"/>
	    </let>
	    <append n="pronomenc">
	      <lit-tag v="prn.enc.4.mf.5"/>
	    </append> 
	    <let>
	      <var n="lema_SV"/>
	      <lit v="inf_enc_enc"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="inf_enc"/>
	    </let>
	    <let>
	      <var n="pronomenc"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>    
	      <clip pos="1" side="tl" part="lem"/> 
	      <lit-tag v="pr"/>
	    </lu> 
	  </chunk>	  
	  <b pos="1"/>
	  <chunk namefrom="lema_SV">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><clip pos="2" side="tl" part="temps"/></tag>
	      <tag><lit-tag v="PD"/></tag>  
	      <tag><lit-tag v="ND"/></tag>
	    </tags> 
	  <!--  <mlu>-->
	      <lu>   
		<clip pos="3" side="tl" part="lemh"/>
		<clip pos="3" side="tl" part="a_verb"/>
		<clip pos="3" side="tl" part="temps" link-to="3"/>
		<var n="pronomenc"/>
		<clip pos="3" side="tl" part="lemq"/> 
	      </lu> 
	      <lu>
		<clip pos="4" side="tl" part="lem"/>
		<lit-tag v="prn.enc"/>
		<clip pos="4" side="tl" part="pers"/>
		<clip pos="4" side="tl" part="gen"/>
		<clip pos="4" side="tl" part="nbr"/>
	      </lu>
	<!--    </mlu>-->
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
      </action>
    </rule>



    <rule comment="REGRA: non-GER NOM, non-eating area > área de non comer "> 
      <pattern>
	<pattern-item n="non"/>
	<pattern-item n="guio"/>
	<pattern-item n="ger"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<let>
	  <clip pos="3" side="tl" part="temps"/>
	  <lit-tag v="inf"/>
	</let>
	<out>
	  <chunk name="non_ger_nom" case="caseFirstWord">
	    <tags>	       
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><clip pos="4" side="tl" part="gen"/></tag>
	      <tag><clip pos="4" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen" link-to="4"/>
	      <clip pos="4" side="tl" part="nbr" link-to="5"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu>
	    <b/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>
	      <lit v="non"/>
	      <lit-tag v="adv"/>
	    </lu>
	    <b pos="3"/>
	    <lu>	
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_verb"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


   <rule comment="REGRA: non GER NOM, non eating area > área de non comer"> 
      <pattern>
	<pattern-item n="non"/>
	<pattern-item n="ger"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<let>
	  <clip pos="2" side="tl" part="temps"/>
	  <lit-tag v="inf"/>
	</let>
	<out>
	  <chunk name="non_ger_nom" case="caseFirstWord">
	    <tags>	       
	      <tag><lit-tag v="SN.UNDET"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><clip pos="3" side="tl" part="gen"/></tag>
	      <tag><clip pos="3" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr" link-to="5"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b/>
	    <lu>
	      <lit v="non"/>
	      <lit-tag v="adv"/>
	    </lu>
	    <b pos="2"/>
	    <lu>	
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_verb"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>



   <rule comment="REGRA: det GER NOM, no eating area > ningunha área de comer / an eating area - unha área de comer"> 
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="ger"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<let>
	  <clip pos="2" side="tl" part="temps"/>
	  <lit-tag v="inf"/>
	</let>
	<out>
	  <chunk name="det_ger_nom" case="caseFirstWord">
	    <tags>	       
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	      <tag><var n="negative"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="4"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="5"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="4"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="5"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b pos="2"/>
	    <lu>	
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_verb"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

 <rule comment="REGRA: with no GER NOM, with no eating disorders > sen desordes de comer"> 
      <pattern>
	<pattern-item n="withno"/>
	<pattern-item n="ger"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<let>
	  <clip pos="2" side="tl" part="temps"/>
	  <lit-tag v="inf"/>
	</let>
	<out>
	  <chunk name="pr_ger_nom" case="caseFirstWord">
	    <tags>	       
	      <tag><lit-tag v="SP.UNDET"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><clip pos="3" side="tl" part="gen"/></tag>
	      <tag><clip pos="3" side="tl" part="nbr"/></tag>
	      <tag><lit-tag v="negacio"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	    <b pos="1"/>
	    <lu> 
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr" link-to="5"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b pos="2"/>
	    <lu>	
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_verb"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>



   <rule comment="REGRA: no GER: no eating  > non comer"> 
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<let>
	  <clip pos="2" side="tl" part="temps"/>
	  <lit-tag v="inf"/>
	</let>
	<out> 
	  <chunk name="no_inf" case="caseFirstWord">
	    <tags>	       
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><clip pos="2" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <lit v="non"/>
	      <lit-tag v="adv"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_verb"/>
	      <clip pos="2" side="tl" part="temps"/>	
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
   </rule>
	  

 <rule comment="REGRA: ADV-GER: fast-growing > que medra/n rapidamente"> 
      <pattern>
	<pattern-item n="adv"/>
	<pattern-item n="guio"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<let>
	  <clip pos="3" side="tl" part="temps"/>
	  <lit-tag v="pri"/>
	</let>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </otherwise>
	</choose> 
	<out>
	  <chunk name="adj_ger" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><clip pos="3" side="tl" part="temps"/></tag>
	      <tag><lit-tag v="p3"/></tag> 
	      <tag><var n="gen_chunk"/></tag> 
	      <tag><lit-tag v="ND"/></tag>
	    </tags>  
	    <lu>
	      <lit v="que"/>
	      <lit-tag v="rel.an.mf.sp"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <lit-tag v="4"/>
	      <lit-tag v="6"/>	      
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
 </rule>
	    
	      
 <rule comment="REGRA: ADJ-GER: fast-growing > que medra/n rápido (o tagger escolle adj e non adv)"> 
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<let>
	  <clip pos="3" side="tl" part="temps"/>
	  <lit-tag v="pri"/>
	</let>
	<out>
	  <chunk name="adj_ger" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><clip pos="3" side="tl" part="temps"/></tag>
	      <tag><lit-tag v="p3"/></tag>  
	      <tag><lit-tag v="GD"/></tag> 
	      <tag><lit-tag v="ND"/></tag>
	    </tags>  
	    <lu>
	      <lit v="que"/>
	      <lit-tag v="rel.an.mf.sp"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <lit-tag v="4"/>
	      <lit-tag v="6"/>	      
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_adj"/>
	      <lit-tag v="5"/>
	      <lit-tag v="6"/>	      
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
 </rule>



 <rule comment="REGRA: NOM-GER: Holocaust-denying (bishop) > (bispo) que nega holocausto"> 
      <pattern>
	<pattern-item n="nomcomu"/>
	<pattern-item n="guio"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <clip pos="3" side="tl" part="temps"/>
	  <lit-tag v="pri"/>
	</let>
	<out>
	  <chunk name="nom_ger" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><clip pos="3" side="tl" part="temps"/></tag>
	      <tag><lit-tag v="p3"/></tag>  
	      <tag><lit-tag v="ND"/></tag>
	    </tags>  
	    <lu>
	      <lit v="que"/>
	      <lit-tag v="rel.an.mf.sp"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <lit-tag v="4"/>
	      <lit-tag v="5"/>	      
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
 </rule>
	    
	      
<!-- as 3 regras anteriores cun det diante, que fai que concorden co nome no t2x-->


 <rule comment="REGRA: DET ADV-GER: the fast-growing > que medra/n rápido"> 
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adv"/>
	<pattern-item n="guio"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="4"/>
	</call-macro>
	<let>
	  <clip pos="4" side="tl" part="temps"/>
	  <lit-tag v="pri"/>
	</let>
	<out>
	  <chunk name="det" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="DET"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="2"/>
	      <lit-tag v="3"/>
	    </lu>	
	  </chunk>
	  <b pos="1"/>
	  <chunk name="adv_ger">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><clip pos="4" side="tl" part="temps"/></tag>
	      <tag><lit-tag v="p3"/></tag>  
	      <tag><lit-tag v="ND"/></tag>
	    </tags>  
	    <lu>
	      <lit v="que"/>
	      <lit-tag v="rel.an.mf.sp"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_verb"/>
	      <clip pos="4" side="tl" part="temps"/>
	      <lit-tag v="4"/>
	      <lit-tag v="5"/>	      
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
 </rule>



 <rule comment="REGRA: DET ADJ-GER: the fast-growing > que medra/n rápido (o tagger escolle adj e non adv)"> 
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="4"/>
	</call-macro>
	<let>
	  <clip pos="4" side="tl" part="temps"/>
	  <lit-tag v="pri"/>
	</let>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="2" side="tl" part="gen"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </otherwise>
	</choose> 
	<out>
	  <chunk name="det" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="DET"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="2"/>
	      <lit-tag v="3"/>
	    </lu>	
	  </chunk>
	  <b pos="1"/>
	  <chunk name="adj_ger">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><clip pos="4" side="tl" part="temps"/></tag>
	      <tag><lit-tag v="p3"/></tag>
	      <tag><var n="gen_chunk"/></tag>  
	      <tag><lit-tag v="ND"/></tag>
	    </tags>  
	    <lu>
	      <lit v="que"/>
	      <lit-tag v="rel.an.mf.sp"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_verb"/>
	      <clip pos="4" side="tl" part="temps"/>
	      <lit-tag v="4"/>
	      <lit-tag v="6"/>	      
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="5"/>
	      <lit-tag v="6"/>	      
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
 </rule>


 <rule comment="REGRA: DET NOM-GER: the Holocaust-denying (bishop) > o (bispo) que nega holocausto"> 
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nomcomu"/>
	<pattern-item n="guio"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="elimina_GDND">
	  <with-param pos="2"/>
	</call-macro>
	<let>
	  <clip pos="4" side="tl" part="temps"/>
	  <lit-tag v="pri"/>
	</let>
	<out>
	  <chunk name="det" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="DET"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="2"/>
	      <lit-tag v="3"/>
	    </lu>	
	  </chunk>
	  <b pos="1"/>
	  <chunk name="nom_ger">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><clip pos="4" side="tl" part="temps"/></tag>
	      <tag><lit-tag v="p3"/></tag>  
	      <tag><lit-tag v="ND"/></tag>
	    </tags>  
	    <lu>
	      <lit v="que"/>
	      <lit-tag v="rel.an.mf.sp"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_verb"/>
	      <clip pos="4" side="tl" part="temps"/>
	      <lit-tag v="4"/>
	      <lit-tag v="5"/>	      
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
  </rule>
  
  
    <rule comment="REGRA: VERBO SUBS (living -> vivir)">
      <pattern>
	<pattern-item n="vbsubs"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>	    	
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <let>
	      <var n="pronomenc"/>
	      <lit v="$ ^prpers"/>
	    </let>
	    <append n="pronomenc">
	      <lit-tag v="prn.enc.4.mf.5"/>
	    </append>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="subs_enc"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="subs"/>
	    </let>
	    <let>
	      <var n="pronomenc"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>	
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><lit-tag v="inf"/></tag>
	      <tag><lit-tag v="PD"/></tag>  
	      <tag><lit-tag v="ND"/></tag>
	    </tags>  
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps" link-to="3"/>
	      <var n="pronomenc"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGRA: VERBO SUBS+clítico (living it -> vivilo)">
      <pattern>
	<pattern-item n="vbsubs"/> 
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>	    	
		<var n="tipus_verb"/>
		<lit-tag v="pron"/>
	      </equal>
	    </test>
	    <let>
	      <var n="pronomenc"/>
	      <lit v="$ ^prpers"/>
	    </let>
	    <append n="pronomenc">
	      <lit-tag v="prn.enc.4.mf.5"/>
	    </append>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="subs_enc_enc"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="subs_enc"/>
	    </let>
	    <let>
	      <var n="pronomenc"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>	
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><lit-tag v="inf"/></tag>
	    </tags>  
	 <!--   <mlu>-->
	      <lu>
		<clip pos="1" side="tl" part="lemh"/> 
		<clip pos="1" side="tl" part="a_verb"/>
		<clip pos="1" side="tl" part="temps" link-to="3"/>
		<var n="pronomenc"/>
	      </lu>
	      <lu>
		<clip pos="2" side="tl" part="lem"/>
		<lit-tag v="prn.enc"/>
		<clip pos="2" side="tl" part="pers"/>
		<clip pos="2" side="tl" part="gen"/>
		<clip pos="2" side="tl" part="nbr"/>
		<clip pos="1" side="tl" part="lemq"/>
	      </lu>
<!--	    </mlu>	-->
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGRA: VERBO PART. Serán GD e ND agás 'ser' e 'estar'. Habería que acrecentar o pp nas regras de adxectivo?)">
      <pattern>
	<pattern-item n="pp"/> 
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when><!--se é verbo 'ser' ou 'estar' só pode ser m sg -->
	    <test>
	      <or>
		<equal>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <lit-tag v="vbser"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="tl" part="lemh"/>
		  <lit v="estar"/><!--tb colle as multipalabras como 'estar de acordo' -->
		</equal>
	      </or>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="m"/>
	    </let>
	    <let>
	      <var n="nbr_chunk"/>
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <otherwise>	    
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	    <let>
	      <var n="nbr_chunk"/>
	      <lit-tag v="ND"/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_pp"/>
	      <lit-tag v="2"/>
	      <lit-tag v="3"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: PRNSUBJ AUX (de tempo) VERB (will like, would like) + clítico: I will like it -> Gostarame">		 
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="auxtemps"/>
		    <pattern-item n="likeloveinfpres"/>
		    <pattern-item n="probj"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="conj_verb_compost">
			    <with-param pos="2"/>
			    <with-param pos="3"/>
		    </call-macro>
		    <let>
			    <var n="lema_SV"/>
			    <concat>
				    <var n="lema_SV"/>
				    <lit v="_enc"/>	
			    </concat>
		    </let>	
		    <choose>
		    <when>
		      <test>
			<and>
			  <equal>
			    <clip pos="1" side="tl" part="pers"/>
			    <lit-tag v="p2"/>
			  </equal>
			  <equal>
			    <clip pos="1" side="tl" part="nbr"/>
			    <lit-tag v="sg"/>
			  </equal>
			</and>
		      </test>
		      <out>
			<chunk namefrom="lema_SV" case="caseFirstWord">
			    <tags>
				    <tag><lit-tag v="SV"/></tag>
				    <tag><var n="tipus_verb"/></tag>
				    <tag><var n="temps_chunk"/></tag>
			    </tags>
			    <mlu>
				<lu>
					<get-case-from pos="1"> 
						<clip pos="3" side="tl" part="lemh"/>
					</get-case-from>
					<clip pos="3" side="tl" part="a_verb"/>
					<lit-tag v="3"/>
					<clip pos="4" side="tl" part="pers"/>
					<clip pos="4" side="tl" part="nbr"/>
					<var n="pronomenc"/>
				</lu>
				<lu>
					<lit v="prpers"/>
					<lit-tag v="prn.enc"/>
					<clip pos="1" side="tl" part="pers"/>
					<lit-tag v="mf.sp"/>					
					<clip pos="3" side="tl" part="lemq"/>
				</lu>
			    </mlu>
			</chunk>
		    </out>
		    </when>
		    <otherwise>
		    <out>
			    <chunk namefrom="lema_SV" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
				    </tags>
				    <mlu>
					    <lu>
						    <get-case-from pos="1"> 
							    <clip pos="3" side="tl" part="lemh"/>
						    </get-case-from>
						    <clip pos="3" side="tl" part="a_verb"/>
						    <lit-tag v="3"/>
						    <clip pos="4" side="tl" part="pers"/>
						    <clip pos="4" side="tl" part="nbr"/>
						    <var n="pronomenc"/>
					    </lu>
					    <lu>
						    <lit v="prpers"/>
						    <lit-tag v="prn.enc"/>
						    <clip pos="1" side="tl" part="pers"/>
						    <lit-tag v="mf"/>
						    <clip pos="1" side="tl" part="nbr"/>	
						    <clip pos="3" side="tl" part="lemq"/>
					    </lu>
				    </mlu>
			    </chunk>
		    </out>
		    </otherwise>
		    </choose>		    
		  <call-macro n="f_bcond">
		    <with-param pos="3"/>
		    <with-param pos="4"/>
		  </call-macro>
	    </action>
    </rule>
    
    <rule comment="REGRA: PRNSUBJ AUX (de tempo) VERB (will like, would like) TO INF PRNObj: I will like to eat it -> Gostarame comelo">		 
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="auxtemps"/>
		    <pattern-item n="likeloveinfpres"/>
		    <pattern-item n="to"/>
		    <pattern-item n="inf"/>
		    <pattern-item n="probj"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="conj_verb_compost">
			    <with-param pos="2"/>
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="tipus_verbs"> <!-- para tratar a cola en verbos multipalabra -->
			    <with-param pos="5"/>
		    </call-macro>
		    <let>
			    <var n="lema_SV"/>
			    <concat>
				    <var n="lema_SV"/>
				    <lit v="_enc"/>	
			    </concat>
		    </let>
		    <choose>
		     <when>
		      <test>
			<and>
			  <equal>
			    <clip pos="1" side="tl" part="pers"/>
			    <lit-tag v="p2"/>
			  </equal>
			  <equal>
			    <clip pos="1" side="tl" part="nbr"/>
			    <lit-tag v="sg"/>
			  </equal>
			</and>
		      </test>
		      <out>
			<chunk namefrom="lema_SV" case="caseFirstWord">
			      <tags>
				      <tag><lit-tag v="SV"/></tag>
				      <tag><var n="tipus_verb"/></tag>
				      <tag><var n="temps_chunk"/></tag>
				      <tag><var n="pers_chunk"/></tag>
				      <tag><var n="nbr_chunk"/></tag>
			      </tags>
			      <mlu>
				      <lu>
					      <get-case-from pos="1"> 
						      <clip pos="3" side="tl" part="lemh"/>
					      </get-case-from>
					      <clip pos="3" side="tl" part="a_verb"/>
					      <lit-tag v="3"/>
					      <lit-tag v="4"/>
					      <lit-tag v="5"/>
					      <var n="pronomenc"/>
				      </lu>
				      <lu>
					      <lit v="prpers"/>
					      <lit-tag v="prn.enc"/>
					      <clip pos="1" side="tl" part="pers"/>
					      <lit-tag v="mf.sp"/>					      
					      <clip pos="3" side="tl" part="lemq"/>
				      </lu>
			      </mlu>
			      <b/>
				<mlu>
					<lu>
					      <clip pos="5" side="tl" part="lemh"/> 
					      <clip pos="5" side="tl" part="a_verb"/>
					      <lit-tag v="inf"/>			
					      <var n="pronomenc"/>
					</lu>
					<lu>
					      <clip pos="6" side="tl" part="lem"/>
					      <lit-tag v="prn.enc"/>
					      <clip pos="6" side="tl" part="pers"/>
					      <clip pos="6" side="tl" part="gen"/>
					      <clip pos="6" side="tl" part="nbr"/>
					</lu>
				</mlu>
		      </chunk>
		    </out>
		    </when>
		    <otherwise>
		    <out>
		      <chunk namefrom="lema_SV" case="caseFirstWord">
			      <tags>
				      <tag><lit-tag v="SV"/></tag>
				      <tag><var n="tipus_verb"/></tag>
				      <tag><var n="temps_chunk"/></tag>
				      <tag><var n="pers_chunk"/></tag>
				      <tag><var n="nbr_chunk"/></tag>
			      </tags>
			      <mlu>
				      <lu>
					      <get-case-from pos="1"> 
						      <clip pos="3" side="tl" part="lemh"/>
					      </get-case-from>
					      <clip pos="3" side="tl" part="a_verb"/>
					      <lit-tag v="3"/>
					      <lit-tag v="4"/>
					      <lit-tag v="5"/>
					      <var n="pronomenc"/>
				      </lu>
				      <lu>
					      <lit v="prpers"/>
					      <lit-tag v="prn.enc"/>
					      <clip pos="1" side="tl" part="pers"/>
					      <lit-tag v="mf"/>
					      <clip pos="1" side="tl" part="nbr"/>	
					      <clip pos="3" side="tl" part="lemq"/>
				      </lu>
			      </mlu>
			      <b/>
				<mlu>
					<lu>
					      <clip pos="5" side="tl" part="lemh"/> 
					      <clip pos="5" side="tl" part="a_verb"/>
					      <lit-tag v="inf"/>			
					      <var n="pronomenc"/>
					</lu>
					<lu>
					      <clip pos="6" side="tl" part="lem"/>
					      <lit-tag v="prn.enc"/>
					      <clip pos="6" side="tl" part="pers"/>
					      <clip pos="6" side="tl" part="gen"/>
					      <clip pos="6" side="tl" part="nbr"/>
					</lu>
				</mlu>
		      </chunk>
		    </out>	
		    </otherwise>
		    </choose>
		  <call-macro n="f_bcond">
		    <with-param pos="5"/>
		    <with-param pos="6"/>
		  </call-macro>
	    </action>
    </rule>
    

    <rule comment="REGRA: PRNSUBJ AUX (de tempo) VERB (will like, would like) TO INF: I will like to eat -> Gostarame comer">		 
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="auxtemps"/>
		    <pattern-item n="likeloveinfpres"/>
		    <pattern-item n="to"/>
		    <pattern-item n="inf"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="conj_verb_compost">
			    <with-param pos="2"/>
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="tipus_verbs"> <!-- para tratar a cola en verbos multipalabra -->
			    <with-param pos="5"/>
		    </call-macro>
		    <let>
			    <var n="lema_SV"/>
			    <concat>
				    <var n="lema_SV"/>
				    <lit v="_enc"/>	
			    </concat>
		    </let>
		    <choose>
		     <when>
		      <test>
			<and>
			  <equal>
			    <clip pos="1" side="tl" part="pers"/>
			    <lit-tag v="p2"/>
			  </equal>
			  <equal>
			    <clip pos="1" side="tl" part="nbr"/>
			    <lit-tag v="sg"/>
			  </equal>
			</and>
		      </test>
		      <out>
			<chunk namefrom="lema_SV" case="caseFirstWord">
			      <tags>
				      <tag><lit-tag v="SV"/></tag>
				      <tag><var n="tipus_verb"/></tag>
				      <tag><var n="temps_chunk"/></tag>
				      <tag><var n="pers_chunk"/></tag>
				      <tag><var n="nbr_chunk"/></tag>
			      </tags>
			      <mlu>
				      <lu>
					      <get-case-from pos="1"> 
						      <clip pos="3" side="tl" part="lemh"/>
					      </get-case-from>
					      <clip pos="3" side="tl" part="a_verb"/>
					      <lit-tag v="3"/>
					      <lit-tag v="4"/>
					      <lit-tag v="5"/>
					      <var n="pronomenc"/>
				      </lu>
				      <lu>
					      <lit v="prpers"/>
					      <lit-tag v="prn.enc"/>
					      <clip pos="1" side="tl" part="pers"/>
					      <lit-tag v="mf.sp"/>					      
					      <clip pos="3" side="tl" part="lemq"/>
				      </lu>
			      </mlu>
			      <b/>
			      <lu>
				      <clip pos="5" side="tl" part="whole"/>
			      </lu>
		      </chunk>
		    </out>
		    </when>
		    <otherwise>
		    <out>
		      <chunk namefrom="lema_SV" case="caseFirstWord">
			      <tags>
				      <tag><lit-tag v="SV"/></tag>
				      <tag><var n="tipus_verb"/></tag>
				      <tag><var n="temps_chunk"/></tag>
				      <tag><var n="pers_chunk"/></tag>
				      <tag><var n="nbr_chunk"/></tag>
			      </tags>
			      <mlu>
				      <lu>
					      <get-case-from pos="1"> 
						      <clip pos="3" side="tl" part="lemh"/>
					      </get-case-from>
					      <clip pos="3" side="tl" part="a_verb"/>
					      <lit-tag v="3"/>
					      <lit-tag v="4"/>
					      <lit-tag v="5"/>
					      <var n="pronomenc"/>
				      </lu>
				      <lu>
					      <lit v="prpers"/>
					      <lit-tag v="prn.enc"/>
					      <clip pos="1" side="tl" part="pers"/>
					      <lit-tag v="mf"/>
					      <clip pos="1" side="tl" part="nbr"/>	
					      <clip pos="3" side="tl" part="lemq"/>
				      </lu>
			      </mlu>
			      <b/>
			      <lu>
				      <clip pos="5" side="tl" part="whole"/>
			      </lu>
		      </chunk>
		    </out>	
		    </otherwise>
		    </choose>
		  <call-macro n="f_bcond">
		    <with-param pos="3"/>
		    <with-param pos="4"/>
		  </call-macro>
	    </action>
    </rule>
    

    <rule comment="REGRA: AUX (de temps) VERB (will come, would come)">		 
      <pattern>
	<pattern-item n="auxtemps"/>
	<pattern-item n="infpres"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>      
	    <lu>   
	      <var n="pronom"/>
	      <var n="verbfinal"/>
	    </lu> 
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
      </action>
    </rule>

 
    <rule comment="REGRA: AUX (de tempo) VERB (will come, would come) + clítico: will sing it -> cantarao">		 
      <pattern>
	<pattern-item n="auxtemps"/>
	<pattern-item n="infpres"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<let>
		<var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
		<concat>
			<var n="lema_SV"/>
			<lit v="_enc"/>	
		</concat>
	</let>	
	<out>
		<chunk namefrom="lema_SV" case="caseFirstWord">
			<tags>	       
				<tag><lit-tag v="SV"/></tag>
				<tag><var n="tipus_verb"/></tag>
				<tag><var n="temps_chunk"/></tag>
				<tag><var n="pers_chunk"/></tag>
				<tag><var n="nbr_chunk"/></tag>
			</tags> 
			<mlu>
				<lu>
					<var n="verbfinal"/>
					<var n="pronomenc"/>
				</lu>
				<lu>
					<clip pos="3" side="tl" part="lem"/>
					<lit-tag v="prn.enc"/>
					<clip pos="3" side="tl" part="pers"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
				</lu>
			</mlu>
		</chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro>
      </action>
    </rule>
    



    <rule comment="REGRA: AUX (de mode) VERB (can come, should come)">		 
      <pattern>
	<pattern-item n="auxmod"/>
	<pattern-item n="infpres"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="auxmod_inf" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>  
	    <lu>
	      <var n="pronom"/> 
	      <var n="verbfinal"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>			
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out> 
      </action>
    </rule>

    <rule comment="REGRA: AUX (de modo) VERBO (can come, should come) + clítico (she should sing it -> cantaríao)">		 
    <pattern>
	    <pattern-item n="auxmod"/>
	    <pattern-item n="infpres"/>
	    <pattern-item n="probj"/>
    </pattern>
    <action>
	    <call-macro n="firstWord">
		    <with-param pos="1"/>
	    </call-macro>	
	    <call-macro n="tipus_verbs">
		    <with-param pos="2"/>
	    </call-macro>
	    <call-macro n="conj_verb1">
		    <with-param pos="1"/>
	    </call-macro>	
	    <out>
		    <chunk name="auxmod_inf_enc" case="caseFirstWord">
			    <tags>
				    <tag><lit-tag v="SV"/></tag>
				    <tag><var n="tipus_verb"/></tag>
				    <tag><var n="temps_chunk"/></tag>
				    <tag><var n="pers_chunk"/></tag>
				    <tag><var n="nbr_chunk"/></tag>
			    </tags>  
	    <lu>
		    <var n="verbfinal"/>
	   </lu>
		    <b pos="1"/>
		<mlu>
		<lu>
			    <clip pos="2" side="tl" part="lemh"/> 
			    <clip pos="2" side="tl" part="a_verb"/>
			    <lit-tag v="inf"/>			
			    <var n="pronomenc"/>
		</lu>
		<lu>
			    <clip pos="3" side="tl" part="lem"/>
			    <lit-tag v="prn.enc"/>
			    <clip pos="3" side="tl" part="pers"/>
			    <clip pos="3" side="tl" part="gen"/>
			    <clip pos="3" side="tl" part="nbr"/>
                </lu>
		</mlu>
		    </chunk>
		   </out> 
	    </action>
    </rule>
    

    <rule comment="REGRA: DO (aux) VERBO (do come, did come -> ven, veu)">		 
      <pattern>
	<pattern-item n="do"/>
	<pattern-item n="infpres"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	    <out>
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags> 
		<lu>
		  <var n="pronom"/>
		  <var n="verbfinal"/>
		</lu>
	      </chunk>
	    </out>
	<call-macro n="f_bcond">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
      </action>
    </rule>

    <rule comment="REGRA: DO (aux) VERBO + clítico (do eat it, did eat it -> Cómeo, Comeuno)">		 
      <pattern>
	<pattern-item n="do"/>
	<pattern-item n="infpres"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<let>
		<var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
		<concat>
			<var n="lema_SV"/>
			<lit v="_enc"/>	
		</concat>
	</let>
	<out>
		<chunk namefrom="lema_SV" case="caseFirstWord">
			<tags>	       
				<tag><lit-tag v="SV"/></tag>
				<tag><var n="tipus_verb"/></tag>
				<tag><var n="temps_chunk"/></tag>
				<tag><var n="pers_chunk"/></tag>
				<tag><var n="nbr_chunk"/></tag>
			</tags> 
			<mlu>
				<lu>
					<var n="verbfinal"/>
					<var n="pronomenc"/>
				</lu>
				<lu>
					<clip pos="3" side="tl" part="lem"/>
					<lit-tag v="prn.enc"/>
					<clip pos="3" side="tl" part="pers"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>					
				</lu>
			</mlu>
		</chunk>
	</out>	
	<call-macro n="f_bcond">
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro>
      </action>
    </rule>


    <rule comment="REGRA: MODAL conxugábel + VERBO (had to come - ten/teñen que vir)">      
      <pattern>
	<pattern-item n="mod"/>
	<pattern-item n="infpres"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
<!--	<call-macro n="tipus_verbs_imp">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="pronenc">
	  <with-param pos="2"/>
	</call-macro>-->
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="passa_inf_a_pres"><!--Se o tagger erra e colle 'inf', trátase como se fose 'pres'-->
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="passa_pp_a_ifip"><!--se entra como 'pp', tratarase como se fose 'past' -->
	  <with-param pos="1"/>
	</call-macro>
	<!-- sobrescribe o nome de chunk atribuído pola macro 'conj_verb1' -->
	<let>
	  <var n="lema_SV"/>
	  <lit v="mod_inf_enc"/>
	</let>
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>   
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
		<lu>		
		  <var n="verbfinal"/> 		  
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>		  
<!-- 		  <var n="pronomenc"/> -->
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu> 
	      </chunk>
	    </out>
      </action>
    </rule>

    <rule comment="REGRA: MODAL conxugábel + VERBO + clítico (had to sing it -> tivo que cantalo)">      
      <pattern>
	<pattern-item n="mod"/>
	<pattern-item n="infpres"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	 	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="passa_inf_a_pres"><!--Se o tagger erra e colle 'inf', trátase como se fose 'pres'-->
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="passa_pp_a_ifip"><!--se entra como 'pp', tratarase como se fose 'past' -->
	  <with-param pos="1"/>
	</call-macro>
	<!-- sobrescribe o nome de chunk atribuído pola macro 'conj_verb1' -->
	<let>
		<var n="lema_SV"/>
		<lit v="mod_inf"/>
	</let>
	<out>
	  <chunk name="mod_inf_enc" case="caseFirstWord">
		  <tags>
		    <tag><lit-tag v="SV"/></tag>
		    <tag><var n="tipus_verb"/></tag>
		    <tag><var n="temps_chunk"/></tag>
		    <tag><var n="pers_chunk"/></tag>
		    <tag><var n="nbr_chunk"/></tag>
		  </tags>  
		  <lu>
		    <var n="verbfinal"/>
		  </lu>
		  <b pos="1"/>
		  <mlu>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <lit-tag v="inf"/>			
		      <var n="pronomenc"/>
		    </lu>
		    <lu>
		      <clip pos="3" side="tl" part="lem"/>
		      <lit-tag v="prn.enc"/>
		      <clip pos="3" side="tl" part="pers"/>
		      <clip pos="3" side="tl" part="gen"/>
		      <clip pos="3" side="tl" part="nbr"/>
		    </lu>
		  </mlu>
	  </chunk>
	</out>
      </action>
    </rule>
    

    <rule comment="REGRA: AUX + MODAL conxugábel + VERBO (I will have to come - Terei que vir)">      
      <pattern>
	<pattern-item n="auxnocan"/>
	<pattern-item n="modinf"/>
	<pattern-item n="infpres"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro><!-- talvez habería que desdobralo en dúas regras, unha para conj_verb1 e unha para conj_verb_compost -->	
	<choose>
	  <when>
	    <test>
	      <or>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="will"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="shall"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="would"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="do"/>
		</equal>
	      </or>
	    </test>
	    <call-macro n="conj_verb_compost">
	      <with-param pos="1"/>
	      <with-param pos="2"/>
	    </call-macro>
	    <!-- sobrescribe o nome de chunk atribuído pola macro 'conj_verb' -->	      
	    <let>
	      <var n="lema_SV"/>
	      <lit v="mod_inf"/>
	    </let>
	    <out>
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags> 
		<lu>
		  <var n="pronom"/>
		  <var n="verbfinal"/>
		</lu>	    
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>
		  <clip pos="3" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	    <call-macro n="f_bcond">
	      <with-param pos="2"/>
	      <with-param pos="3"/>
	    </call-macro>
	  </when>
	  <otherwise>	    
	    <call-macro n="conj_verb1">
	      <with-param pos="1"/>
	    </call-macro>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="auxmod_mod_inf"/>
	    </let>
	    <out>
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>      
		<lu>
		  <var n="pronom"/>
		  <var n="verbfinal"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>			
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>
		  <clip pos="3" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>
    
    <rule comment="REGRA: AUX + MODAL conxugábel + VERBO + clítico (I will have to sing it - Terei que cantalo)">
      
      <pattern>
	<pattern-item n="auxnocan"/>
	<pattern-item n="modinf"/>
	<pattern-item n="infpres"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	 	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
<!-- talvez habería que desdobralo en dúas regras, unha para conj_verb1 e unha para conj_verb_compost -->	
	<choose>
	  <when>
	    <test>
	      <or>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="will"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="shall"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="would"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="do"/>
		</equal>
	      </or>
	    </test>
	    <call-macro n="conj_verb_compost">
	      <with-param pos="1"/>
	      <with-param pos="2"/>
	    </call-macro>
	    <!-- sobrescribe o nome de chunk atribuído pola macro 'conj_verb' -->	      
	    <let>
	      <var n="lema_SV"/>
	      <lit v="mod_inf_enc"/>
	    </let>
	    <out>
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags> 
		<lu>
			<var n="verbfinal"/>
		</lu>
		<b pos="1"/>
		<mlu>
			<lu>
				<clip pos="3" side="tl" part="lemh"/> 
				<clip pos="3" side="tl" part="a_verb"/>
				<lit-tag v="inf"/>			
				<var n="pronomenc"/>
			</lu>
			<lu>
				<clip pos="4" side="tl" part="lem"/>
				<lit-tag v="prn.enc"/>
				<clip pos="4" side="tl" part="pers"/>
				<clip pos="4" side="tl" part="gen"/>
				<clip pos="4" side="tl" part="nbr"/>
			</lu>
			</mlu>
	      </chunk>
	    </out>
		  <call-macro n="f_bcond">
		    <with-param pos="3"/>
		    <with-param pos="4"/>
		  </call-macro>
	  </when>
	  <otherwise>	    
	    <call-macro n="conj_verb1">
	      <with-param pos="1"/>
	    </call-macro>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="mod_inf_enc"/>
	    </let>
	    <out>
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>      
		<lu>
			<var n="verbfinal"/>
		</lu>
		<b pos="1"/>
		<mlu>
			<lu>
				<clip pos="3" side="tl" part="lemh"/> 
				<clip pos="3" side="tl" part="a_verb"/>
				<lit-tag v="inf"/>			
				<var n="pronomenc"/>
			</lu>
			<lu>
				<clip pos="4" side="tl" part="lem"/>
				<lit-tag v="prn.enc"/>
				<clip pos="4" side="tl" part="pers"/>
				<clip pos="4" side="tl" part="gen"/>
				<clip pos="4" side="tl" part="nbr"/>
			</lu>
			</mlu>
		</chunk>
		</out>
    	  </otherwise>
	</choose>
      </action>
    </rule>
    
    <rule comment="REGRA: AUX + MODAL conxugábel + VERBO (I will have to - Terei que)">      
      <pattern>
	<pattern-item n="auxnocan"/>
	<pattern-item n="modinf"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
<!-- talvez habería que desdobralo en dúas regras, unha para conj_verb1 e unha para conj_verb_compost -->	
	<choose>
	  <when>
	    <test>
	      <or>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="will"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="shall"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="would"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="do"/>
		</equal>
	      </or>
	    </test>
	    <call-macro n="conj_verb_compost">
	      <with-param pos="1"/>
	      <with-param pos="2"/>
	    </call-macro>	 	
	    <call-macro n="tipus_verbs">
	      <with-param pos="2"/>
	    </call-macro>
	    <!-- sobrescribe o nome de chunk atribuído pola macro 'conj_verb' -->	     
	    <let>
	      <var n="lema_SV"/>
	      <lit v="mod"/>
	    </let>
	    <out>
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags> 
		<lu>
		  <var n="verbfinal"/>
		</lu>	    
	      </chunk>
	    </out>
		  <call-macro n="f_bcond">
		    <with-param pos="1"/>
		    <with-param pos="2"/>
		  </call-macro>
	  </when>
	  <otherwise>	    
	    <call-macro n="conj_verb1">
	      <with-param pos="1"/>
	    </call-macro>	 	
	    <call-macro n="tipus_verbs">
	      <with-param pos="1"/>
	    </call-macro>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="aux_mod"/>
	    </let>
	    <out>
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>      
		<lu>
		  <var n="verbfinal"/>
		</lu>	
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>			
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="HABER PARTICIPIO (have finished - acabou)">
      <pattern>
	<pattern-item n="have_aux"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="passa_inf_a_ifi">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when> 
	    <test>
	      <and>
		    <equal>
			    <clip pos="1" side="sl" part="temps"/>
			    <lit-tag v="ger"/>
		    </equal>
		    <equal>
			    <clip pos="2" side="sl" part="a_verb"/>
			    <lit-tag v="vbser"/>
		    </equal>
	      </and>
	     </test>
		  <out>
		    <chunk namefrom="lema_SV" case="caseFirstWord">
			  <tags>
				  <tag><lit-tag v="SV"/></tag>
				  <tag><var n="tipus_verb"/></tag>
			  </tags> 
			  <lu>   
				  <var n="pronom"/> 
				  <clip pos="2" side="tl" part="lemh"/>
				  <clip pos="2" side="tl" part="a_verb"/>
				  <lit-tag v="ger"/>
				  <clip pos="2" side="tl" part="lemq"/>
			  </lu> 
		    </chunk>
		  </out>
	  </when>	  	  
	 <when> 
	    <test>
	      <and>
		  <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="past"/>
		  </equal>
		<not>
		  <equal>
		      <var n="pers_chunk"/>
		      <lit-tag v="p3"/>
		  </equal>
		</not>
		  <equal>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <lit-tag v="vblex.pron"/>
		  </equal> 
		</and>
	     </test>
	      <let>
		<var n="temps_chunk"/>
		<lit-tag v="pii"/>
	      </let>
	      <let>
		<var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
		<concat>
			<var n="lema_SV"/>
			<lit v="_enc"/>	
		</concat>
	      </let>
	      <out>
		<chunk namefrom="lema_SV" case="caseFirstWord">
		      <tags>
			<tag><lit-tag v="SV"/></tag>
			<tag><var n="tipus_verb"/></tag>
			<tag><var n="temps_chunk"/></tag>
			<tag><var n="pers_chunk"/></tag>
			<tag><var n="nbr_chunk"/></tag>
		      </tags> 
		      <mlu>
			<lu>   
			  <clip pos="2" side="tl" part="lemh"/>
			  <clip pos="2" side="tl" part="a_verb"/>
			  <lit-tag v="3"/>
			  <lit-tag v="4"/>
			  <lit-tag v="5"/>
			  <var n="pronomenc"/>			      
			</lu>
			<lu>
			  <lit v="prpers"/>
			  <lit-tag v="prn.enc"/>
			  <lit-tag v="4.mf.5"/>			      
			  <clip pos="2" side="tl" part="lemq"/>
			</lu>
		      </mlu>
		</chunk>
	      </out>
	  </when>
	   <when> 
	    <test>
	      <and>
		    <equal>
			    <clip pos="1" side="sl" part="temps"/>
			    <lit-tag v="past"/>
		    </equal>
		    <equal>
			<var n="pers_chunk"/>
			<lit-tag v="p3"/>
		    </equal>
		    <equal>
			    <clip pos="2" side="tl" part="a_verb"/>
			    <lit-tag v="vblex.pron"/>
		    </equal> 
		</and>
	     </test>
	      <let>
		<var n="temps_chunk"/>
		<lit-tag v="pii"/>
	      </let>
	      <let>
		<var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
		<concat>
			<var n="lema_SV"/>
			<lit v="_enc"/>	
		</concat>
	      </let>
	      <out>
		<chunk namefrom="lema_SV" case="caseFirstWord">
		      <tags>
			<tag><lit-tag v="SV"/></tag>
			<tag><var n="tipus_verb"/></tag>
			<tag><var n="temps_chunk"/></tag>
			<tag><var n="pers_chunk"/></tag>
			<tag><var n="nbr_chunk"/></tag>
		      </tags> 
		      <mlu>
			<lu>   
			  <clip pos="2" side="tl" part="lemh"/>
			  <clip pos="2" side="tl" part="a_verb"/>
			  <lit-tag v="3"/>
			  <lit-tag v="4"/>
			  <lit-tag v="5"/>
			  <var n="pronomenc"/>			      
			</lu>
			<lu>
			  <lit v="se"/>
			  <lit-tag v="prn.enc.ref.p3.mf.sp"/>	      
			  <clip pos="2" side="tl" part="lemq"/>
			</lu>
		      </mlu>
		</chunk>
	      </out>
	  </when>
	   <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="past"/>
	      </equal> 
	    </test>
	    <let>
	      <var n="temps_chunk"/>
	      <lit-tag v="pii"/>
	    </let>
	    	<out>
		<chunk namefrom="lema_SV" case="caseFirstWord">
		  <tags>
			  <tag><lit-tag v="SV"/></tag>
			  <tag><var n="tipus_verb"/></tag>
			  <tag><var n="temps_chunk"/></tag>
			  <tag><var n="pers_chunk"/></tag>
			  <tag><var n="nbr_chunk"/></tag>
		  </tags> 
		  <lu>   
			  <var n="pronom"/> 
			  <clip pos="2" side="tl" part="lemh"/>
			  <clip pos="2" side="tl" part="a_verb"/>
			  <lit-tag v="3"/>
			  <lit-tag v="4"/>
			  <lit-tag v="5"/>
			  <clip pos="2" side="tl" part="lemq"/>
		  </lu> 
		</chunk>
	    </out>
	  </when>
	  <when> 
	    <test>
	      <and>
		<or>
		    <equal>
			    <clip pos="1" side="sl" part="temps"/>
			    <lit-tag v="pres"/>
		    </equal>
		    <equal>
			    <clip pos="1" side="sl" part="temps"/>
			    <lit-tag v="pri"/>
		    </equal> 
		 </or>
		 <not>
		    <equal>
			<var n="pers_chunk"/>
			<lit-tag v="p3"/>
		    </equal>
		 </not>
		    <equal>
			    <clip pos="2" side="tl" part="a_verb"/>
			    <lit-tag v="vblex.pron"/>
		    </equal> 
		</and>
	     </test>
	      <let>
		<var n="temps_chunk"/>
		<lit-tag v="ifi"/>
	      </let>
	      <let>
		<var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
		<concat>
			<var n="lema_SV"/>
			<lit v="_enc"/>	
		</concat>
	      </let>
	      <out>
		<chunk namefrom="lema_SV" case="caseFirstWord">
		      <tags>
			<tag><lit-tag v="SV"/></tag>
			<tag><var n="tipus_verb"/></tag>
			<tag><var n="temps_chunk"/></tag>
			<tag><var n="pers_chunk"/></tag>
			<tag><var n="nbr_chunk"/></tag>
		      </tags> 
		      <mlu>
			<lu>   
			  <clip pos="2" side="tl" part="lemh"/>
			  <clip pos="2" side="tl" part="a_verb"/>
			  <lit-tag v="3"/>
			  <lit-tag v="4"/>
			  <lit-tag v="5"/>
			  <var n="pronomenc"/>			      
			</lu>
			<lu>
			  <lit v="prpers"/>
			  <lit-tag v="prn.enc"/>
			  <lit-tag v="4.mf.5"/>			      
			  <clip pos="2" side="tl" part="lemq"/>
			</lu>
		      </mlu>
		</chunk>
	      </out>
	  </when>
	  <when> 
	    <test>
	      <and>
		<or>
		    <equal>
			    <clip pos="1" side="sl" part="temps"/>
			    <lit-tag v="pres"/>
		    </equal>
		    <equal>
			    <clip pos="1" side="sl" part="temps"/>
			    <lit-tag v="pri"/>
		    </equal> 
		 </or>
		    <equal>
			<var n="pers_chunk"/>
			<lit-tag v="p3"/>
		    </equal>
		    <equal>
			    <clip pos="2" side="tl" part="a_verb"/>
			    <lit-tag v="vblex.pron"/>
		    </equal> 
		</and>
	     </test>
	      <let>
		<var n="temps_chunk"/>
		<lit-tag v="ifi"/>
	      </let>
	      <let>
		<var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
		<concat>
			<var n="lema_SV"/>
			<lit v="_enc"/>	
		</concat>
	      </let>
	      <out>
		<chunk namefrom="lema_SV" case="caseFirstWord">
		      <tags>
			<tag><lit-tag v="SV"/></tag>
			<tag><var n="tipus_verb"/></tag>
			<tag><var n="temps_chunk"/></tag>
			<tag><var n="pers_chunk"/></tag>
			<tag><var n="nbr_chunk"/></tag>
		      </tags> 
		      <mlu>
			<lu>   
			  <clip pos="2" side="tl" part="lemh"/>
			  <clip pos="2" side="tl" part="a_verb"/>
			  <lit-tag v="3"/>
			  <lit-tag v="4"/>
			  <lit-tag v="5"/>
			  <var n="pronomenc"/>			      
			</lu>
			<lu>
			  <lit v="se"/>
			  <lit-tag v="prn.enc.ref.p3.mf.sp"/>	      
			  <clip pos="2" side="tl" part="lemq"/>
			</lu>
		      </mlu>
		</chunk>
	      </out>
	  </when>
	  <when> 
	    <test>
		<or>
		    <equal>
			    <clip pos="1" side="sl" part="temps"/>
			    <lit-tag v="pres"/>
		    </equal>
		    <equal>
			    <clip pos="1" side="sl" part="temps"/>
			    <lit-tag v="pri"/>
		    </equal> 
		 </or>
	     </test>
		  <let>
			  <var n="temps_chunk"/>
			  <lit-tag v="ifi"/>
		  </let>
		  <out>
		    <chunk namefrom="lema_SV" case="caseFirstWord">
			  <tags>
				  <tag><lit-tag v="SV"/></tag>
				  <tag><var n="tipus_verb"/></tag>
				  <tag><var n="temps_chunk"/></tag>
				  <tag><var n="pers_chunk"/></tag>
				  <tag><var n="nbr_chunk"/></tag>
			  </tags> 
			  <lu>   
				  <var n="pronom"/> 
				  <clip pos="2" side="tl" part="lemh"/>
				  <clip pos="2" side="tl" part="a_verb"/>
				  <lit-tag v="3"/>
				  <lit-tag v="4"/>
				  <lit-tag v="5"/>
				  <clip pos="2" side="tl" part="lemq"/>
			  </lu> 
		    </chunk>
		  </out>
	  </when>
	 <!-- <when> 
	    <test>
	      <and>
		    <equal>
			    <clip pos="1" side="sl" part="temps"/>
			    <lit-tag v="ger"/>
		    </equal>
		    <equal>
			    <clip pos="2" side="tl" part="a_verb"/>
			    <lit-tag v="vblex.pron"/>
		    </equal> 
		    <not>
		      <equal>
			  <var n="pers_chunk"/>
			  <lit-tag v="p3"/>
		      </equal>
		    </not>
	      </and>
	     </test>
	    <let>
	      <var n="pronomenc"/>
	      <lit v="$ ^prpers"/>
	    </let>
	    <append n="pronomenc">
	      <lit-tag v="prn.enc.4.mf.5"/>
	    </append>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="ger"/>
	    </let>
		<out>
		  <chunk namefrom="lema_SV" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		      <tag><lit-tag v="ger"/></tag>
		      <tag><lit-tag v="PD"/></tag> 
		      <tag><lit-tag v="ND"/></tag> 
		    </tags>
		      <lu>   
			<clip pos="2" side="tl" part="lemh"/> 
			<clip pos="2" side="tl" part="a_verb"/>
			<lit-tag v="3"/>
			<var n="pronomenc"/>			      
			<clip pos="2" side="tl" part="lemq"/> 
		      </lu>
		  </chunk>
		</out>
	  </when>	
	  <when> 
	    <test>
	      <and>
		    <equal>
			    <clip pos="1" side="sl" part="temps"/>
			    <lit-tag v="ger"/>
		    </equal>
		    <equal>
			    <clip pos="2" side="tl" part="a_verb"/>
			    <lit-tag v="vblex.pron"/>
		    </equal> 
		    <equal>
			<var n="pers_chunk"/>
			<lit-tag v="p3"/>
		    </equal>
	      </and>
	     </test>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="ger"/>
	    </let>
		<out>
		  <chunk namefrom="lema_SV" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		      <tag><lit-tag v="ger"/></tag>
		      <tag><lit-tag v="PD"/></tag> 
		      <tag><lit-tag v="ND"/></tag> 
		    </tags>  
		    <mlu>
		      <lu>   
			<clip pos="2" side="tl" part="lemh"/> 
			<clip pos="2" side="tl" part="a_verb"/>
			<lit-tag v="3"/>
			<var n="pronomenc"/>	
		      </lu>
		      <lu>
			<lit v="se"/>
			<lit-tag v="prn.enc.ref.p3.mf.sp"/>	      
			<clip pos="2" side="tl" part="lemq"/>
		      </lu>
		    </mlu>
		  </chunk>
		</out>
	  </when>-->
	  <when> 
	    <test>
		    <equal>
			    <clip pos="1" side="sl" part="temps"/>
			    <lit-tag v="ger"/>
		    </equal>
	     </test>
		  <out>
		    <chunk namefrom="lema_SV" case="caseFirstWord">
		      <tags>
			<tag><lit-tag v="SV"/></tag>
			<tag><var n="tipus_verb"/></tag>
			<tag><lit-tag v="ger"/></tag>
			<tag><lit-tag v="PD"/></tag> 
			<tag><lit-tag v="ND"/></tag> 
		      </tags>  	
		      <lu>	
			<clip pos="2" side="tl" part="lemh"/> 
			<clip pos="2" side="tl" part="a_verb"/>
			<lit-tag v="3"/>
			<var n="pronomenc"/>
			<clip pos="2" side="tl" part="lemq"/>
		      </lu>
		    </chunk>
		  </out>
	  </when>	
	  <otherwise>
		  <out>
		    <chunk namefrom="lema_SV" case="caseFirstWord">
			  <tags>
				  <tag><lit-tag v="SV"/></tag>
				  <tag><var n="tipus_verb"/></tag>
				  <tag><var n="temps_chunk"/></tag>
				  <tag><var n="pers_chunk"/></tag>
				  <tag><var n="nbr_chunk"/></tag>
			  </tags> 
			  <lu>   
				  <var n="pronom"/> 
				  <clip pos="2" side="tl" part="lemh"/>
				  <clip pos="2" side="tl" part="a_verb"/>
				  <lit-tag v="3"/>
				  <lit-tag v="4"/>
				  <lit-tag v="5"/>
				  <clip pos="2" side="tl" part="lemq"/>
			  </lu> 
		    </chunk>
		  </out>
	  </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="HABER PARTICIPIO clítico (have finished it - acabouno)">
      <pattern>
	<pattern-item n="have_aux_inf"/><!-- fai falta unha para have_aux_ger pola diferente colocación do enclítico e talvez tamén separalo na regra anterior -->
	<pattern-item n="pp"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="passa_inf_a_ifi">
	  <with-param pos="1"/>
	</call-macro>
	<choose>	 
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="past"/>
	      </equal> 
	    </test>
	    <let>
	      <var n="temps_chunk"/>
	      <lit-tag v="pii"/>
	    </let>	
	  </when>
	  <when> 
	      <test>
		  <or>
		    <equal>
			    <clip pos="1" side="sl" part="temps"/>
			    <lit-tag v="pres"/>
		    </equal>
		    <equal>
			    <clip pos="1" side="sl" part="temps"/>
			    <lit-tag v="pri"/>
		    </equal> 
		  </or>
	      </test>
	      <let>
		      <var n="temps_chunk"/>
		      <lit-tag v="ifi"/>
	      </let>		  
	  </when>	
	</choose>
	<let>
	  <var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
	  <concat>
		  <var n="lema_SV"/>
		  <lit v="_enc"/>	
	  </concat>
	</let>
	<choose>
	  <when>
	     <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="ger"/>
	      </equal> 
	    </test>
	    <out>
	    <chunk name="verbcj_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags> 
		<mlu>
		<lu>
		    <var n="pronom"/> 
		    <clip pos="2" side="tl" part="lemh"/>
		    <clip pos="2" side="tl" part="a_verb"/>
		    <lit-tag v="3"/>
		    <var n="pronomenc"/>	
		</lu>
		<lu>
		    <clip pos="3" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="3" side="tl" part="pers"/>
		    <clip pos="3" side="tl" part="gen"/>
		    <clip pos="3" side="tl" part="nbr"/>
		    <clip pos="2" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </when>	  
	  <otherwise>
	   <out>
	    <chunk name="verbcj_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags> 
		<mlu>
		<lu>
		    <var n="pronom"/> 
		    <clip pos="2" side="tl" part="lemh"/>
		    <clip pos="2" side="tl" part="a_verb"/>
		    <lit-tag v="3"/>
		    <lit-tag v="4"/>
		    <lit-tag v="5"/>
		    <var n="pronomenc"/>	
		</lu>
		<lu>
		    <clip pos="3" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="3" side="tl" part="pers"/>
		    <clip pos="3" side="tl" part="gen"/>
		    <clip pos="3" side="tl" part="nbr"/>
		    <clip pos="2" side="tl" part="lemq"/>
		  </lu>
		</mlu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>    


    <rule comment="HABER PARTICIPIOcontrolverb TO INF ">
      <pattern>
	<pattern-item n="have_aux"/>
	<pattern-item n="controlverbpp"/>
        <pattern-item n="to"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="4"/>
	</call-macro>		
	<choose>
	  <when>
	    <test>
	      <equal>
		  <clip pos="2" side="sl" part="lem"/>
		  <lit v="try"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit v="tentar"/>
	    </let>
	  </when>
	</choose>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="passa_inf_a_ifi">
	  <with-param pos="1"/>
	</call-macro>
	<choose>	 
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="past"/>
	      </equal> 
	    </test>
	    <let>
	      <var n="temps_chunk"/>
	      <lit-tag v="pii"/>
	    </let>
	    </when>
	    <when> 
		    <test>
			    <or>
				    <equal>
					    <clip pos="1" side="sl" part="temps"/>
					    <lit-tag v="pres"/>
				    </equal>
				    <equal>
					    <clip pos="1" side="sl" part="temps"/>
					    <lit-tag v="pri"/>
				    </equal> 
			    </or>
		    </test>
		    <let>
			    <var n="temps_chunk"/>
			    <lit-tag v="ifi"/>
		    </let>
		    
	  </when>
	</choose>
	<out>
	<chunk name="verbcj_inf" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <lu>   
		    <clip pos="2" side="tl" part="lemh"/>
		    <clip pos="2" side="tl" part="a_verb"/>
		    <lit-tag v="3"/>
		    <lit-tag v="4"/>
		    <lit-tag v="5"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: VERBOcontrol + to + INF ('try/need/... to do this -> tentar/necesitar/ facer'">
      <pattern>
	<pattern-item n="controlverb"/>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>   
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="3"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="try"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="tentar"/>
	    </let>
	  </when>
	</choose>		
	<choose>
	  <when>
	    <test>
	      <equal>
		  <clip pos="1" side="sl" part="temps"/>
		  <lit-tag v="ger"/>
	      </equal>
	    </test>
	    	<out>
		  <chunk name="verbcj_inf" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		      <tag><var n="temps_chunk"/></tag>
		      <tag><var n="pers_chunk"/></tag>
		      <tag><var n="nbr_chunk"/></tag>
		    </tags>      
		    <lu>   
			<clip pos="1" side="tl" part="lemh"/>
			<clip pos="1" side="tl" part="a_verb"/>
			<lit-tag v="ger"/>
			<clip pos="1" side="tl" part="lemq"/>
		    </lu> 
		    <b pos="1"/>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/>
		      <clip pos="3" side="tl" part="a_verb"/>
		      <lit-tag v="inf"/>
		      <var n="pronomenc"/>
		      <clip pos="3" side="tl" part="lemq"/>
		    </lu>
		  </chunk>
		</out>
	     </when>
	     <when>
	    <test>
	      <equal>
		  <clip pos="1" side="sl" part="temps"/>
		  <lit-tag v="inf"/>
	      </equal>
	    </test>
	    	<out>
		  <chunk name="verbcj_inf" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		      <tag><var n="temps_chunk"/></tag>
		      <tag><var n="pers_chunk"/></tag>
		      <tag><var n="nbr_chunk"/></tag>
		    </tags>      
		    <lu>   
			<clip pos="1" side="tl" part="lemh"/>
			<clip pos="1" side="tl" part="a_verb"/>
			<lit-tag v="inf"/>
			<clip pos="1" side="tl" part="lemq"/>
		    </lu> 
		    <b pos="1"/>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/>
		      <clip pos="3" side="tl" part="a_verb"/>
		      <lit-tag v="inf"/>
		      <var n="pronomenc"/>
		      <clip pos="3" side="tl" part="lemq"/>
		    </lu>
		  </chunk>
		</out>
	     </when>
	      <otherwise>
	      	<call-macro n="conj_verb1">
		  <with-param pos="1"/>
		</call-macro>
		<out>
		  <chunk name="verbcj_inf" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		      <tag><var n="temps_chunk"/></tag>
		      <tag><var n="pers_chunk"/></tag>
		      <tag><var n="nbr_chunk"/></tag>
		    </tags>      
		    <lu>   
			<clip pos="1" side="tl" part="lemh"/>
			<clip pos="1" side="tl" part="a_verb"/>
			<lit-tag v="3"/>
			<lit-tag v="4"/>
			<lit-tag v="5"/>
			<clip pos="1" side="tl" part="lemq"/>
		    </lu> 
		    <b pos="1"/>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/>
		      <clip pos="3" side="tl" part="a_verb"/>
		      <lit-tag v="inf"/>
		      <var n="pronomenc"/>
		      <clip pos="3" side="tl" part="lemq"/>
		    </lu>
		  </chunk>
		</out>
	     </otherwise>
	  </choose>
      </action>
    </rule>

<rule comment="REGRA: VERBcontrol + to + INF + PRONobj ('try/need/... to do this -> tentar/necesitar/ facer isto">
      <pattern>
	<pattern-item n="controlverb"/>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>   
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="3"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="try"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="tentar"/>
	    </let>
	  </when>
	</choose>	
	<choose>
	  <when>
	    <test>
	      <equal>
		  <clip pos="1" side="sl" part="temps"/>
		  <lit-tag v="ger"/>
	      </equal>
	    </test>
	    <out>
	      <chunk name="verbcj_inf_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>     
		<lu>   
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <lit-tag v="ger"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</lu> 
		<b pos="1"/>	   
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>
		  <var n="pronomenc"/>
		</lu>
		<lu>
		  <clip pos="4" side="tl" part="lem"/>
		  <lit-tag v="prn.enc"/>
		  <clip pos="4" side="tl" part="pers"/>
		  <clip pos="4" side="tl" part="gen"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	    </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <call-macro n="conj_verb1">
	      <with-param pos="1"/>
	    </call-macro>
	    <out>
	      <chunk name="verbcj_inf_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>    
		  <lu>   
		    <clip pos="1" side="tl" part="lemh"/>
		    <clip pos="1" side="tl" part="a_verb"/>
		    <lit-tag v="3"/>
		    <lit-tag v="4"/>
		    <lit-tag v="5"/>
		    <clip pos="1" side="tl" part="lemq"/>
		  </lu> 
		  <b pos="1"/>	   
		  <lu>
		    <clip pos="3" side="tl" part="lemh"/>
		    <clip pos="3" side="tl" part="a_verb"/>
		    <lit-tag v="inf"/>
		    <var n="pronomenc"/>
		  </lu>
		  <lu>
		    <clip pos="4" side="tl" part="lem"/>
		    <lit-tag v="prn.enc"/>
		    <clip pos="4" side="tl" part="pers"/>
		    <clip pos="4" side="tl" part="gen"/>
		    <clip pos="4" side="tl" part="nbr"/>
		    <clip pos="3" side="tl" part="lemq"/>
		  </lu>
	      </chunk>
	    </out>		
	   </otherwise>
	</choose>
	<call-macro n="f_bcond">
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro>		
	<call-macro n="f_bcond">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
      </action>
    </rule> 


    <rule comment="REGRA: AUX + VERBcontrol + to + INF ('can try/need/... to do this -> poder tentar/necesitar/ facer'">
      <pattern>
	<pattern-item n="auxmod"/>
	<pattern-item n="controlverb"/>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>   
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="4"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>
		  <clip pos="2" side="sl" part="lem"/>
		  <lit v="try"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit v="tentar"/>
	    </let>
	  </when>
	</choose>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>     
	<out>
	  <chunk name="auxmod_inf_inf" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>      
	    <lu>   
	      <var n="verbfinal"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>
	      <var n="pronomenc"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
	<call-macro n="f_bcond">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
      </action>
    </rule>


    <rule comment="REGRA: AUX + ADV + VERBcontrol + to + INF ('can try/need/... totally to do this -> poder tentar/necesitar/facer totalmente'">
      <pattern>
	<pattern-item n="auxmod"/>
	<pattern-item n="adv"/>
	<pattern-item n="controlverb"/>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>   
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp">
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="5"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <equal>
		  <clip pos="3" side="sl" part="lem"/>
		  <lit v="try"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="lem"/>
	      <lit v="tentar"/>
	    </let>
	  </when>
	</choose>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>  
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
        </choose>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><var n="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
          <b pos="1"/>
	  <chunk name="auxmod_inf_inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>      
	    <lu>   
	      <var n="verbfinal"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>
	      <var n="pronomenc"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	</chunk>
	</out>	
		  <call-macro n="f_bcond">
		    <with-param pos="3"/>
		    <with-param pos="4"/>
		  </call-macro>
      </action>
    </rule>
    
    <rule comment="REGRA: AUX (temps) + VERBcontrol + to + INF ('would try/need/... to do this -> tentaría/necesitar/ facer'">
      <pattern>
	<pattern-item n="auxtemps"/>
	<pattern-item n="controlverb"/>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>   
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="4"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <equal>
		  <clip pos="2" side="sl" part="lem"/>
		  <lit v="try"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit v="tentar"/>
	    </let>
	  </when>
	</choose>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="verbcj_inf" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>     
	    <lu>   
	      <var n="verbfinal"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>
	      <var n="pronomenc"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="f_bcond">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
      </action>
    </rule>


    <rule comment="REGRA: AUX (temps) + ADV + VERBcontrol + to + INF ('try/need/... to do this -> tentar/necesitar/ facer'">
      <pattern>
	<pattern-item n="auxtemps"/>
	<pattern-item n="adv"/>
	<pattern-item n="controlverb"/>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>   
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp">
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="5"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <equal>
		  <clip pos="3" side="sl" part="lem"/>
		  <lit v="try"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="lem"/>
	      <lit v="tentar"/>
	    </let>
	  </when>
	</choose>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
        </choose>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><var n="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
          <b pos="1"/>
	  <chunk name="verbcj_inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>    
	    <lu>   
	      <var n="verbfinal"/>
	    </lu> 		
	    <b pos="2"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>
	      <var n="pronomenc"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="f_bcond">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
      </action>
    </rule>


    <!--***************** presente e past continuous ****************************** -->


 

    <rule comment="REGRA: BE GER (am saying -> estou dicindo)">
	    <!--faltaría a regra complementaria para xerar 'estou a dicir, non prioritaria'-->
      <pattern>
	<pattern-item n="be"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pron"><!-- con isto faise o proclítico -->
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp"><!--este serve para facer un enclítico -->
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pronenc"><!--con isto faise o enclítico -->
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="conj_be_ger">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="past"/>
	      </equal>
	    </test>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
	      <with-param pos="2"/>
	    </call-macro>
	    <out>
	      <chunk name="verbcj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>
		  <var n="pronom"/><!--aquí o pronome vai diante, no resto vai detrás -->	
		  <var n="verbfinal"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="be_ger" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>
		  <var n="verbfinal"/> 
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="temps"/>
		  <var n="pronomenc"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>



    <rule comment="REGRA: BE GER clítico (am saying it-> estou dicíndoo)">
	    <!--faltaría a regra complementaria para xerar 'estou a dicir, non prioritaria'-->
      <pattern>
	<pattern-item n="be"/>
	<pattern-item n="ger"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp"><!--este serve para facer un enclítico -->
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pronenc"><!--con isto faise o enclítico -->
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="conj_be_ger">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="past"/>
	      </equal>
	    </test>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
	      <with-param pos="2"/>
	    </call-macro>
	    <out>
	      <chunk name="pro_verbcj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>
		  <var n="pronom"/><!--aquí o pronome vai diante, no resto vai detrás -->
		  <clip pos="3" side="tl" part="lem"/>
		  <clip pos="3" side="tl" part="a_prnpro"/>
		  <clip pos="3" side="tl" part="pers"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		</lu>
		<b pos="2"/>	
		<lu>
		  <var n="verbfinal"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="be_ger_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>
		  <var n="verbfinal"/> 
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="temps"/>
		  <var n="pronomenc"/>
		</lu>
		<lu>
		  <clip pos="3" side="tl" part="lem"/> 
		  <lit-tag v="prn.enc"/>
		  <clip pos="3" side="tl" part="pers"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
	      <with-param pos="2"/>
	    </call-macro>
	  </otherwise>
	</choose>
      </action>
    </rule>



    <rule comment="REGRA: BE ADV GER (is always/not working -> sempre/non está traballando">
	    <!--faltaría a regra para xerar 'sempre está a traballar'-->
      <pattern>
	<pattern-item n="be"/>
	<pattern-item n="adv"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp"><!--este serve para facer un enclítico -->
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pronenc"><!--con isto faise o enclítico -->
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_be_ger">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	</out>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="past"/>
	      </equal>
	    </test>
	    <call-macro n="f_bcond">
	      <with-param pos="2"/>
	      <with-param pos="3"/>
	    </call-macro>
	    <out>
	      <chunk name="verbcj">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>
		  <var n="pronom"/><!--aquí o pronome vai diante, no resto vai detrás -->	
		  <var n="verbfinal"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="be_ger">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>
		  <var n="verbfinal"/> 
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_verb"/>
		  <clip pos="3" side="tl" part="temps"/>
		  <var n="pronomenc"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>




    <rule comment="REGRA: BE ADV GER clítico (is always singing it-> sempre está cantándoo">
	    <!--faltaría a regra para xerar 'sempre está a cantalo'-->
      <pattern>
	<pattern-item n="be"/>
	<pattern-item n="adv"/>
	<pattern-item n="ger"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp"><!--este serve para facer un enclítico -->
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pronenc"><!--con isto faise o enclítico -->
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_be_ger">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	</out>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="past"/>
	      </equal>
	    </test>
	    <call-macro n="f_bcond">
	      <with-param pos="2"/>
	      <with-param pos="3"/>
	    </call-macro>
	    <out>
	      <chunk name="pro_verbcj">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>
		  <var n="pronom"/><!--aquí o pronome vai diante, no resto vai detrás -->
		  <clip pos="4" side="tl" part="lem"/>
		  <clip pos="4" side="tl" part="a_prnpro"/>
		  <clip pos="4" side="tl" part="pers"/>
		  <clip pos="4" side="tl" part="gen"/>
		  <clip pos="4" side="tl" part="nbr"/>
		</lu>
		<b pos="3"/>	
		<lu>
		  <var n="verbfinal"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="be_ger_enc">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>
		  <var n="verbfinal"/> 
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_verb"/>
		  <clip pos="3" side="tl" part="temps"/>
		  <var n="pronomenc"/>
		</lu>
		<lu>
		  <clip pos="4" side="tl" part="lem"/> 
		  <lit-tag v="prn.enc"/>
		  <clip pos="4" side="tl" part="pers"/>
		  <clip pos="4" side="tl" part="gen"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	    <call-macro n="f_bcond">
	      <with-param pos="3"/>
	      <with-param pos="4"/>
	    </call-macro>
	  </otherwise>
	</choose>
      </action>
    </rule>




   <rule comment="REGRA: BE CONTROLger TO INF(am planning to go -> estou planeando ir)">
	   <!--faltaría a regra para xerar 'estou a planear ir'-->
      <pattern>
	<pattern-item n="be"/>
	<pattern-item n="controlverbger"/>
	<pattern-item n="to"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="4"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <equal>
		  <clip pos="2" side="sl" part="lem"/>
		  <lit v="try"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit v="tentar"/>
	    </let>
	  </when>
	</choose>
	<call-macro n="conj_be_ger">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="inf"/>
	      </equal>
	    </test>
	    <out>
	      <chunk name="verbcj_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/>
		  <clip pos="4" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>
		  <var n="pronomenc"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="past"/><!--unha soa forma léxica, 'decidía' (facer) -->
	      </equal>
	    </test>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
	      <with-param pos="2"/>
	    </call-macro>
	    <out>
	      <chunk name="verbcj_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>	
		  <var n="verbfinal"/> 
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/>
		  <clip pos="4" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>
		  <var n="pronomenc"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise><!--dúas formas léxicas - 'estou decidindo' (facer) -->
	    <out>
	      <chunk name="be_ger_inf" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="gen_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>
		<lu>
		  <var n="verbfinal"/> 
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="temps"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/>
		  <clip pos="4" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>
		  <var n="pronomenc"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
   </rule>

<!--****************   going to + inf   ********************** -->



    <rule comment="REGRA: BE going to INF (am going to read -> lerei; was going to read -> ía ler )">
      <pattern>
	<pattern-item n="be_past_pres"/>
	<pattern-item n="going"/>
	<pattern-item n="to"/>
	<pattern-item n="infpres"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="pron"><!-- para facer o proclítico -->
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="conj_going_to_inf">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="f_bcond">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <var n="pronom"/>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_verb"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <lit-tag v="5"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/> 
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>



 <rule comment="REGRA: BE going to INF clítico (am going to read it -> lereino; was going to read -> íao ler )">
      <pattern>
	<pattern-item n="be_past_pres"/>
	<pattern-item n="going"/>
	<pattern-item n="to"/>
	<pattern-item n="infpres"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="conj_going_to_inf">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	  <with-param pos="4"/>
	</call-macro>
	<let>
	  <var n="lema_SV"/><!--antepón 'pro_' ao nome do lema_SV atribuído pola macro conj_going_to_inf -->
	  <concat>
	    <lit v="pro_"/>
	    <var n="lema_SV"/>
	  </concat>
	</let>	
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	<mlu>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_verb"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <lit-tag v="5"/>
	      <var n="pronomenc"/>
	        </lu>
	    	<lu>
	      <clip pos="5" side="tl" part="lem"/>
	      <lit-tag v="prn.enc"/>
	      <clip pos="5" side="tl" part="pers"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
		  </lu>
	  </mlu>
	    <b/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/> 
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="4"/>
	  <with-param pos="5"/>
	</call-macro>
      </action>
    </rule>




  <rule comment="REGRA: BE ADV going to INF (am not/always going to read ->non lerei; was not/always going to read -> non ía ler ) ">
      <pattern>
	<pattern-item n="be_past_pres"/>
	<pattern-item n="adv"/>
	<pattern-item n="going"/>
	<pattern-item n="to"/>
	<pattern-item n="infpres"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="pron"><!-- para facer o proclítico -->
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="conj_going_to_inf">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	  <with-param pos="5"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	</out>
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <var n="pronom"/>
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_verb"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <lit-tag v="5"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/> 
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="4"/>
	  <with-param pos="5"/>
	</call-macro>
      </action>
    </rule>



  <rule comment="REGRA: BE ADV going to INF clítico (am not/always going to read it ->non o lerei; was not/always going to read -> non o ía ler )">
      <pattern>
	<pattern-item n="be_past_pres"/>
	<pattern-item n="adv"/>
	<pattern-item n="going"/>
	<pattern-item n="to"/>
	<pattern-item n="infpres"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="pron"><!-- para facer o proclítico -->
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="conj_going_to_inf">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	  <with-param pos="5"/>
	</call-macro>
	<let>
	  <var n="lema_SV"/><!--antepón 'pro_' ao nome do lema_SV atribuída pola macro conj_going_to_inf -->
	  <concat>
	    <lit v="pro_"/>
	    <var n="lema_SV"/>
	  </concat>
	</let>		
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	</out>
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <var n="pronom"/>
	      <clip pos="6" side="tl" part="lem"/>
	      <clip pos="6" side="tl" part="a_prnpro"/>
	      <clip pos="6" side="tl" part="pers"/>
	      <clip pos="6" side="tl" part="gen"/>
	      <clip pos="6" side="tl" part="nbr"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_verb"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <lit-tag v="5"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/> 
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="5"/>
	  <with-param pos="6"/>
	</call-macro>
      </action>
    </rule>




<!--***************************************** outras *************** -->

    <rule comment="REGRA: VERBO + ING ('avoid doing -> evitar facer')">
      <pattern>
	<pattern-item n="verbcjnoser"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	<when>
	    <test>
		<equal>
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v="stop"/>
		</equal>
	    </test>
	      <out>
		  <chunk name="verbcj_de_inf" case="caseFirstWord">
			  <tags>	       
				  <tag><lit-tag v="SV"/></tag>
				  <tag><var n="tipus_verb"/></tag>
				  <tag><var n="temps_chunk"/></tag>
				  <tag><var n="pers_chunk"/></tag>
				  <tag><var n="nbr_chunk"/></tag>
			  </tags> 		
			  <lu>
				  <var n="pronom"/>
				  <var n="verbfinal"/>
			  </lu>
			  <b pos="1"/>
			  <lu>
				  <lit v="de"/>
				  <lit-tag v="pr"/>
			  </lu>
			  <b/>
			  <lu>
				  <clip pos="2" side="tl" part="lemh"/>
				  <clip pos="2" side="tl" part="a_verb"/>
				  <lit-tag v="inf"/>
				  <var n="pronomenc"/>
				  <clip pos="2" side="tl" part="lemq"/>
			  </lu>
		    </chunk>
	      </out>
	</when>		
	<otherwise>
	  <out>
	    <chunk name="verbcj_inf" case="caseFirstWord">
	      <tags>	       
		<tag><lit-tag v="SV"/></tag>
		<tag><var n="tipus_verb"/></tag>
		<tag><var n="temps_chunk"/></tag>
		<tag><var n="pers_chunk"/></tag>
		<tag><var n="nbr_chunk"/></tag>
	      </tags> 		
	      <lu>
		<var n="pronom"/>
		<var n="verbfinal"/>
	      </lu>
	      <b pos="1"/>
	      <lu>
		<clip pos="2" side="tl" part="lemh"/>
		<clip pos="2" side="tl" part="a_verb"/>
		<lit-tag v="inf"/>
		<var n="pronomenc"/>
		<clip pos="2" side="tl" part="lemq"/>
	      </lu>
	    </chunk>
	   </out>
  	 </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="REGRA: PRONOME VERBO + ING ('I avoid doing -> Evito facer')">
      <pattern>
	<pattern-item n="prnsubj"/>
	<pattern-item n="verbcjnoser"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="2"/>
	</call-macro>
	<choose>
	<when>
	    <test>
		<equal>
		    <clip pos="2" side="sl" part="lem"/>
		    <lit v="stop"/>
		</equal>
	    </test>
	      <out>
		  <chunk name="verbcj_de_inf" case="caseFirstWord">
			  <tags>	       
				  <tag><lit-tag v="SV"/></tag>
				  <tag><var n="tipus_verb"/></tag>
				  <tag><var n="temps_chunk"/></tag>
				  <tag><var n="pers_chunk"/></tag>
				  <tag><var n="nbr_chunk"/></tag>
			  </tags> 		
			  <lu>
				  <var n="pronom"/>
				  <var n="verbfinal"/>
			  </lu>
			  <b pos="2"/>
			  <lu>
				  <lit v="de"/>
				  <lit-tag v="pr"/>
			  </lu>
			  <b/>
			  <lu>
				  <clip pos="3" side="tl" part="lemh"/>
				  <clip pos="3" side="tl" part="a_verb"/>
				  <lit-tag v="inf"/>
				  <var n="pronomenc"/>
				  <clip pos="3" side="tl" part="lemq"/>
			  </lu>
		    </chunk>
	      </out>
	</when>		
	<otherwise>
	  <out>
	    <chunk name="verbcj_inf" case="caseFirstWord">
	      <tags>	       
		<tag><lit-tag v="SV"/></tag>
		<tag><var n="tipus_verb"/></tag>
		<tag><var n="temps_chunk"/></tag>
		<tag><var n="pers_chunk"/></tag>
		<tag><var n="nbr_chunk"/></tag>
	      </tags> 		
	      <lu>
		<var n="pronom"/>
		<var n="verbfinal"/>
	      </lu>
	      <b pos="2"/>
	      <lu>
		<clip pos="3" side="tl" part="lemh"/>
		<clip pos="3" side="tl" part="a_verb"/>
		<lit-tag v="inf"/>
		<var n="pronomenc"/>
		<clip pos="3" side="tl" part="lemq"/>
	      </lu>
	    </chunk>
	   </out>
  	 </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="REGRA: AUX + VERBO + ING ('can avoid doing -> pode evitar facer'">
      <pattern>
	<pattern-item n="auxmod"/>
	<pattern-item n="infpres"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
<!--	<call-macro n="pron"> fica comentada pq non está feita a regra no t3x para arranxar pronomes
	  <with-param pos="2"/>
	</call-macro> -->
	<call-macro n="tipus_verbs_imp">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
        <out>
          <chunk name="auxmod_inf_inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
            </tags>
            <lu>
         <!--     <var n="pronom"/> -->
              <var n="verbfinal"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>
	      <var n="pronomenc"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGRA: AUX (temps) + VERBO + ING ('will avoid doing this -> evitar facer'">
      <pattern>
	<pattern-item n="auxtemps"/>
	<pattern-item n="infpres"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>	
        <out>
          <chunk name="verbcj_inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
            </tags>
              <lu>
              <var n="pronom"/>
              <var n="verbfinal"/>
              </lu>
           <b pos="1"/>
           <b pos="2"/>
              <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>
	      <var n="pronomenc"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
          </chunk>
	</out>	 
      </action>
    </rule>


    <rule comment="REGRA: AUX ADV VERB (will always think -> sempre pensarei. will not think -> non pensarei.)">
      <pattern>
	<pattern-item n="auxtemps"/>
	<pattern-item n="adv"/>
	<pattern-item n="infpres"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk namefrom="lema_SV">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>      
	    <lu>   
	      <var n="pronom"/> 
	      <var n="verbfinal"/>
	    </lu> 
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro>
      </action>
    </rule>

    <rule comment="REGRA: AUX ADV VERBO clítico (will always sing it-> sempre o cantareis. will not sing it-> non o cantarei.)">
      <pattern>
	<pattern-item n="auxtemps"/>
	<pattern-item n="adv"/>
	<pattern-item n="infpres"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>    
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<let>
	  <var n="lema_SV"/><!--anteposa 'pro_' al nom del lema_SV assignat per la marco conj_verb_compost -->
	  <concat>
	    <lit v="pro_"/>
	    <var n="lema_SV"/>
	  </concat>
	</let>		
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk namefrom="lema_SV">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <lu>
	      <var n="pronom"/>
	      <clip pos="4" side="tl" part="lem"/>
	      <clip pos="4" side="tl" part="a_prnpro"/>
	      <clip pos="4" side="tl" part="pers"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	    </lu>
	    <b pos="2"/>	    
	    <lu>   
	      <var n="verbfinal"/>
	    </lu> 
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
      </action>
    </rule>
    
    
    <rule comment="REGRA: AUX ADV VERB (can always think -> sempre podo pensar)">    
      <pattern>
	<pattern-item n="auxmod"/> 
	<pattern-item n="adv"/>
	<pattern-item n="infpres"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk name="auxmod_inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>  
	    <lu>
	      <var n="pronom"/>
	      <var n="verbfinal"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>			
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>  
      </action>
    </rule>

    <rule comment="REGRA: AUX ADV VERBO clítico (can always think it -> sempre o podo pensar)">    
      <pattern>
	<pattern-item n="auxmod"/> 
	<pattern-item n="adv"/>
	<pattern-item n="infpres"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>

	  <chunk name="pro_auxmod_inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>  
	    <lu>
	      <var n="pronom"/>	
	      <clip pos="4" side="tl" part="lem"/>
	      <clip pos="4" side="tl" part="a_prnpro"/>
	      <clip pos="4" side="tl" part="pers"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <var n="verbfinal"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>			
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out> 
      </action>
    </rule>




    <rule comment="REGRA: AUX ADV VERB (I do not think -> Non penso. I do always think -> Sempre penso)">    
      <pattern>
	<pattern-item n="do"/> 
	<pattern-item n="adv"/>
	<pattern-item n="infpres"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk namefrom="lema_SV">
	    <tags>	       
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <lu>
	      <var n="pronom"/>
	      <var n="verbfinal"/>
	    </lu>
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro>
      </action>
    </rule>

    <rule comment="REGRA: AUX ADV VERBO clítico (I do not sing it -> Non o canto. I do always sing it-> Sempre o canto)">    
      <pattern>
	<pattern-item n="do"/> 
	<pattern-item n="adv"/>
	<pattern-item n="infpres"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<let>
	  <var n="lema_SV"/><!--anteposa 'pro_' al nom del lema_SV assignat per la marco conj_verb_compost -->
	  <concat>
	    <lit v="pro_"/>
	    <var n="lema_SV"/>
	  </concat>
	</let>	    
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>	       
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <lu>
	      <var n="pronom"/>
	      <clip pos="4" side="tl" part="lem"/>
	      <clip pos="4" side="tl" part="a_prnpro"/>
	      <clip pos="4" side="tl" part="pers"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <var n="verbfinal"/>
	    </lu>
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
      </action>
    </rule>

    <rule comment="AUX + ADV + MODAL conxugábel + VERBO (He will sometimes have to explain - Ás veces terá que explicar. He will not have to explain -> Non terá que explicar. He does not have to explain - Non ten que explicar)">
      <pattern>
	<pattern-item n="auxnocan"/>
	<pattern-item n="adv"/>
	<pattern-item n="modinf"/>
	<pattern-item n="infpres"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="4"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	</out>
<!-- Aquí comeza a parte de conxugación dos verbos-->
<!-- talvez habería que desdobralo en dúas regras, unha para conj_verb1 e unha para conj_verb_compost -->	
	<choose>
	  <when>
	    <test>
	      <or>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="will"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="shall"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="would"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="do"/>
		</equal>
	      </or>
	    </test>
	    <call-macro n="conj_verb_compost">
	      <with-param pos="1"/>
	      <with-param pos="3"/>
	    </call-macro>
	    <!-- sobrescribe o nome de chunk atribuído pola macro 'conj_verb' -->	     
	    <let>
	      <var n="lema_SV"/>
	      <lit v="mod_inf"/>
	    </let>
	    <out>
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags> 
		<lu>
		  <var n="pronom"/>
		  <var n="verbfinal"/>
		</lu>	    
		<b pos="2"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>
		  <clip pos="4" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	    <call-macro n="f_bcond">
	      <with-param pos="3"/>
	      <with-param pos="4"/>
	    </call-macro>
	  </when>
	  <otherwise>	    
	    <call-macro n="conj_verb1">
	      <with-param pos="1"/>
	    </call-macro>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="auxmod_mod_inf"/>
	    </let>
	    <out>
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>      
		<lu>
		  <var n="pronom"/>
		  <var n="verbfinal"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>			
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>
		  <clip pos="4" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>





    <rule comment="AUX + ADV + MODAL conxugábel + VERBO + clítico (He will sometimes have to explain it- Ás veces o terá que explicar. He will not have to explain it-> Non o terá que explicar. He does not have to explain it- Non o ten que explicar)">
      <pattern>
	<pattern-item n="auxnocan"/>
	<pattern-item n="adv"/>
	<pattern-item n="modinf"/>
	<pattern-item n="infpres"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="4"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	</out>
<!-- Aquí comeza a parte de conxugación dos verbos-->

	<choose>
	  <when>
	    <test>
	      <or>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="will"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="shall"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="would"/>
		</equal>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="do"/>
		</equal>
	      </or>
	    </test>
	    <call-macro n="conj_verb_compost">
	      <with-param pos="1"/>
	      <with-param pos="3"/>
	    </call-macro>
	    <!-- sobrescribe o nome de chunk atribuído pola macro 'conj_verb' -->	      
	    <let>
	      <var n="lema_SV"/>
	      <lit v="pro_mod_inf"/>
	    </let>
	    <out>
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags> 
		<lu>
		  <var n="pronom"/>
		  <clip pos="5" side="tl" part="lem"/>
		  <clip pos="5" side="tl" part="a_prnpro"/>
		  <clip pos="5" side="tl" part="pers"/>
		  <clip pos="5" side="tl" part="gen"/>
		  <clip pos="5" side="tl" part="nbr"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <var n="verbfinal"/>
		</lu>	    
		<b pos="3"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>
		  <clip pos="4" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	    <call-macro n="f_bcond">
	      <with-param pos="4"/>
	      <with-param pos="5"/>
	    </call-macro>
	  </when>
	  <otherwise>	    
	    <call-macro n="conj_verb1">
	      <with-param pos="1"/>
	    </call-macro>
	    <let>
	      <var n="lema_SV"/>
	      <lit v="pro_auxmod_mod_inf"/>
	    </let>
	    <out>
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags>      
		<lu>
		  <var n="pronom"/>
		  <clip pos="5" side="tl" part="lem"/>
		  <clip pos="5" side="tl" part="a_prnpro"/>
		  <clip pos="5" side="tl" part="pers"/>
		  <clip pos="5" side="tl" part="gen"/>
		  <clip pos="5" side="tl" part="nbr"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <var n="verbfinal"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>			
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
		<b pos="4"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_verb"/>
		  <lit-tag v="inf"/>
		  <clip pos="4" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>
      </action>
    </rule>


    <rule comment="HABER ADV PARTICIPIO (They have always/not asked - Sempre/Non preguntaron)">
      <pattern>
	<pattern-item n="have_aux"/>
	<pattern-item n="adv"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="passa_inf_a_ifi">
	  <with-param pos="1"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="2"/>
	</out>    
	<choose>	 
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="past"/>
	      </equal> 
	    </test>
	    <let>
	      <var n="temps_chunk"/>
	      <lit-tag v="pii"/>
	    </let>	    
	  </when>
	  <when> 
	    <test>
	      <or>
		<equal>
			<clip pos="1" side="sl" part="temps"/>
			<lit-tag v="pres"/>
		</equal>
		<equal>
			<clip pos="1" side="sl" part="temps"/>
			<lit-tag v="pri"/>
		</equal> 
	      </or>
	    </test>
	      <let>
		      <var n="temps_chunk"/>
		      <lit-tag v="ifi"/>
	      </let>		  
	  </when>	  
	</choose>
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	      <lu>   
		<var n="pronom"/> 
		<clip pos="3" side="tl" part="lemh"/>
		<clip pos="3" side="tl" part="a_verb"/>
		<lit-tag v="3"/>
		<lit-tag v="4"/>
		<lit-tag v="5"/>
		<clip pos="3" side="tl" part="lemq"/>
	      </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="PRONOME HABER ADV PARTICIPIO clítico (They have always/not asked it- Sempre/Non o preguntaron)">
      <pattern>
	<pattern-item n="have_aux_inf"/><!-- fai falta unha para have_aux_ger pola diferente colocación do enclítico e talvez tamén separalo na regra anterior -->
	<pattern-item n="adv"/>
	<pattern-item n="pp"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="passa_inf_a_ifi">
	  <with-param pos="1"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="2"/>
	</out> 
	<choose>	 
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="past"/>
	      </equal> 
	    </test>
	    <let>
	      <var n="temps_chunk"/>
	      <lit-tag v="pii"/>
	    </let>
	  </when>
	  <when> 
	    <test>
	      <or>
		<equal>
			<clip pos="1" side="sl" part="temps"/>
			<lit-tag v="pres"/>
		</equal>
		<equal>
			<clip pos="1" side="sl" part="temps"/>
			<lit-tag v="pri"/>
		</equal> 
	      </or>
	    </test>
	  <let>
	      <var n="temps_chunk"/>
	      <lit-tag v="ifi"/>
	  </let>		  
	  </when>
	</choose>
	<out>
	  <chunk name="pro_verbcj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <lu>
	      <var n="pronom"/>
	      <clip pos="4" side="tl" part="lem"/>
	      <clip pos="4" side="tl" part="a_prnpro"/>
	      <clip pos="4" side="tl" part="pers"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	    </lu>
	    <b pos="3"/>
	      <lu>   
		      <var n="pronom"/> 
		      <clip pos="3" side="tl" part="lemh"/>
		      <clip pos="3" side="tl" part="a_verb"/>
		      <lit-tag v="3"/>
		      <lit-tag v="4"/>
		      <lit-tag v="5"/>
		      <clip pos="3" side="tl" part="lemq"/>
	      </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="HABER ADV PARTICIPIO (They have always/not asked - Sempre/Non preguntaron)">
    <!-- porque erra o desambiguador e escolle 'past' en vez de 'pp' ante punto -->
      <pattern>
	<pattern-item n="have_aux"/>
	<pattern-item n="adv"/>
	<pattern-item n="past"/>
	<pattern-item n="sent"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="passa_inf_a_ifi">
	  <with-param pos="1"/>
	</call-macro>	
	<let>
	  <var n="lema"/>
	  <lit v="punt"/>
	</let>
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="2"/>
	</out>    
	<choose>	 
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="past"/>
	      </equal> 
	    </test>
	    <let>
	      <var n="temps_chunk"/>
	      <lit-tag v="pii"/>
	    </let>	    
	  </when>
	  <when> 
	    <test>
	      <or>
		<equal>
			<clip pos="1" side="sl" part="temps"/>
			<lit-tag v="pres"/>
		</equal>
		<equal>
			<clip pos="1" side="sl" part="temps"/>
			<lit-tag v="pri"/>
		</equal> 
	      </or>
	    </test>
	      <let>
		      <var n="temps_chunk"/>
		      <lit-tag v="ifi"/>
	      </let>		  
	  </when>	  
	</choose>
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	      <lu>   
		<var n="pronom"/> 
		<clip pos="3" side="tl" part="lemh"/>
		<clip pos="3" side="tl" part="a_verb"/>
		<lit-tag v="3"/>
		<lit-tag v="4"/>
		<lit-tag v="5"/>
		<clip pos="3" side="tl" part="lemq"/>
	      </lu> 
	  </chunk>
	  <b pos="3"/>
	  <chunk namefrom="lema">
	    <tags>
	      <tag><clip pos="4" side="tl" part="tags"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="PRONOME HABER ADV PARTICIPIO clítico (They have always/not asked it- Sempre/Non o preguntaron)">
      <!-- porque erra o desambiguador e escolle 'past' en vez de 'pp' ante punto -->
      <pattern>
	<pattern-item n="have_aux_inf"/>
	<pattern-item n="adv"/>
	<pattern-item n="past"/>
	<pattern-item n="probj"/>
	<pattern-item n="sent"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="passa_inf_a_ifi">
	  <with-param pos="1"/>
	</call-macro>	
	<let>
	  <var n="lema"/>
	  <lit v="punt"/>
	</let>
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="2"/>
	</out> 
	<choose>	 
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="past"/>
	      </equal> 
	    </test>
	    <let>
	      <var n="temps_chunk"/>
	      <lit-tag v="pii"/>
	    </let>
	  </when>
	  <when> 
	    <test>
	      <or>
		<equal>
			<clip pos="1" side="sl" part="temps"/>
			<lit-tag v="pres"/>
		</equal>
		<equal>
			<clip pos="1" side="sl" part="temps"/>
			<lit-tag v="pri"/>
		</equal> 
	      </or>
	    </test>
	  <let>
	      <var n="temps_chunk"/>
	      <lit-tag v="ifi"/>
	  </let>		  
	  </when>
	</choose>
	<out>
	  <chunk name="pro_verbcj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <lu>
	      <var n="pronom"/>
	      <clip pos="4" side="tl" part="lem"/>
	      <clip pos="4" side="tl" part="a_prnpro"/>
	      <clip pos="4" side="tl" part="pers"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	    </lu>
	    <b pos="3"/>
	    <lu>   
	      <var n="pronom"/> 
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <lit-tag v="5"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	  <b pos="4"/>
	  <chunk namefrom="lema">
	    <tags>
	      <tag><clip pos="5" side="tl" part="tags"/></tag>
	    </tags>
	    <lu>
	      <clip pos="5" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>



<!--Casos would have-->

   <rule comment="AUXtemps HABER PARTICIPIO (would have finished - Acabaría)">
      <pattern>
	<pattern-item n="auxtemps"/>
	<pattern-item n="have_aux_inf"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="f_bcond">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="verbcj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <lu>   
	      <var n="pronom"/> 
	      <var n="verbfinal"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


   <rule comment="AUXmod HABER PARTICIPIO (might have finished - podería acabar)">
      <pattern>
	<pattern-item n="auxmod"/>
	<pattern-item n="have_aux_inf"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="auxmod_inf" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>   
	    <lu>
	      <var n="pronom"/>
	      <var n="verbfinal"/> 
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>		
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>



    <rule comment="AUXtemps HABER PARTICIPIO clítico (would have finished it - Acabaríao)">
      <pattern>
	<pattern-item n="auxtemps"/>
	<pattern-item n="have_aux_inf"/>
	<pattern-item n="pp"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
   	<let>
		<var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb_compost -->
		<concat>
			<var n="lema_SV"/>
			<lit v="_enc"/>	
		</concat>
	</let>
	<out>
	<chunk name="verbcj_enc" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <mlu>
	    <lu>
		    <var n="pronom"/> 
		    <clip pos="3" side="tl" part="lemh"/>
		    <clip pos="3" side="tl" part="a_verb"/>
		    <lit-tag v="3"/>
		    <lit-tag v="4"/>
		    <lit-tag v="5"/>
		     <var n="pronomenc"/>	
	    </lu>
	    <lu>
		<clip pos="4" side="tl" part="lem"/>
		<lit-tag v="prn.enc"/>
		<clip pos="4" side="tl" part="pers"/>
		<clip pos="4" side="tl" part="gen"/>
		<clip pos="4" side="tl" part="nbr"/>
		<clip pos="3" side="tl" part="lemq"/>
	      </lu>
	  </mlu>
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
      </action>
    </rule>


  <rule comment="AUXmod HABER PARTICIPIO clítico (might have finished it - Podería acabalo)">
      <pattern>
	<pattern-item n="auxmod"/>
	<pattern-item n="have_aux_inf"/>
	<pattern-item n="pp"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>

		<out>
	  <chunk name="auxmod_inf_enc" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>   
	    <lu>
	      <var n="pronom"/>
	      <var n="verbfinal"/> 
	    </lu>
	    <b pos="1"/>
      <mlu>	    
      <lu>   
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>		
	     </lu> 
	    <lu>
		<clip pos="4" side="tl" part="lem"/>
		<lit-tag v="prn.enc"/>
		<clip pos="4" side="tl" part="pers"/>
		<clip pos="4" side="tl" part="gen"/>
		<clip pos="4" side="tl" part="nbr"/>
		<clip pos="3" side="tl" part="lemq"/>
	      </lu>
      </mlu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="AUXtemps HABER PARTICIPIOcontrolverb TO INF (would have decided to come)">
      <pattern>
	<pattern-item n="auxtemps"/>
	<pattern-item n="have_aux_inf"/>
	<pattern-item n="controlverbpp"/>
        <pattern-item n="to"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp">
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="5"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <equal>
		  <clip pos="3" side="sl" part="lem"/>
		  <lit v="try"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="lem"/>
	      <lit v="tentar"/>
	    </let>
	  </when>
	</choose>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="f_bcond">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="verbcj_inf" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <lu>   
	      <var n="pronom"/> 
	      <var n="verbfinal"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>
	      <var n="pronomenc"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="4"/>
	  <with-param pos="5"/>
	</call-macro>
      </action>
    </rule>

   <rule comment="AUXmod HABER PARTICIPIOcontrolverb TO INF (should have decided to come)">
      <pattern>
	<pattern-item n="auxmod"/>
	<pattern-item n="have_aux_inf"/>
	<pattern-item n="controlverbpp"/>
        <pattern-item n="to"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="tipus_verbs_imp">
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="pronenc">
	  <with-param pos="5"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <equal>
		  <clip pos="3" side="sl" part="lem"/>
		  <lit v="try"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="lem"/>
	      <lit v="tentar"/>
	    </let>
	  </when>
	</choose>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="auxmod_inf_inf" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <lu>   
	      <var n="pronom"/> 
	      <var n="verbfinal"/> 
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>		
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>
	      <var n="pronomenc"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="4"/>
	  <with-param pos="5"/>
	</call-macro>
      </action>
    </rule>



    <rule comment="AUXtemps ADV HABER PARTICIPIO (would always/not have asked - Sempre/Non preguntaría)">
      <pattern>
	<pattern-item n="auxtemps"/>
	<pattern-item n="adv"/>
	<pattern-item n="have_aux_inf"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="4"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk name="verbcj">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <lu>   
	      <var n="pronom"/> 
	      <var n="verbfinal"/>
	    </lu> 
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
      </action>
    </rule>


 <rule comment="AUXmod ADV HABER PARTICIPIO (should always/not have asked - Sempre/Non tería que preguntar)">
      <pattern>
	<pattern-item n="auxmod"/>
	<pattern-item n="adv"/>
	<pattern-item n="have_aux_inf"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk name="auxmod_inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <lu>   
	      <var n="pronom"/> 
	      <var n="verbfinal"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>		
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="AUXtemps PRONOME HABER PARTICIPIO clítico (would always/not have asked it- Sempre/Non o preguntaría)">
      <pattern>
	<pattern-item n="auxtemps"/>
	<pattern-item n="adv"/>
	<pattern-item n="have_aux_inf"/>
	<pattern-item n="pp"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="conj_verb_compost">
	  <with-param pos="1"/>
	  <with-param pos="4"/>
	</call-macro>
	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk name="pro_verbcj">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <lu>
	      <var n="pronom"/>
	      <clip pos="5" side="tl" part="lem"/>
	      <clip pos="5" side="tl" part="a_prnpro"/>
	      <clip pos="5" side="tl" part="pers"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <clip pos="5" side="tl" part="nbr"/>
	    </lu>
	    <b pos="2"/>
	    <lu>   
	      <var n="verbfinal"/> 
	    </lu> 
	  </chunk>
	</out>
	<call-macro n="f_bcond">
	  <with-param pos="4"/>
	  <with-param pos="5"/>
	</call-macro>
      </action>
    </rule>


  <rule comment="AUXmod PRONOME HABER PARTICIPIO clítico (should always/not have asked it- Sempre/Non o tería que preguntar)">
      <pattern>
	<pattern-item n="auxmod"/>
	<pattern-item n="adv"/>
	<pattern-item n="have_aux_inf"/>
	<pattern-item n="pp"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="pron">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="1"/>
	</call-macro>	
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk name="pro_auxmod_inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <lu>
	      <var n="pronom"/>
	      <clip pos="5" side="tl" part="lem"/>
	      <clip pos="5" side="tl" part="a_prnpro"/>
	      <clip pos="5" side="tl" part="pers"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <clip pos="5" side="tl" part="nbr"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <var n="verbfinal"/>
	    </lu>
	    <b pos="3"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_verb"/>
	      <lit-tag v="inf"/>		
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: PRNSUBJ TURN NUM NOM1 OLD -> Cumprir NUM NOM1 (You turned 31 years old - Cumpriches 33 anos)">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="turn"/>
		    <pattern-item n="num"/>
		    <pattern-item n="yearmonth"/>
		    <pattern-item n="old"/>
	    </pattern>
	    <action>
		    <call-macro n="tipus_verbs">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="4"/>
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="million">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="flexio_numerals">
			    <with-param pos="3"/>
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>
		    <let>
			    <clip pos="2" side="tl" part="lem"/>
			    <lit v="cumprir"/>
		    </let>
		    <choose>
			    <when>
				    <test>
					    <equal>
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="one"/>
					    </equal>
				    </test>
				    <let>
					    <clip pos="4" side="tl" part="nbr"/>
					    <lit-tag v="sg"/>
				    </let>
			    </when>
		    </choose>
		    <choose>
			    <when>
				    <test>
					    <not>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="one"/>
						    </equal>
					    </not>
				    </test>
				    <let>
					    <clip pos="4" side="tl" part="nbr"/>
					    <lit-tag v="pl"/>
				    </let>
			    </when>
		    </choose>
		    <out> 
			    <chunk name="turn_num_yearold" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
				    </tags>
				    <lu>   
					    <clip pos="2" side="tl" part="lemh"/>
					    <clip pos="2" side="tl" part="a_verb"/>
					    <lit-tag v="3"/>
					    <clip pos="1" side="tl" part="pers"/>
					    <clip pos="1" side="tl" part="nbr"/>
					    <clip pos="2" side="tl" part="lemq"/>
				    </lu> 
				    <b pos="1"/>
				    <lu>   
					    <clip pos="3" side="tl" part="whole"/> 
				    </lu> 
				    <b pos="2"/> 
				    <lu>   
					    <clip pos="4" side="tl" part="lemh"/> 
					    <clip pos="4" side="tl" part="a_nom"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 		
			    </chunk>
		    </out>
	    </action>
    </rule>
    
    <rule comment="REGRA: PRNSUBJ BE NUM NOM1 OLD -> TER NUM NOM1 (You are 31 years old - Tes 33 anos)">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="be"/>
		    <pattern-item n="num"/>
		    <pattern-item n="yearmonth"/>
		    <pattern-item n="old"/>
	    </pattern>
	    <action>
		    <call-macro n="tipus_verbs">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="4"/>
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="million">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="flexio_numerals">
			    <with-param pos="3"/>
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>
		    <let>
			    <clip pos="2" side="tl" part="lem"/>
			    <lit v="ter"/>
		    </let>
		    <let>
			    <clip pos="2" side="tl" part="a_verb"/>
			    <lit-tag v="vblex"/>
                    </let>
		    <choose>
			    <when>
				    <test>
					    <equal>
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="one"/>
					    </equal>
				    </test>
				    <let>
					    <clip pos="4" side="tl" part="nbr"/>
					    <lit-tag v="sg"/>
				    </let>
			    </when>
		    </choose>
		    <choose>
			    <when>
				    <test>
					    <not>
					    <equal>
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="one"/>
					    </equal>
				    </not>
				    </test>
				    <let>
					    <clip pos="4" side="tl" part="nbr"/>
					    <lit-tag v="pl"/>
				    </let>
			    </when>
		    </choose>
		    <out> 
			    <chunk name="be_num_yearold" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
			            </tags>
				    <lu>   
					    <clip pos="2" side="tl" part="lemh"/>
					    <clip pos="2" side="tl" part="a_verb"/>
					    <lit-tag v="3"/>
					    <clip pos="1" side="tl" part="pers"/>
					    <clip pos="1" side="tl" part="nbr"/>
					    <clip pos="2" side="tl" part="lemq"/>
	                            </lu> 
				    <b pos="1"/>
				    <lu>   
					    <clip pos="3" side="tl" part="whole"/> 
				    </lu> 
				    <b pos="2"/> 
				    <lu>   
					    <clip pos="4" side="tl" part="lemh"/> 
					    <clip pos="4" side="tl" part="a_nom"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 		
			    </chunk>
		    </out>
	    </action>
    </rule>
    
    <rule comment="REGRA: DET NOM BE ADV NUM NOM1 OLD -> DET NOM TER ADV NUM NOM1 (The zoos are almost 300 years old - Os zoolóxicos teñen case 300 anos)"> 
    <!--necesita revisión, un pouco de apaño-->
	    <pattern>
		    <pattern-item n="det"/>		    
		    <pattern-item n="nomcomu"/>
		    <pattern-item n="be"/>
		    <pattern-item n="adv"/>	
		    <pattern-item n="num"/>
		    <pattern-item n="yearmonth"/>
		    <pattern-item n="old"/>
	    </pattern>
	    <action>
		    <call-macro n="tipus_verbs">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="2"/>
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="6"/>
			    <with-param pos="5"/>
		    </call-macro>
		    <call-macro n="million">
			    <with-param pos="5"/>
		    </call-macro>
		    <call-macro n="flexio_numerals">
			    <with-param pos="5"/>
			    <with-param pos="6"/>
		    </call-macro>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="2"/>
		    </call-macro>
		    <let>
			    <clip pos="3" side="tl" part="lem"/>
			    <lit v="ter"/>
		    </let>
		    <let>
			    <clip pos="3" side="tl" part="a_verb"/>
			    <lit-tag v="vblex"/>
		    </let>
		    <choose>
			    <when>
				    <test>
					    <equal>
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="one"/>
					    </equal>
				    </test>
				    <let>
					    <clip pos="6" side="tl" part="nbr"/>
					    <lit-tag v="sg"/>
				    </let>
			    </when>
		    </choose>
		    <out> 
			    <chunk name="det_nom_be_num_yearold" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SN.UNDET"/></tag>
					    <!--<tag><var n="gen_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>-->
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
				    </tags>
				    <lu>
					    <clip pos="1" side="tl" part="lem"/> 
					    <clip pos="1" side="tl" part="a_det"/>
					    <clip pos="2" side="tl" part="gen"/>
					    <clip pos="1" side="tl" part="nbr"/>
				    </lu> 
				    <b pos="1"/>    
				    <lu>
					    <clip pos="2" side="tl" part="lemh"/> 
					    <clip pos="2" side="tl" part="a_nom"/>
					    <clip pos="2" side="tl" part="gen"/>
					    <clip pos="2" side="tl" part="nbr"/>
					    <clip pos="2" side="tl" part="lemq"/> 
				    </lu> 
				    <b pos="2"/>
				    <lu>   
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="4"/>
					    <lit-tag v="p3"/>
					    <clip pos="2" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu> 
				    <b pos="3"/>
				    <lu>   
					    <clip pos="4" side="tl" part="whole"/> 
				    </lu> 
				    <b pos="4"/>
				    <lu>   
					    <clip pos="5" side="tl" part="whole"/> 
				    </lu> 
				    <b pos="5"/> 
				    <lu>   
					    <clip pos="6" side="tl" part="lemh"/> 
					    <clip pos="6" side="tl" part="a_nom"/>
					    <clip pos="6" side="tl" part="gen"/>
					    <clip pos="6" side="tl" part="nbr"/>
					    <clip pos="6" side="tl" part="lemq"/>
				    </lu> 		
			    </chunk>
		    </out>
	    </action>
    </rule>
    
    <rule comment="REGRA: PRNSUBJ BE NUM NOM1 OLD -> TER NUM NOM1 (You are almost 32 years old - Tes case 32 anos)">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="be"/>
		    <pattern-item n="adv"/>
		    <pattern-item n="num"/>
		    <pattern-item n="yearmonth"/>
		    <pattern-item n="old"/>
	    </pattern>
	    <action>
		    <call-macro n="tipus_verbs">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="5"/>
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="million">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="flexio_numerals">
			    <with-param pos="4"/>
			    <with-param pos="5"/>
		    </call-macro>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>
		    <let>
			    <clip pos="2" side="tl" part="lem"/>
			    <lit v="ter"/>
		    </let>
		    <let>
			    <clip pos="2" side="tl" part="a_verb"/>
			    <lit-tag v="vblex"/>
		    </let>
		    <choose>
			    <when>
				    <test>
					    <equal>
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="one"/>
					    </equal>
				    </test>
				    <let>
					    <clip pos="5" side="tl" part="nbr"/>
					    <lit-tag v="sg"/>
				    </let>
			    </when>
		    </choose>
		    <choose>
			    <when>
				    <test>
					    <not>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="one"/>
						    </equal>
					    </not>
				    </test>
				    <let>
					    <clip pos="5" side="tl" part="nbr"/>
					    <lit-tag v="pl"/>
				    </let>
			    </when>
		    </choose>
		    <out> 
			    <chunk name="be_num_yearold" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
				    </tags>
				    <lu>   
					    <clip pos="2" side="tl" part="lemh"/>
					    <clip pos="2" side="tl" part="a_verb"/>
					    <lit-tag v="3"/>
					    <clip pos="1" side="tl" part="pers"/>
					    <clip pos="1" side="tl" part="nbr"/>
					    <clip pos="2" side="tl" part="lemq"/>
				    </lu> 
				    <b pos="1"/>
				    <lu>   
					    <clip pos="3" side="tl" part="whole"/> 
				    </lu> 
				    <b pos="2"/>
				    <lu>   
					    <clip pos="4" side="tl" part="whole"/> 
				    </lu> 
				    <b pos="3"/> 
				    <lu>   
					    <clip pos="5" side="tl" part="lemh"/> 
					    <clip pos="5" side="tl" part="a_nom"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
					    <clip pos="5" side="tl" part="lemq"/>
				    </lu> 		
			    </chunk>
		    </out>
	    </action>
    </rule>
       
    <rule comment="REGRA: DET NOM TURN NUM NOM1 OLD -> DET NOM cumprir NUM NOM1 (The zoos turned 300 years old - Os zoolóxicos cumpriron 300 anos)"> <!--necesita revisión, un pouco de apaño-->
	    <pattern>
		    <pattern-item n="det"/>		    
		    <pattern-item n="nomcomu"/>
		    <pattern-item n="turn"/>
		    <pattern-item n="num"/>
		    <pattern-item n="yearmonth"/>
		    <pattern-item n="old"/>
	    </pattern>
	    <action>
		    <call-macro n="tipus_verbs">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="2"/>
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="5"/>
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="million">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="flexio_numerals">
			    <with-param pos="4"/>
			    <with-param pos="5"/>
		    </call-macro>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="2"/>
		    </call-macro>
		    <let>
			    <clip pos="3" side="tl" part="lem"/>
			    <lit v="cumprir"/>
		    </let>
		    <choose>
			    <when>
				    <test>
					    <equal>
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="one"/>
					    </equal>
				    </test>
				    <let>
					    <clip pos="5" side="tl" part="nbr"/>
					    <lit-tag v="sg"/>
				    </let>
			    </when>
		    </choose>
		    <out> 
			    <chunk name="det_nom_turn_num_yearold" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SN.UNDET"/></tag>
					    <!--<tag><var n="gen_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>-->
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
				    </tags>
				    <lu>
					    <clip pos="1" side="tl" part="lem"/> 
					    <clip pos="1" side="tl" part="a_det"/>
					    <clip pos="2" side="tl" part="gen"/>
					    <clip pos="1" side="tl" part="nbr"/>
				    </lu> 
				    <b pos="1"/>    
				    <lu>
					    <clip pos="2" side="tl" part="lemh"/> 
					    <clip pos="2" side="tl" part="a_nom"/>
					    <clip pos="2" side="tl" part="gen"/>
					    <clip pos="2" side="tl" part="nbr"/>
					    <clip pos="2" side="tl" part="lemq"/> 
				    </lu> 
				    <b pos="2"/>
				    <lu>   
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="4"/>
					    <lit-tag v="p3"/>
					    <clip pos="2" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu> 
				    <b pos="3"/>
				    <lu>   
					    <clip pos="4" side="tl" part="whole"/> 
				    </lu> 
				    <b pos="4"/> 
				    <lu>   
					    <clip pos="5" side="tl" part="lemh"/> 
					    <clip pos="5" side="tl" part="a_nom"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
					    <clip pos="5" side="tl" part="lemq"/>
				    </lu> 		
			    </chunk>
		    </out>
	    </action>
    </rule>
    
    
    <rule comment="REGRA: DET NOM BE NUM NOM1 OLD -> DET NOM TER NUM NOM1 (The zoos are 300 years old - Os zoolóxicos teñen 300 anos)">
    <!--necesita revisión, un pouco de apaño-->
	    <pattern>
		    <pattern-item n="det"/>		    
		    <pattern-item n="nomcomu"/>
		    <pattern-item n="be"/>
		    <pattern-item n="num"/>
		    <pattern-item n="yearmonth"/>
		    <pattern-item n="old"/>
	    </pattern>
	    <action>
		    <call-macro n="tipus_verbs">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="2"/>
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="5"/>
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="million">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="flexio_numerals">
			    <with-param pos="4"/>
			    <with-param pos="5"/>
		    </call-macro>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="2"/>
	    	   </call-macro>
		    <let>
			    <clip pos="3" side="tl" part="lem"/>
			    <lit v="ter"/>
		    </let>
		    <let>
			    <clip pos="3" side="tl" part="a_verb"/>
			    <lit-tag v="vblex"/>
		    </let>
		    <choose>
			    <when>
				    <test>
					    <equal>
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="one"/>
					    </equal>
				    </test>
				    <let>
					    <clip pos="5" side="tl" part="nbr"/>
					    <lit-tag v="sg"/>
				    </let>
			    </when>
		    </choose>
		    <out> 
			    <chunk name="det_nom_be_num_yearold" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SN.UNDET"/></tag>
					    <!--<tag><var n="gen_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>-->
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
				    </tags>
				    <lu>
					    <clip pos="1" side="tl" part="lem"/> 
					    <clip pos="1" side="tl" part="a_det"/>
					    <clip pos="2" side="tl" part="gen"/>
					    <clip pos="1" side="tl" part="nbr"/>
	                            </lu> 
				    <b pos="1"/>    
				    <lu>
					    <clip pos="2" side="tl" part="lemh"/> 
					    <clip pos="2" side="tl" part="a_nom"/>
					    <clip pos="2" side="tl" part="gen"/>
					    <clip pos="2" side="tl" part="nbr"/>
	      				    <clip pos="2" side="tl" part="lemq"/> 
				    </lu> 
				    <b pos="2"/>
				    <lu>   
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="4"/>
					    <lit-tag v="p3"/>
					    <clip pos="2" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu> 
				    <b pos="3"/>
				    <lu>   
					    <clip pos="4" side="tl" part="whole"/> 
				    </lu> 
				    <b pos="4"/> 
				    <lu>   
					    <clip pos="5" side="tl" part="lemh"/> 
					    <clip pos="5" side="tl" part="a_nom"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
					    <clip pos="5" side="tl" part="lemq"/>
				    </lu> 		
			    </chunk>
		    </out>
	    </action>
    </rule>
    
    <rule comment="REGRA: NOM TURN NUM NOM1 OLD -> NOM cumprir NUM NOM1 (Zoos turned 300 years old - Os zoolóxicos cumpriron 300 anos)">
	    <pattern>
		    <pattern-item n="nom"/>
		    <pattern-item n="turn"/>
		    <pattern-item n="num"/>
		    <pattern-item n="yearmonth"/>
		    <pattern-item n="old"/>
	    </pattern>
	    <action>
		    <call-macro n="tipus_verbs">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="4"/>
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="million">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="flexio_numerals">
			    <with-param pos="3"/>
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>
		    <let>
			    <clip pos="2" side="tl" part="lem"/>
			    <lit v="cumprir"/>
		    </let>
		    <choose>
			    <when>
				    <test>
					    <equal>
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="one"/>
					    </equal>
				    </test>
				    <let>
					    <clip pos="4" side="tl" part="nbr"/>
					    <lit-tag v="sg"/>
				    </let>
			    </when>
		    </choose>
		    <choose>
			    <when>
				    <test>
					    <not>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="one"/>
						    </equal>
					    </not>
				    </test>
				    <let>
					    <clip pos="4" side="tl" part="nbr"/>
					    <lit-tag v="pl"/>
				    </let>
			    </when>
		    </choose>
		    <choose>
			    <when>
				    <test>
					    <equal>
						    <clip pos="1" side="sl" part="a_nom"/>
						    <lit-tag v="n"/>
					    </equal>
				    </test>
				    <out> 
					    <chunk name="nom_turn_num_yearold" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SN.UNDET"/></tag>
							    <tag><var n="tipus_verb"/></tag>
							    <tag><var n="temps_chunk"/></tag>
						    </tags>
						    <lu>
							    <lit v="o"/>
							    <lit-tag v="det.def"/>
							    <clip pos="1" side="tl" part="gen"/>
							    <clip pos="1" side="tl" part="nbr"/>
						    </lu>
						    <b pos="1"/>    
						    <lu>   
							    <clip pos="1" side="tl" part="whole"/> 
						    </lu> 
						    <b pos="2"/>
						    <lu>   
							    <clip pos="2" side="tl" part="lemh"/>
							    <clip pos="2" side="tl" part="a_verb"/>
							    <lit-tag v="4"/>
							    <lit-tag v="p3"/>
							    <clip pos="1" side="tl" part="nbr"/>
							    <clip pos="2" side="tl" part="lemq"/>
						    </lu> 
						    <b pos="3"/>
						    <lu>   
							    <clip pos="3" side="tl" part="whole"/> 
						    </lu> 
						    <b pos="4"/> 
						    <lu>   
							    <clip pos="4" side="tl" part="lemh"/> 
							    <clip pos="4" side="tl" part="a_nom"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
							    <clip pos="4" side="tl" part="lemq"/>
						    </lu> 		
					    </chunk>
				    </out>
			    </when>
			    <otherwise>
				    <out> 
					    <chunk name="nom_be_num_yearold" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SN.UNDET"/></tag>
							    <tag><var n="tipus_verb"/></tag>
							    <tag><var n="temps_chunk"/></tag>
						    </tags>
						    <lu>   
							    <clip pos="1" side="tl" part="whole"/> 
						    </lu> 
						    <b pos="1"/>
						    <lu>   
							    <clip pos="2" side="tl" part="lemh"/>
							    <clip pos="2" side="tl" part="a_verb"/>
							    <lit-tag v="4"/>
							    <lit-tag v="p3"/>
							    <clip pos="1" side="tl" part="nbr"/>
							    <clip pos="2" side="tl" part="lemq"/>
						    </lu> 
						    <b pos="2"/>
						    <lu>   
							    <clip pos="3" side="tl" part="whole"/> 
						    </lu> 
						    <b pos="3"/> 
						    <lu>   
							    <clip pos="4" side="tl" part="lemh"/> 
							    <clip pos="4" side="tl" part="a_nom"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
							    <clip pos="4" side="tl" part="lemq"/>
						    </lu> 		
					    </chunk>
				    </out>
			    </otherwise>
		    </choose>
	    </action>
    </rule>
    
    <rule comment="REGRA: NOM BE ADV NUM NOM1 OLD -> NOM TER ADV NUM NOM1 (Zoos are almost 300 years old - Os zoolóxicos teñen case 300 anos)">
	    <pattern>
		    <pattern-item n="nom"/>
		    <pattern-item n="be"/>
		    <pattern-item n="adv"/>
		    <pattern-item n="num"/>
		    <pattern-item n="yearmonth"/>
		    <pattern-item n="old"/>
	    </pattern>
	    <action>
		    <call-macro n="tipus_verbs">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="5"/>
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="million">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="flexio_numerals">
			    <with-param pos="4"/>
			    <with-param pos="5"/>
		    </call-macro>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>
		    <let>
			    <clip pos="2" side="tl" part="lem"/>
			    <lit v="ter"/>
		    </let>
		    <let>
			    <clip pos="2" side="tl" part="a_verb"/>
			    <lit-tag v="vblex"/>
		    </let>
		    <choose>
			    <when>
				    <test>
					    <equal>
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="one"/>
					    </equal>
				    </test>
				    <let>
					    <clip pos="5" side="tl" part="nbr"/>
					    <lit-tag v="sg"/>
				    </let>
			    </when>
		    </choose>
		    <choose>
			    <when>
				    <test>
					    <not>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="one"/>
						    </equal>
					    </not>
				    </test>
				    <let>
					    <clip pos="5" side="tl" part="nbr"/>
					    <lit-tag v="pl"/>
				    </let>
			    </when>
		    </choose>
		    <choose>
			    <when>
				    <test>
					    <equal>
						    <clip pos="1" side="sl" part="a_nom"/>
						    <lit-tag v="n"/>
					    </equal>
				    </test>
				    <out> 
					    <chunk name="nom_be_num_yearold" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SN.UNDET"/></tag>
							    <tag><var n="tipus_verb"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="gen_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
						    <lu>
						      <lit v="o"/>
						      <lit-tag v="det.def"/>
						      <lit-tag v="5"/>
						      <lit-tag v="6"/>
						    </lu>
							    <b pos="1"/>    
						    <lu>   
							    <clip pos="1" side="tl" part="lemh"/> 
							    <clip pos="1" side="tl" part="a_nom"/>
							    <lit-tag v="5"/>
							    <lit-tag v="6"/>
							    <clip pos="1" side="tl" part="lemq"/>
						    </lu> 
						    <b pos="2"/>
						    <lu>   
							    <clip pos="2" side="tl" part="lemh"/>
							    <clip pos="2" side="tl" part="a_verb"/>
							    <lit-tag v="4"/>
							    <lit-tag v="p3"/>
							    <clip pos="1" side="tl" part="nbr"/>
							    <clip pos="2" side="tl" part="lemq"/>
						    </lu> 
						    <b pos="3"/>
						    <lu>   
							    <clip pos="3" side="tl" part="whole"/> 
						    </lu> 
						    <b pos="4"/>
						    <lu>   
							    <clip pos="4" side="tl" part="whole"/> 
						    </lu> 
						    <b pos="5"/> 
						    <lu>   
							    <clip pos="5" side="tl" part="lemh"/> 
							    <clip pos="5" side="tl" part="a_nom"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
							    <clip pos="5" side="tl" part="lemq"/>
						    </lu> 		
					    </chunk>
				    </out>
			    </when>
			    <otherwise>
				    <out> 
					    <chunk name="nom_be_num_yearold" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SN.UNDET"/></tag>
							    <tag><var n="tipus_verb"/></tag>
							    <tag><var n="temps_chunk"/></tag>
						    </tags>
						    <lu>   
							    <clip pos="1" side="tl" part="whole"/> 
						    </lu> 
						    <b pos="1"/>
						    <lu>   
							    <clip pos="2" side="tl" part="lemh"/>
							    <clip pos="2" side="tl" part="a_verb"/>
							    <lit-tag v="4"/>
							    <lit-tag v="p3"/>
							    <clip pos="1" side="tl" part="nbr"/>
							    <clip pos="2" side="tl" part="lemq"/>
						    </lu> 
						    <b pos="2"/>
						    <lu>   
							    <clip pos="3" side="tl" part="whole"/> 
						    </lu> 
						    <b pos="3"/>
						    <lu>   
							    <clip pos="4" side="tl" part="whole"/> 
						    </lu> 
						    <b pos="4"/> 
						    <lu>   
							    <clip pos="5" side="tl" part="lemh"/> 
							    <clip pos="5" side="tl" part="a_nom"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
							    <clip pos="5" side="tl" part="lemq"/>
						    </lu> 		
					    </chunk>
				    </out>
			    </otherwise>
		    </choose>
	    </action>
    </rule>
    
    <rule comment="REGRA: NOM BE NUM NOM1 OLD -> NOM TER NUM NOM1 (Zoos are 300 years old - Os zoolóxicos teñen 300 anos)">
	    <pattern>
		    <pattern-item n="nom"/>
		    <pattern-item n="be"/>
		    <pattern-item n="num"/>
		    <pattern-item n="yearmonth"/>
		    <pattern-item n="old"/>
	    </pattern>
	    <action>
		    <call-macro n="tipus_verbs">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="4"/>
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="million">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="flexio_numerals">
			    <with-param pos="3"/>
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>
		    <let>
			    <clip pos="2" side="tl" part="lem"/>
			    <lit v="ter"/>
		    </let>
		    <let>
			    <clip pos="2" side="tl" part="a_verb"/>
			    <lit-tag v="vblex"/>
		    </let>
		    <choose>
			    <when>
				    <test>
					    <equal>
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="one"/>
					    </equal>
				    </test>
				    <let>
					    <clip pos="4" side="tl" part="nbr"/>
					    <lit-tag v="sg"/>
				    </let>
			    </when>
		    </choose>
		    <choose>
			    <when>
				    <test>
					    <not>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="one"/>
						    </equal>
					    </not>
				    </test>
				    <let>
					    <clip pos="4" side="tl" part="nbr"/>
					    <lit-tag v="pl"/>
				    </let>
			    </when>
		    </choose>
		    <choose>
			    <when>
				    <test>
					    <equal>
						    <clip pos="1" side="sl" part="a_nom"/>
						    <lit-tag v="n"/>
					    </equal>
				    </test>
				    <out> 
					    <chunk name="nom_be_num_yearold" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SN.UNDET"/></tag>
							    <tag><var n="tipus_verb"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="gen_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
						    <lu>
						      <lit v="o"/>
						      <lit-tag v="det.def"/>
						      <lit-tag v="5"/>
						      <lit-tag v="6"/>
						    </lu>
							    <b pos="1"/>    
						    <lu>   
							    <clip pos="1" side="tl" part="lemh"/> 
							    <clip pos="1" side="tl" part="a_nom"/>
							    <lit-tag v="5"/>
							    <lit-tag v="6"/>
							    <clip pos="1" side="tl" part="lemq"/>
						    </lu> 
						    <b pos="2"/>
						    <lu>   
							    <clip pos="2" side="tl" part="lemh"/>
							    <clip pos="2" side="tl" part="a_verb"/>
							    <lit-tag v="4"/>
							    <lit-tag v="p3"/>
							    <clip pos="1" side="tl" part="nbr"/>
							    <clip pos="2" side="tl" part="lemq"/>
						    </lu> 
						    <b pos="3"/>
						    <lu>   
							    <clip pos="3" side="tl" part="whole"/> 
						    </lu> 
						    <b pos="4"/> 
						    <lu>   
							    <clip pos="4" side="tl" part="lemh"/> 
							    <clip pos="4" side="tl" part="a_nom"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
							    <clip pos="4" side="tl" part="lemq"/>
						    </lu> 		
					    </chunk>
		    </out>
			    </when>
		    <otherwise>
		    <out> 
			    <chunk name="nom_be_num_yearold" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SN.UNDET"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
				   </tags>
				    <lu>   
					    <clip pos="1" side="tl" part="whole"/> 
				    </lu> 
				    <b pos="1"/>
				    <lu>   
					    <clip pos="2" side="tl" part="lemh"/>
					    <clip pos="2" side="tl" part="a_verb"/>
					    <lit-tag v="4"/>
					    <lit-tag v="p3"/>
					    <clip pos="1" side="tl" part="nbr"/>
					    <clip pos="2" side="tl" part="lemq"/>
				    </lu> 
				    <b pos="2"/>
				    <lu>   
					    <clip pos="3" side="tl" part="whole"/> 
				    </lu> 
				    <b pos="3"/> 
				    <lu>   
					    <clip pos="4" side="tl" part="lemh"/> 
					    <clip pos="4" side="tl" part="a_nom"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 		
			    </chunk>
		    </out>
	    </otherwise>
	    </choose>
	    </action>
    </rule>
    
    <rule comment="earlier/later this week > a principios/finais desta semana">
	    <pattern>
		    <pattern-item n="earlierlater"/>
		    <pattern-item n="thisthat"/>
		    <pattern-item n="tempo"/>
	    </pattern>
	    <action>
	      <call-macro n="firstWord">
		      <with-param pos="1"/>
	      </call-macro>
	      <choose>
		<when>
		    <test>
			    <equal>
				    <clip pos="1" side="sl" part="lem"/>
				    <lit v="early"/>
			    </equal>
		    </test>
		    <out> 
			    <chunk name="adv_this_nom" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="PREP"/></tag>
				    </tags>
				    <lu>
					    <lit v="a"/>
					    <lit-tag v="pr"/>
				    </lu>
				    <b/>
				    <lu>
					    <lit v="principio"/>
					    <lit-tag v="n.m.pl"/>
				    </lu>
				    <b/>
				    <lu>
					    <lit v="de"/>
					    <lit-tag v="pr"/>
				    </lu>
				    <b/>
				    <lu>
					    <lit v="este"/>
					    <lit-tag v="det.dem"/>
					    <clip pos="3" side="tl" part="gen"/>
					    <clip pos="3" side="tl" part="nbr"/>
				    </lu>
				    <b/>
				    <lu> 
					    <clip pos="3" side="tl" part="lemh"/> 
					    <clip pos="3" side="tl" part="a_nom"/>
					    <clip pos="3" side="tl" part="gen"/>
					    <clip pos="3" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>  
				    </lu> 
			    </chunk>
		    </out>
	      </when>
	      <otherwise>
		  <out> 
		    <chunk name="adv_this_nom" case="caseFirstWord">
		      <tags>
			      <tag><lit-tag v="PREP"/></tag>
		      </tags>
		      <lu>
			      <lit v="a"/>
			      <lit-tag v="pr"/>
		      </lu>
		      <b/>
		      <lu>
			      <lit v="final"/>
			      <lit-tag v="n.mf.pl"/>
		      </lu>
		      <b/>
			  <lu>
				  <lit v="de"/>
				  <lit-tag v="pr"/>
			  </lu>
		      <b/>
			  <lu>
				  <lit v="este"/>
				  <lit-tag v="det.dem"/>
				  <clip pos="3" side="tl" part="gen"/>
				  <clip pos="3" side="tl" part="nbr"/>
			  </lu>
			<b/>
			  <lu> 
				  <clip pos="3" side="tl" part="lemh"/> 
				  <clip pos="3" side="tl" part="a_nom"/>
				  <clip pos="3" side="tl" part="gen"/>
				  <clip pos="3" side="tl" part="nbr"/>
				  <clip pos="3" side="tl" part="lemq"/>  
			  </lu> 
		    </chunk>
		  </out>
	      </otherwise>
	    </choose>
	 </action>
    </rule>
    
    
  <rule comment="REGRA: prnsubj vblike: She likes -> Gosta">
      <pattern>
	      <pattern-item n="prnsubj"/>
	      <pattern-item n="vblike"/>
      </pattern>
      <action>    
	      <call-macro n="firstWord">
		      <with-param pos="1"/>
	      </call-macro>	
	      <call-macro n="tipus_verbs">
		      <with-param pos="2"/>
	      </call-macro>
	      <call-macro n="conj_verb1">
		      <with-param pos="2"/>
	      </call-macro>
	      <call-macro n="passa_inf_a_pres">
		      <with-param pos="2"/>
	      </call-macro>
	      <call-macro n="elimina_GDND">
		      <with-param pos="1"/>
	      </call-macro>
	      <out>
		      <chunk namefrom="lema_SV" case="caseFirstWord">
			      <tags>	       
				  <tag><lit-tag v="SV"/></tag>
				  <tag><var n="tipus_verb"/></tag>
				  <tag><var n="temps_chunk"/></tag>
			      </tags> 
				<lu>
				  <get-case-from pos="1"> 
					<clip pos="2" side="tl" part="lemh"/>
				</get-case-from>
					<clip pos="2" side="tl" part="a_verb"/>
					<lit-tag v="3"/>
					<clip pos="1" side="tl" part="pers"/>
					<clip pos="1" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>
		      </chunk>
	      </out>
      </action>
    </rule>

    <rule comment="REGRA: prnsubj vblike+clítico: She likes them -> Gústanlle">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="probj"/>
	    </pattern>
	    <action>    
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="2"/>
		   </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <let>
			<var n="lema_SV"/><!--coloca '_enc' no nome do lema_sv atribuído pola macro conj_verb1 -->
			<concat>
				<var n="lema_SV"/>
				<lit v="_enc"/>	
			</concat>
		    </let>
		    <choose>
		    <when>
		      <test>
			<and>
			  <equal>
			    <clip pos="1" side="tl" part="pers"/>
			    <lit-tag v="p2"/>
			  </equal>
			  <equal>
			    <clip pos="1" side="tl" part="nbr"/>
			    <lit-tag v="sg"/>
			  </equal>
			</and>
		      </test>
			<out>
			  <chunk namefrom="lema_SV" case="caseFirstWord">
			      <tags>	       
				  <tag><lit-tag v="SV"/></tag>
				  <tag><var n="tipus_verb"/></tag>
				  <tag><var n="temps_chunk"/></tag>
				  <!--<tag><var n="pers_chunk"/></tag>-->
				  <!--<tag><var n="nbr_chunk"/></tag>-->
			      </tags> 
			      <mlu>
				<lu>
				<get-case-from pos="1"> 
				    <clip pos="2" side="tl" part="lemh"/>
				</get-case-from>
				    <clip pos="2" side="tl" part="a_verb"/>
				    <lit-tag v="3"/>
				    <clip pos="3" side="tl" part="pers"/>
				    <clip pos="3" side="tl" part="nbr"/>
				    <var n="pronomenc"/>
				</lu>
				<lu>
				    <lit v="prpers"/>
				    <lit-tag v="prn.enc"/>
				    <clip pos="1" side="tl" part="pers"/>
				    <lit-tag v="mf.sp"/>						    
				    <clip pos="2" side="tl" part="lemq"/>
				</lu>
			      </mlu>
			  </chunk>
		      </out>
		    </when>	
		    <otherwise>
			<out>
				<chunk namefrom="lema_SV" case="caseFirstWord">
					<tags>	       
						<tag><lit-tag v="SV"/></tag>
						<tag><var n="tipus_verb"/></tag>
						<tag><var n="temps_chunk"/></tag>
						<!--<tag><var n="pers_chunk"/></tag>-->
						<!--<tag><var n="nbr_chunk"/></tag>-->
					</tags> 
					<mlu>
						<lu>
						<get-case-from pos="1"> 
							<clip pos="2" side="tl" part="lemh"/>
						</get-case-from>
							<clip pos="2" side="tl" part="a_verb"/>
							<lit-tag v="3"/>
							<clip pos="3" side="tl" part="pers"/>
							<clip pos="3" side="tl" part="nbr"/>
							<var n="pronomenc"/>
						</lu>
						<lu>
							<lit v="prpers"/>
							<lit-tag v="prn.enc"/>
							<clip pos="1" side="tl" part="pers"/>
							<lit-tag v="mf"/>
							<clip pos="1" side="tl" part="nbr"/>	
							<clip pos="2" side="tl" part="lemq"/>
						</lu>
					</mlu>
				</chunk>
			</out>
		      </otherwise>
		    </choose>
	    </action>
    </rule>



      <rule comment="REGRA: prnsubj proclise vblike pronoun > He really likes him, Realmente lle gosta">
	<pattern>
		<pattern-item n="prnsubj"/>
		<pattern-item n="proclise"/>
		<pattern-item n="vblike"/>
		<pattern-item n="probj"/>
	</pattern>
	<action>
		<call-macro n="firstWord">
			<with-param pos="1"/>
		</call-macro>	
		<call-macro n="tipus_verbs">
			<with-param pos="3"/>
		</call-macro>
		<call-macro n="conj_verb1">
			<with-param pos="3"/>
		</call-macro>
		<call-macro n="passa_inf_a_pres">
			<with-param pos="3"/>
		</call-macro>
		<call-macro n="elimina_GDND">
			<with-param pos="1"/>
		</call-macro>
		<choose>
		  <when>
			<test>
			  <and>
			    <equal>
			      <clip pos="1" side="tl" part="pers"/>
			      <lit-tag v="p2"/>
			    </equal>
			    <equal>
			      <clip pos="1" side="tl" part="nbr"/>
			      <lit-tag v="sg"/>
			    </equal>
			  </and>
			</test>
			  <out>
			    <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>
					    <clip pos="2" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="1" side="tl" part="pers"/>
					    <lit-tag v="mf.sp"/>		
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <clip pos="4" side="tl" part="pers"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
		    </out>
		  </when>
		  <otherwise>
		    <out>
			    <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>
					    <clip pos="2" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="1" side="tl" part="pers"/>
					    <lit-tag v="mf"/>
					    <clip pos="1" side="tl" part="nbr"/>		
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <clip pos="4" side="tl" part="pers"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
		    </out>
		  </otherwise>
	    </choose>
	</action>
    </rule>
    
    <rule comment="REGRA: prnsubj vblike nompl: She likes tomatoes - Gústanlle os tomates">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="nomplural"/>
	    </pattern>
	    <action>    
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="3"/>
		    </call-macro>
		    <let>
			    <var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
			    <concat>
				    <var n="lema_SV"/>
				    <lit v="_enc"/>	
			    </concat>
		    </let>
		    <choose>
		      <when>
			    <test>
			      <and>
				<equal>
				  <clip pos="1" side="tl" part="pers"/>
				  <lit-tag v="p2"/>
				</equal>
				<equal>
				  <clip pos="1" side="tl" part="nbr"/>
				  <lit-tag v="sg"/>
				</equal>
			      </and>
			    </test>
			    <out>
				<chunk namefrom="lema_SV" case="caseFirstWord">
					<tags>	       
						<tag><lit-tag v="SV"/></tag>
						<tag><var n="tipus_verb"/></tag>
						<tag><var n="temps_chunk"/></tag>
						<tag><var n="pers_chunk"/></tag>
						<!--<tag><var n="nbr_chunk"/></tag>-->
					</tags> 
					<mlu>
						<lu>
							<clip pos="2" side="tl" part="lemh"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<lit-tag v="3"/>
							<lit-tag v="4"/>
							<clip pos="3" side="tl" part="nbr"/>
							<var n="pronomenc"/>
						</lu>
						<lu>
							<lit v="prpers"/>
							<lit-tag v="prn.enc"/>
							<clip pos="1" side="tl" part="pers"/>
							<lit-tag v="mf.sp"/>							
							<clip pos="2" side="tl" part="lemq"/>
						</lu>
					</mlu>
					<b/>
					<lu>
						<lit v="o"/>
						<lit-tag v="det.def"/>
						<clip pos="3" side="tl" part="gen"/>
						<clip pos="3" side="tl" part="nbr"/>
					</lu>
					<b/> 
					<lu> 
						<clip pos="3" side="tl" part="lemh"/> 
						<clip pos="3" side="tl" part="a_nom"/>
						<clip pos="3" side="tl" part="gen"/>
						<clip pos="3" side="tl" part="nbr"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu> 
				</chunk>
			</out>
		      </when>
		      <otherwise>
			<out>
				<chunk namefrom="lema_SV" case="caseFirstWord">
					<tags>	       
						<tag><lit-tag v="SV"/></tag>
						<tag><var n="tipus_verb"/></tag>
						<tag><var n="temps_chunk"/></tag>
						<tag><var n="pers_chunk"/></tag>
						<!--<tag><var n="nbr_chunk"/></tag>-->
					</tags> 
					<mlu>
						<lu>
							<clip pos="2" side="tl" part="lemh"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<lit-tag v="3"/>
							<lit-tag v="4"/>
							<clip pos="3" side="tl" part="nbr"/>
							<var n="pronomenc"/>
						</lu>
						<lu>
							<lit v="prpers"/>
							<lit-tag v="prn.enc"/>
							<clip pos="1" side="tl" part="pers"/>
							<lit-tag v="mf"/>
							<clip pos="1" side="tl" part="nbr"/>	
							<clip pos="2" side="tl" part="lemq"/>
						</lu>
					</mlu>
					<b/>
					<lu>
						<lit v="o"/>
						<lit-tag v="det.def"/>
						<clip pos="3" side="tl" part="gen"/>
						<clip pos="3" side="tl" part="nbr"/>
					</lu>
					<b/> 
					<lu> 
						<clip pos="3" side="tl" part="lemh"/> 
						<clip pos="3" side="tl" part="a_nom"/>
						<clip pos="3" side="tl" part="gen"/>
						<clip pos="3" side="tl" part="nbr"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu> 
				</chunk>
			</out>
		      </otherwise>
		  </choose>
	    </action>
    </rule>
         
    <rule comment="REGRA: prnsubj vblike adj nompl: She likes green tomatoes - Gústanlle os tomates verdes">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="adj"/>
		    <pattern-item n="nomplural"/>
	    </pattern>
	    <action>    
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="4"/>
			    <with-param pos="3"/>
		    </call-macro>
		    <let>
			    <var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
			    <concat>
				    <var n="lema_SV"/>
				    <lit v="_enc"/>	
			    </concat>
		    </let>
		    <choose>
		      <when>
			    <test>
			      <and>
				<equal>
				  <clip pos="1" side="tl" part="pers"/>
				  <lit-tag v="p2"/>
				</equal>
				<equal>
				  <clip pos="1" side="tl" part="nbr"/>
				  <lit-tag v="sg"/>
				</equal>
			      </and>
			    </test>
			    <out>
				<chunk namefrom="lema_SV" case="caseFirstWord">
					<tags>	       
						<tag><lit-tag v="SV"/></tag>
						<tag><var n="tipus_verb"/></tag>
						<tag><var n="temps_chunk"/></tag>
						<tag><var n="pers_chunk"/></tag>
						<!--<tag><var n="nbr_chunk"/></tag>-->
					</tags> 
					<mlu>
						<lu>
							<clip pos="2" side="tl" part="lemh"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<lit-tag v="3"/>
							<lit-tag v="4"/>
							<clip pos="3" side="tl" part="nbr"/>
							<var n="pronomenc"/>
						</lu>
						<lu>
							<lit v="prpers"/>
							<lit-tag v="prn.enc"/>
							<clip pos="1" side="tl" part="pers"/>
							<lit-tag v="mf.sp"/>
							<clip pos="2" side="tl" part="lemq"/>
						</lu>
					</mlu>
					<b/>
					<lu>
						<lit v="o"/>
						<lit-tag v="det.def"/>
						<clip pos="4" side="tl" part="gen"/>
						<clip pos="4" side="tl" part="nbr"/>
					</lu>
					<b/> 
					<lu> 
						<clip pos="4" side="tl" part="lemh"/> 
						<clip pos="4" side="tl" part="a_nom"/>
						<clip pos="4" side="tl" part="gen"/>
						<clip pos="4" side="tl" part="nbr"/>
						<clip pos="4" side="tl" part="lemq"/>
					</lu> 
					<b/> 
					<lu> 
						<clip pos="3" side="tl" part="lemh"/> 
						<clip pos="3" side="tl" part="a_adj"/>
						<clip pos="3" side="tl" part="gen"/>
						<clip pos="3" side="tl" part="nbr"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu> 
				</chunk>
			</out>
		      </when>
		      <otherwise>
			<out>
				<chunk namefrom="lema_SV" case="caseFirstWord">
					<tags>	       
						<tag><lit-tag v="SV"/></tag>
						<tag><var n="tipus_verb"/></tag>
						<tag><var n="temps_chunk"/></tag>
						<tag><var n="pers_chunk"/></tag>
						<!--<tag><var n="nbr_chunk"/></tag>-->
					</tags> 
					<mlu>
						<lu>
							<clip pos="2" side="tl" part="lemh"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<lit-tag v="3"/>
							<lit-tag v="4"/>
							<clip pos="3" side="tl" part="nbr"/>
							<var n="pronomenc"/>
						</lu>
						<lu>
							<lit v="prpers"/>
							<lit-tag v="prn.enc"/>
							<clip pos="1" side="tl" part="pers"/>
							<lit-tag v="mf"/>
							<clip pos="1" side="tl" part="nbr"/>	
							<clip pos="2" side="tl" part="lemq"/>
						</lu>
					</mlu>
					<b/>
					<lu>
						<lit v="o"/>
						<lit-tag v="det.def"/>
						<clip pos="4" side="tl" part="gen"/>
						<clip pos="4" side="tl" part="nbr"/>
					</lu>
					<b/> 
					<lu> 
						<clip pos="4" side="tl" part="lemh"/> 
						<clip pos="4" side="tl" part="a_nom"/>
						<clip pos="4" side="tl" part="gen"/>
						<clip pos="4" side="tl" part="nbr"/>
						<clip pos="4" side="tl" part="lemq"/>
					</lu> 
					<b/> 
					<lu> 
						<clip pos="3" side="tl" part="lemh"/> 
						<clip pos="3" side="tl" part="a_adj"/>
						<clip pos="3" side="tl" part="gen"/>
						<clip pos="3" side="tl" part="nbr"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu> 
				</chunk>
			</out>
		  </otherwise>
		</choose>
	    </action>
    </rule>
             
    <rule comment="REGRA: prnsubj vblike adj adj nompl: She likes big green tomatoes - Gústanlle os tomates verdes grandes">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="adj"/>
		    <pattern-item n="adj"/>
		    <pattern-item n="nomplural"/>
	    </pattern>
	    <action>    
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="5"/>
		    </call-macro>
		    <call-macro n="f_concord3">
			    <with-param pos="5"/>
			    <with-param pos="4"/>
			    <with-param pos="3"/>
		    </call-macro>
		    <let>
			    <var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
			    <concat>
				    <var n="lema_SV"/>
				    <lit v="_enc"/>	
			    </concat>
		    </let>
		    <choose>
		    <when>
		      <test>
			      <and>
				<equal>
				  <clip pos="1" side="tl" part="pers"/>
				  <lit-tag v="p2"/>
				</equal>
				<equal>
				  <clip pos="1" side="tl" part="nbr"/>
				  <lit-tag v="sg"/>
				</equal>
			      </and>
			    </test>
			    
		    </when>
		    <otherwise>			    
		    <out>
			    <chunk namefrom="lema_SV" case="caseFirstWord">
				    <tags>	       
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <!--<tag><var n="nbr_chunk"/></tag>-->
				    </tags> 
				    <mlu>
					    <lu>
						    <clip pos="2" side="tl" part="lemh"/>
						    <clip pos="2" side="tl" part="a_verb"/>
						    <lit-tag v="3"/>
						    <lit-tag v="4"/>
						    <clip pos="3" side="tl" part="nbr"/>
						    <var n="pronomenc"/>
					    </lu>
					    <lu>
						    <lit v="prpers"/>
						    <lit-tag v="prn.enc"/>
						    <clip pos="1" side="tl" part="pers"/>
						    <lit-tag v="mf"/>
						    <clip pos="1" side="tl" part="nbr"/>	
						    <clip pos="2" side="tl" part="lemq"/>
					    </lu>
				    </mlu>
				    <b/>
				    <lu>
					    <lit v="o"/>
					    <lit-tag v="det.def"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
				    </lu>
				    <b/> 
				    <lu> 
					    <clip pos="5" side="tl" part="lemh"/> 
					    <clip pos="5" side="tl" part="a_nom"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
					    <clip pos="5" side="tl" part="lemq"/>
				    </lu> 
				    <b/> 
				    <lu> 
					    <clip pos="4" side="tl" part="lemh"/> 
					    <clip pos="4" side="tl" part="a_adj"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 
				    <b/> 
				    <lu> 
					    <clip pos="3" side="tl" part="lemh"/> 
					    <clip pos="3" side="tl" part="a_adj"/>
					    <clip pos="3" side="tl" part="gen"/>
					    <clip pos="3" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
		      </out>
		     </otherwise>
		   </choose>
	    </action>
    </rule>
       
    <rule comment="REGRA: prnsubj vblike nompl: She likes Mary and she likes biking - Góstalle Mary e góstalle ir en bicicleta">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="nomingsg"/>
	    </pattern>
	    <action>    
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="3"/>
		    </call-macro>
		    <let>
			    <var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
			    <concat>
				    <var n="lema_SV"/>
				    <lit v="_enc"/>	
			    </concat>
		    </let>
		    <choose>
		    <when>
			    <test>
				    <equal><!--pásase o xerundio a 'inf' para tratalo como substantivo-->
					    <clip pos="3" side="sl" part="temps"/>
					    <lit-tag v="ger"/>
				    </equal>
			    </test>
		    <out>
			    <chunk namefrom="lema_SV" case="caseFirstWord">
				    <tags>	       
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <!--<tag><var n="nbr_chunk"/></tag>-->
				    </tags> 
				    <mlu>
					    <lu>
						    <clip pos="2" side="tl" part="lemh"/>
						    <clip pos="2" side="tl" part="a_verb"/>
						    <lit-tag v="3"/>
						    <lit-tag v="p3"/>
						    <lit-tag v="sg"/>
						    <var n="pronomenc"/>
					    </lu>
					    <lu>
						    <lit v="prpers"/>
						    <lit-tag v="prn.enc"/>
						    <clip pos="1" side="tl" part="pers"/>
						    <lit-tag v="mf"/>
						    <clip pos="1" side="tl" part="nbr"/>	
						    <clip pos="2" side="tl" part="lemq"/>
					    </lu>
				    </mlu>
				    <b/> 
					    <lu> 
						    <clip pos="3" side="tl" part="lemh"/> 
						    <clip pos="3" side="tl" part="a_verb"/>
						    <lit-tag v="inf"/>
						    <clip pos="3" side="tl" part="lemq"/> 
					    </lu> 
			    </chunk>
		    </out>
		   </when>
		    <when>
			<test>
			  <and>
			    <equal>
			      <clip pos="1" side="tl" part="pers"/>
			      <lit-tag v="p2"/>
			    </equal>
			    <equal>
			      <clip pos="1" side="tl" part="nbr"/>
			      <lit-tag v="sg"/>
			    </equal>
			  </and>
			</test>
			 <out>
			<chunk namefrom="lema_SV" case="caseFirstWord">
				<tags>	       
					<tag><lit-tag v="SV"/></tag>
					<tag><var n="tipus_verb"/></tag>
					<tag><var n="temps_chunk"/></tag>
					<tag><var n="pers_chunk"/></tag>
					<!--<tag><var n="nbr_chunk"/></tag>-->
				</tags> 
				<mlu>
				    <lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_verb"/>
					<lit-tag v="3"/>
					<lit-tag v="p3"/>
					<clip pos="3" side="tl" part="nbr"/>
					<var n="pronomenc"/>
				    </lu>
				    <lu>
					<lit v="prpers"/>
					<lit-tag v="prn.enc"/>
					<clip pos="1" side="tl" part="pers"/>
					<lit-tag v="mf.sp"/>
					<clip pos="2" side="tl" part="lemq"/>
				    </lu>
				</mlu>
				<b/> 
				    <lu> 
					    <clip pos="3" side="tl" part="whole"/> 
				    </lu> 
			</chunk>
		    </out>
		    </when>
		    <when>
			    <test>
				    <equal>
					    <clip pos="3" side="sl" part="a_nom"/>
					    <lit-tag v="n"/>
				    </equal>
			    </test>
		    <out>
			    <chunk namefrom="lema_SV" case="caseFirstWord">
				    <tags>	       
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <!--<tag><var n="nbr_chunk"/></tag>-->
				    </tags> 
				    <mlu>
					    <lu>
						    <clip pos="2" side="tl" part="lemh"/>
						    <clip pos="2" side="tl" part="a_verb"/>
						    <lit-tag v="3"/>
						    <lit-tag v="p3"/>
						    <lit-tag v="sg"/>
						    <var n="pronomenc"/>
					    </lu>
					    <lu>
						    <lit v="prpers"/>
						    <lit-tag v="prn.enc"/>
						    <clip pos="1" side="tl" part="pers"/>
						    <lit-tag v="mf"/>
						    <clip pos="1" side="tl" part="nbr"/>	
						    <clip pos="2" side="tl" part="lemq"/>
					    </lu>
				    </mlu>
				    <b/> 
				    	 <lu>
					    <lit v="o"/>
					    <lit-tag v="det.def"/>
					    <clip pos="3" side="tl" part="gen"/>
					    <clip pos="3" side="tl" part="nbr"/>
				    </lu>
				    <b/> 
					    <lu> 
						    <clip pos="3" side="tl" part="whole"/> 
					    </lu> 
			    </chunk>
		    </out>
		   </when>
		    <otherwise>
		    <out>
			<chunk namefrom="lema_SV" case="caseFirstWord">
				<tags>	       
					<tag><lit-tag v="SV"/></tag>
					<tag><var n="tipus_verb"/></tag>
					<tag><var n="temps_chunk"/></tag>
					<tag><var n="pers_chunk"/></tag>
					<!--<tag><var n="nbr_chunk"/></tag>-->
				</tags> 
				<mlu>
				    <lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_verb"/>
					<lit-tag v="3"/>
					<lit-tag v="p3"/>
					<clip pos="3" side="tl" part="nbr"/>
					<var n="pronomenc"/>
				    </lu>
				    <lu>
					<lit v="prpers"/>
					<lit-tag v="prn.enc"/>
					<clip pos="1" side="tl" part="pers"/>
					<lit-tag v="mf"/>
					<clip pos="1" side="tl" part="nbr"/>	
					<clip pos="2" side="tl" part="lemq"/>
				    </lu>
				</mlu>
				<b/> 
				    <lu> 
					    <clip pos="3" side="tl" part="whole"/> 
				    </lu> 
			</chunk>
		    </out>
		 </otherwise>
		</choose>
	    </action>
    </rule>
    
   <rule comment="REGRA: prnsubj proclise vblike nomplural > He really likes tomatoes, Realmente lle gostan os tomates">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="proclise"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="nomplural"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="4"/>
		    </call-macro>
		    <out>
			    <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>
					    <clip pos="2" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="1" side="tl" part="pers"/>
					    <lit-tag v="mf"/>
					    <clip pos="1" side="tl" part="nbr"/>		
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <lit-tag v="3"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu>
				    <b/>
				    <lu>
					    <lit v="o"/>
					    <lit-tag v="det.def"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
				    </lu>
				    <b/> 
				    <lu> 
					    <clip pos="4" side="tl" part="lemh"/> 
					    <clip pos="4" side="tl" part="a_nom"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
		    </out>
	    </action>
    </rule>
    
  
    <rule comment="REGRA: prnsubj proclise vblike nomingsg > She really likes Mary and she really likes biking - Realmente lle gosta Mary e realmente lle gosta ir en bicicleta">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="proclise"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="nomingsg"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="4"/>
		    </call-macro>
		    <choose>
			    <when>
				    <test>
					    <equal><!--pásase o xerundio a 'inf' para tratalo como substantivo-->
						    <clip pos="4" side="sl" part="temps"/>
						    <lit-tag v="ger"/>
					    </equal>
				    </test>
				    <out>
					    <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu> 
						    <b/>
						    <lu>
							    <lit v="prpers"/>
							    <lit-tag v="prn.pro"/>
							    <clip pos="1" side="tl" part="pers"/>
							    <lit-tag v="mf"/>
							    <clip pos="1" side="tl" part="nbr"/>		
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lemh"/>
							    <clip pos="3" side="tl" part="a_verb"/>
							    <lit-tag v="2"/>
							    <lit-tag v="3"/>
							    <lit-tag v="4"/>
							    <clip pos="3" side="tl" part="lemq"/>
						    </lu>
						    <b/>
						    <lu> 
							    <clip pos="4" side="tl" part="lemh"/> 
							    <clip pos="4" side="tl" part="a_verb"/>
							    <lit-tag v="inf"/>
							    <clip pos="4" side="tl" part="lemq"/> 
						    </lu> 
					    </chunk>
				    </out>
			    </when>
			    <when>
			    <test>
				    <equal>
					    <clip pos="4" side="sl" part="a_nom"/>
					    <lit-tag v="n"/>
				    </equal>
			    </test>
				    <out>
					    <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu> 
						    <b/>
						    <lu>
							    <lit v="prpers"/>
							    <lit-tag v="prn.pro"/>
							    <clip pos="1" side="tl" part="pers"/>
							    <lit-tag v="mf"/>
							    <clip pos="1" side="tl" part="nbr"/>		
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lemh"/>
							    <clip pos="3" side="tl" part="a_verb"/>
							    <lit-tag v="2"/>
							    <lit-tag v="3"/>
							    <lit-tag v="4"/>
							    <clip pos="3" side="tl" part="lemq"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="o"/>
							    <lit-tag v="det.def"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						     <b/> 
						    <lu> 
							     <clip pos="4" side="tl" part="whole"/> 
						    </lu> 
			    </chunk>
		    </out>
		   </when>
		   <when>
			<test>
			  <and>
			    <equal>
			      <clip pos="1" side="tl" part="pers"/>
			      <lit-tag v="p2"/>
			    </equal>
			    <equal>
			      <clip pos="1" side="tl" part="nbr"/>
			      <lit-tag v="sg"/>
			    </equal>
			  </and>
			</test>
			 <out>
			    <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>
					    <clip pos="2" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="1" side="tl" part="pers"/>
					    <lit-tag v="mf.sp"/>
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <lit-tag v="3"/>
					    <lit-tag v="4"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu>
				    <b/>
				    <lu> 
					    <clip pos="4" side="tl" part="lemh"/> 
					    <clip pos="4" side="tl" part="a_nom"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
			  </out>
			</when>
			    <otherwise>
				    <out>
					    <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu> 
						    <b/>
						    <lu>
							    <lit v="prpers"/>
							    <lit-tag v="prn.pro"/>
							    <clip pos="1" side="tl" part="pers"/>
							    <lit-tag v="mf"/>
							    <clip pos="1" side="tl" part="nbr"/>		
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lemh"/>
							    <clip pos="3" side="tl" part="a_verb"/>
							    <lit-tag v="2"/>
							    <lit-tag v="3"/>
							    <lit-tag v="4"/>
							    <clip pos="3" side="tl" part="lemq"/>
						    </lu>
						    <b/>
						    <lu> 
							    <clip pos="4" side="tl" part="lemh"/> 
							    <clip pos="4" side="tl" part="a_nom"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
							    <clip pos="4" side="tl" part="lemq"/>
						    </lu> 
					    </chunk>
				    </out>
			    </otherwise>
		    </choose>
	    </action>
    </rule>	
    
    <rule comment="REGRA: proclise prnsubj vblike pronoun > If he likes him, Se lle gosta">
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="probj"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>			 
		    <call-macro n="conj_verb1">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <choose>
		       <when>
			<test>
			  <and>
			    <equal>
			      <clip pos="2" side="tl" part="pers"/>
			      <lit-tag v="p2"/>
			    </equal>
			    <equal>
			      <clip pos="2" side="tl" part="nbr"/>
			      <lit-tag v="sg"/>
			    </equal>
			  </and>
			</test>
			  <out>
			    <chunk name="proclise_prnsubj_adv_vblike" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>   
					    <clip pos="1" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="2" side="tl" part="pers"/>
					    <lit-tag v="mf.sp"/>		
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <clip pos="4" side="tl" part="pers"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
			  </out>
			</when>
			<otherwise>
			  <out>
			    <chunk name="proclise_prnsubj_adv_vblike" case="caseFirstWord">
				    <tags>
					<tag><lit-tag v="SV"/></tag>
					<tag><var n="temps_chunk"/></tag>
					<tag><var n="pers_chunk"/></tag>
					<tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>   
					<clip pos="1" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					<lit v="prpers"/>
					<lit-tag v="prn.pro"/>
					<clip pos="2" side="tl" part="pers"/>
					<lit-tag v="mf"/>
					<clip pos="2" side="tl" part="nbr"/>		
				    </lu>
				    <b/>
				    <lu>
					<clip pos="3" side="tl" part="lemh"/>
					<clip pos="3" side="tl" part="a_verb"/>
					<lit-tag v="2"/>
					<clip pos="4" side="tl" part="pers"/>
					<clip pos="4" side="tl" part="nbr"/>
					<clip pos="3" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
			  </out>
		    </otherwise>
		  </choose>
	    </action>
    </rule>
    
     <rule comment="REGRA: proclise prnsubj adv vblike pronoun > If he really likes him, Se realmente lle gosta">
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="adv"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="probj"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>			 
		    <call-macro n="conj_verb1">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <choose>
		      <when>
			<test>
			  <and>
			    <equal>
			      <clip pos="2" side="tl" part="pers"/>
			      <lit-tag v="p2"/>
			    </equal>
			    <equal>
			      <clip pos="2" side="tl" part="nbr"/>
			      <lit-tag v="sg"/>
			    </equal>
			  </and>
			</test>
			<out>
			    <chunk name="proclise_prnsubj_adv_vblike" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>   
					<clip pos="1" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>   
					<clip pos="3" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					<lit v="prpers"/>
					<lit-tag v="prn.pro"/>
					<clip pos="2" side="tl" part="pers"/>
					<lit-tag v="mf.sp"/>
				    </lu>
				    <b/>
				    <lu>
					<clip pos="4" side="tl" part="lemh"/>
					<clip pos="4" side="tl" part="a_verb"/>
					<lit-tag v="2"/>
					<clip pos="5" side="tl" part="pers"/>
					<clip pos="5" side="tl" part="nbr"/>
					<clip pos="4" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
			  </out>
			</when>
			<otherwise>
			  <out>
			    <chunk name="proclise_prnsubj_adv_vblike" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>   
					<clip pos="1" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>   
					<clip pos="3" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					<lit v="prpers"/>
					<lit-tag v="prn.pro"/>
					<clip pos="2" side="tl" part="pers"/>
					<lit-tag v="mf"/>
					<clip pos="2" side="tl" part="nbr"/>		
				    </lu>
				    <b/>
				    <lu>
					<clip pos="4" side="tl" part="lemh"/>
					<clip pos="4" side="tl" part="a_verb"/>
					<lit-tag v="2"/>
					<clip pos="5" side="tl" part="pers"/>
					<clip pos="5" side="tl" part="nbr"/>
					<clip pos="4" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
			  </out>
		      </otherwise>
		     </choose>
	    </action>
    </rule>
    
    <rule comment="REGRA: proclise prnsubj adv vblike nomingsg > If he really likes Mary, Se realmente lle gosta Mary">
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="adv"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="nomingsg"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>			 
		    <call-macro n="conj_verb1">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="5"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <choose>
			<when>
				<test>
					<equal><!--pásase o xerundio a 'inf' para tratalo como substantivo-->
						<clip pos="5" side="sl" part="temps"/>
						<lit-tag v="ger"/>
					</equal>
				</test>
				<out>
					<chunk name="proclise_prnsubj_adv_vblike" case="caseFirstWord">
						<tags>
							<tag><lit-tag v="SV"/></tag>
							<tag><var n="temps_chunk"/></tag>
							<tag><var n="pers_chunk"/></tag>
							<tag><var n="nbr_chunk"/></tag>
						</tags>
						<lu>   
							<clip pos="1" side="tl" part="whole"/>
						</lu> 
						<b/>
						<lu>   
							<clip pos="3" side="tl" part="whole"/>
						</lu> 
						<b/>
						<lu>
							<lit v="prpers"/>
							<lit-tag v="prn.pro"/>
							<clip pos="2" side="tl" part="pers"/>
							<lit-tag v="mf"/>
							<clip pos="2" side="tl" part="nbr"/>		
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="lemh"/>
							<clip pos="4" side="tl" part="a_verb"/>
							<lit-tag v="2"/>
							<lit-tag v="3"/>
							<lit-tag v="4"/>
							<clip pos="4" side="tl" part="lemq"/>
						</lu> 
						<b/>
						<lu> 
							<clip pos="5" side="tl" part="lemh"/> 
							<clip pos="5" side="tl" part="a_verb"/>
							<lit-tag v="inf"/>
							<clip pos="5" side="tl" part="lemq"/> 
						</lu> 
					</chunk>
				</out>
			</when>
			<when>
				<test>
					<equal>
						<clip pos="5" side="sl" part="a_nom"/>
						<lit-tag v="n"/>
					</equal>
				</test>
				<out>
					<chunk name="proclise_prnsubj_adv_vblike" case="caseFirstWord">
						<tags>
							<tag><lit-tag v="SV"/></tag>
							<tag><var n="temps_chunk"/></tag>
							<tag><var n="pers_chunk"/></tag>
							<tag><var n="nbr_chunk"/></tag>
						</tags>
						<lu>   
							<clip pos="1" side="tl" part="whole"/>
						</lu> 
						<b/>
						<lu>   
							<clip pos="3" side="tl" part="whole"/>
						</lu> 
						<b/>
						<lu>
							<lit v="prpers"/>
							<lit-tag v="prn.pro"/>
							<clip pos="2" side="tl" part="pers"/>
							<lit-tag v="mf"/>
							<clip pos="2" side="tl" part="nbr"/>		
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="lemh"/>
							<clip pos="4" side="tl" part="a_verb"/>
							<lit-tag v="2"/>
							<lit-tag v="3"/>
							<lit-tag v="4"/>
							<clip pos="4" side="tl" part="lemq"/>
						</lu> 
						  <b/>
						<lu>
							<lit v="o"/>
							<lit-tag v="det.def"/>
							<clip pos="5" side="tl" part="gen"/>
							<clip pos="5" side="tl" part="nbr"/>
						</lu>
						<b/>
						<lu> 
							<clip pos="5" side="tl" part="whole"/> 
						</lu> 
					</chunk>
				</out>
			</when>			
			<when>
			  <test>
			    <and>
			      <equal>
				<clip pos="2" side="tl" part="pers"/>
				<lit-tag v="p2"/>
			      </equal>
			      <equal>
				<clip pos="2" side="tl" part="nbr"/>
				<lit-tag v="sg"/>
			      </equal>
			    </and>
			  </test>
			  <out>
			      <chunk name="proclise_prnsubj_adv_vblike" case="caseFirstWord">
				      <tags>
					      <tag><lit-tag v="SV"/></tag>
					      <tag><var n="temps_chunk"/></tag>
					      <tag><var n="pers_chunk"/></tag>
					      <tag><var n="nbr_chunk"/></tag>
				      </tags>
				      <lu>   
					      <clip pos="1" side="tl" part="whole"/>
				      </lu> 
				      <b/>
				      <lu>   
					      <clip pos="3" side="tl" part="whole"/>
				      </lu> 
				      <b/>
				      <lu>
					      <lit v="prpers"/>
					      <lit-tag v="prn.pro"/>
					      <clip pos="2" side="tl" part="pers"/>
					      <lit-tag v="mf.sp"/>
				      </lu>
				      <b/>
				      <lu>
					      <clip pos="4" side="tl" part="lemh"/>
					      <clip pos="4" side="tl" part="a_verb"/>
					      <lit-tag v="2"/>
					      <lit-tag v="3"/>
					      <lit-tag v="4"/>
					      <clip pos="4" side="tl" part="lemq"/>
				      </lu> 
				      <b/>
				      <lu> 
					      <clip pos="5" side="tl" part="lemh"/> 
					      <clip pos="5" side="tl" part="a_nom"/>
					      <clip pos="5" side="tl" part="gen"/>
					      <clip pos="5" side="tl" part="nbr"/>
					      <clip pos="5" side="tl" part="lemq"/>
				      </lu> 
			      </chunk>
			    </out>
			  </when>
			<otherwise>
				<out>
					<chunk name="proclise_prnsubj_adv_vblike" case="caseFirstWord">
						<tags>
							<tag><lit-tag v="SV"/></tag>
							<tag><var n="temps_chunk"/></tag>
							<tag><var n="pers_chunk"/></tag>
							<tag><var n="nbr_chunk"/></tag>
						</tags>
						<lu>   
							<clip pos="1" side="tl" part="whole"/>
						</lu> 
						<b/>
						<lu>   
							<clip pos="3" side="tl" part="whole"/>
						</lu> 
						<b/>
						<lu>
							<lit v="prpers"/>
							<lit-tag v="prn.pro"/>
							<clip pos="2" side="tl" part="pers"/>
							<lit-tag v="mf"/>
							<clip pos="2" side="tl" part="nbr"/>		
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="lemh"/>
							<clip pos="4" side="tl" part="a_verb"/>
							<lit-tag v="2"/>
							<lit-tag v="3"/>
							<lit-tag v="4"/>
							<clip pos="4" side="tl" part="lemq"/>
						</lu> 
						<b/>
						<lu> 
							<clip pos="5" side="tl" part="lemh"/> 
							<clip pos="5" side="tl" part="a_nom"/>
							<clip pos="5" side="tl" part="gen"/>
							<clip pos="5" side="tl" part="nbr"/>
							<clip pos="5" side="tl" part="lemq"/>
						</lu> 
					</chunk>
				</out>
			</otherwise>
		    </choose>
	    </action>
    </rule>
    
    <rule comment="REGRA: proclise prnsubj adv vblike nomplural > if he really likes cats, se realmente lle gostan os gatos">
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="adv"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="nomplural"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>			 
		    <call-macro n="conj_verb1">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="5"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <choose>
		    <when>
			<test>
			  <and>
			    <equal>
			      <clip pos="2" side="tl" part="pers"/>
			      <lit-tag v="p2"/>
			    </equal>
			    <equal>
			      <clip pos="2" side="tl" part="nbr"/>
			      <lit-tag v="sg"/>
			    </equal>
			  </and>
			</test>
			<out>
			    <chunk name="proclise_prnsubj_adv_vblike_nom" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>   
					    <clip pos="1" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>   
					    <clip pos="3" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="2" side="tl" part="pers"/>
					    <lit-tag v="mf.sp"/>
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="4" side="tl" part="lemh"/>
					    <clip pos="4" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <lit-tag v="3"/>
					    <clip pos="5" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="o"/>
					    <lit-tag v="det.def"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
				    </lu>
				    <b/> 
				    <lu> 
					    <clip pos="5" side="tl" part="lemh"/> 
					    <clip pos="5" side="tl" part="a_nom"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
					    <clip pos="5" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
			</out>
			</when>
			<otherwise>
			<out>
			    <chunk name="proclise_prnsubj_adv_vblike_nom" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>   
					    <clip pos="1" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>   
					    <clip pos="3" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="2" side="tl" part="pers"/>
					    <lit-tag v="mf"/>
					    <clip pos="2" side="tl" part="nbr"/>		
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="4" side="tl" part="lemh"/>
					    <clip pos="4" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <lit-tag v="3"/>
					    <clip pos="5" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="o"/>
					    <lit-tag v="det.def"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
				    </lu>
				    <b/> 
				    <lu> 
					    <clip pos="5" side="tl" part="lemh"/> 
					    <clip pos="5" side="tl" part="a_nom"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
					    <clip pos="5" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
			</out>
		  </otherwise>
		</choose>
	    </action>
    </rule>
    
    <rule comment="REGRA: proclise prnsubj vblike nomplural > If he likes cats, Se lle gostan os gatos">
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="nomplural"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>			 
		    <call-macro n="conj_verb1">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		     <choose>
		    <when>
			<test>
			  <and>
			    <equal>
			      <clip pos="2" side="tl" part="pers"/>
			      <lit-tag v="p2"/>
			    </equal>
			    <equal>
			      <clip pos="2" side="tl" part="nbr"/>
			      <lit-tag v="sg"/>
			    </equal>
			  </and>
			</test>
			<out>
			    <chunk name="proclise_prnsubj_vblike_nom" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>   
					    <clip pos="1" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="2" side="tl" part="pers"/>
					    <lit-tag v="mf.sp"/>					    
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <lit-tag v="3"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="o"/>
					    <lit-tag v="det.def"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
				    </lu>
				    <b/> 
				    <lu> 
					    <clip pos="4" side="tl" part="lemh"/> 
					    <clip pos="4" side="tl" part="a_nom"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 
			      </chunk>
			   </out>
			</when>
			<otherwise>
			<out>
			    <chunk name="proclise_prnsubj_vblike_nom" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>   
					    <clip pos="1" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="2" side="tl" part="pers"/>
					    <lit-tag v="mf"/>
					    <clip pos="2" side="tl" part="nbr"/>		
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <lit-tag v="3"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="o"/>
					    <lit-tag v="det.def"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
				    </lu>
				    <b/> 
				    <lu> 
					    <clip pos="4" side="tl" part="lemh"/> 
					    <clip pos="4" side="tl" part="a_nom"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 
			      </chunk>
			   </out>
			  </otherwise>
			</choose>
	    </action>
    </rule>
    
    <rule comment="REGRA: proclise prnsubj vblike nomingsg > If she likes Mary, Se lle gosta Mary">
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="nomingsg"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>			 
		    <call-macro n="conj_verb1">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <choose>
			    <when>
				    <test>
					    <equal><!--pásase o xerundio a 'inf' para tratalo como substantivo-->
						    <clip pos="4" side="sl" part="temps"/>
						    <lit-tag v="ger"/>
					    </equal>
				    </test>
				    <out>
					    <chunk name="proclise_prnsubj_vblike_nom" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
						    <lu>   
							    <clip pos="1" side="tl" part="whole"/>
						    </lu> 
						    <b/>
						    <lu>
							    <lit v="prpers"/>
							    <lit-tag v="prn.pro"/>
							    <clip pos="2" side="tl" part="pers"/>
							    <lit-tag v="mf"/>
							    <clip pos="2" side="tl" part="nbr"/>		
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lemh"/>
							    <clip pos="3" side="tl" part="a_verb"/>
							    <lit-tag v="2"/>
							    <lit-tag v="3"/>
							    <lit-tag v="4"/>
							    <clip pos="3" side="tl" part="lemq"/>
						    </lu> 
						    <b/>
						    <lu> 
								    <clip pos="4" side="tl" part="lemh"/> 
								    <clip pos="4" side="tl" part="a_verb"/>
								    <lit-tag v="inf"/>
								    <clip pos="4" side="tl" part="lemq"/> 
						    </lu> 
					    </chunk>
				      </out>
				</when>
			       <when>
				    <test>
					    <equal>
						    <clip pos="4" side="sl" part="a_nom"/>
						    <lit-tag v="n"/>
					    </equal>
				    </test>
				    <out>
					    <chunk name="proclise_prnsubj_vblike_nom" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
						    <lu>   
							    <clip pos="1" side="tl" part="whole"/>
						    </lu> 
						    <b/>
						    <lu>
							    <lit v="prpers"/>
							    <lit-tag v="prn.pro"/>
							    <clip pos="2" side="tl" part="pers"/>
							    <lit-tag v="mf"/>
							    <clip pos="2" side="tl" part="nbr"/>		
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lemh"/>
							    <clip pos="3" side="tl" part="a_verb"/>
							    <lit-tag v="2"/>
							    <lit-tag v="3"/>
							    <lit-tag v="4"/>
							    <clip pos="3" side="tl" part="lemq"/>
						    </lu> 
						        <b/>						
						    <lu>
							    <lit v="o"/>
							    <lit-tag v="det.def"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu> 
							    <clip pos="4" side="tl" part="whole"/> 
						    </lu> 
					    </chunk>
			      </out>
			    </when>
			  <when>
			  <test>
			    <and>
			      <equal>
				<clip pos="1" side="tl" part="pers"/>
				<lit-tag v="p2"/>
			      </equal>
			      <equal>
				<clip pos="1" side="tl" part="nbr"/>
				<lit-tag v="sg"/>
			      </equal>
			    </and>
			  </test>
			    <out>
			    <chunk name="proclise_prnsubj_vblike_nom" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>   
					    <clip pos="1" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="2" side="tl" part="pers"/>
					    <lit-tag v="mf.sp"/>
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <lit-tag v="3"/>
					    <lit-tag v="4"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu> 
				    <b/>
				    <lu> 
					    <clip pos="4" side="tl" part="lemh"/> 
					    <clip pos="4" side="tl" part="a_nom"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
			    </out>
			  </when>
			    <otherwise>
			     <out>
			      <chunk name="proclise_prnsubj_vblike_nom" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>   
					    <clip pos="1" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="2" side="tl" part="pers"/>
					    <lit-tag v="mf"/>
					    <clip pos="2" side="tl" part="nbr"/>		
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <lit-tag v="3"/>
					    <lit-tag v="4"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu> 
				    <b/>
				    <lu> 
					    <clip pos="4" side="tl" part="lemh"/> 
					    <clip pos="4" side="tl" part="a_nom"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
		    </out>
	    </otherwise>
	    </choose>
	    </action>
    </rule>
    
    
    <rule comment="REGRA: prnsubj vblike adj nomingsg: She likes green trade - Góstalle o comercio verde">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="adj"/>
		    <pattern-item n="nomingsg"/>
	    </pattern>
	    <action>    
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="4"/>
			    <with-param pos="3"/>
		    </call-macro>
		    <let>
			    <var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
			    <concat>
				    <var n="lema_SV"/>
				    <lit v="_enc"/>	
			    </concat>
		    </let>
		    <choose>
		    <when>
			    <test>
				    <equal>
					    <clip pos="4" side="sl" part="a_nom"/>
					    <lit-tag v="n"/>
				    </equal>
			    </test>
		    <out>
			    <chunk namefrom="lema_SV" case="caseFirstWord">
				    <tags>	       
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <!--<tag><var n="nbr_chunk"/></tag>-->
				    </tags> 
				    <mlu>
					    <lu>
						    <clip pos="2" side="tl" part="lemh"/>
						    <clip pos="2" side="tl" part="a_verb"/>
						    <lit-tag v="3"/>
						    <lit-tag v="p3"/>
						    <lit-tag v="sg"/>
						    <var n="pronomenc"/>
					    </lu>
					    <lu>
						    <lit v="prpers"/>
						    <lit-tag v="prn.enc"/>
						    <clip pos="1" side="tl" part="pers"/>
						    <lit-tag v="mf"/>
						    <clip pos="1" side="tl" part="nbr"/>	
						    <clip pos="2" side="tl" part="lemq"/>
					    </lu>
				    </mlu>
				    <b/> 
				    	 <lu>
					    <lit v="o"/>
					    <lit-tag v="det.def"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
				    </lu>
				    <b/> 
					    <lu> 
						    <clip pos="4" side="tl" part="whole"/> 
					    </lu> 
				    <b/> 
					    <lu> 
						    <clip pos="3" side="tl" part="whole"/> 
					    </lu> 
			    </chunk>
		    </out>
		   </when>
		   <when>
			  <test>
			    <and>
			      <equal>
				<clip pos="1" side="tl" part="pers"/>
				<lit-tag v="p2"/>
			      </equal>
			      <equal>
				<clip pos="1" side="tl" part="nbr"/>
				<lit-tag v="sg"/>
			      </equal>
			    </and>
			  </test>
			    <out>
			    <chunk namefrom="lema_SV" case="caseFirstWord">
				    <tags>	       
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <!--<tag><var n="nbr_chunk"/></tag>-->
				    </tags> 
				    <mlu>
					    <lu>
						    <clip pos="2" side="tl" part="lemh"/>
						    <clip pos="2" side="tl" part="a_verb"/>
						    <lit-tag v="3"/>
						    <lit-tag v="p3"/>
						    <clip pos="3" side="tl" part="nbr"/>
						    <var n="pronomenc"/>
					    </lu>
					    <lu>
						    <lit v="prpers"/>
						    <lit-tag v="prn.enc"/>
						    <clip pos="1" side="tl" part="pers"/>
						    <lit-tag v="mf.sp"/>
						    <clip pos="2" side="tl" part="lemq"/>
					    </lu>
				    </mlu>
				    <b/> 
					    <lu> 
						    <clip pos="4" side="tl" part="whole"/> 
					    </lu> 
				      <b/> 
					    <lu> 
						    <clip pos="3" side="tl" part="whole"/> 
					    </lu> 
			    </chunk>
		      </out>
		    </when>
		    <otherwise>
		    <out>
			    <chunk namefrom="lema_SV" case="caseFirstWord">
				    <tags>	       
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <!--<tag><var n="nbr_chunk"/></tag>-->
				    </tags> 
				    <mlu>
					    <lu>
						    <clip pos="2" side="tl" part="lemh"/>
						    <clip pos="2" side="tl" part="a_verb"/>
						    <lit-tag v="3"/>
						    <lit-tag v="p3"/>
						    <clip pos="3" side="tl" part="nbr"/>
						    <var n="pronomenc"/>
					    </lu>
					    <lu>
						    <lit v="prpers"/>
						    <lit-tag v="prn.enc"/>
						    <clip pos="1" side="tl" part="pers"/>
						    <lit-tag v="mf"/>
						    <clip pos="1" side="tl" part="nbr"/>	
						    <clip pos="2" side="tl" part="lemq"/>
					    </lu>
				    </mlu>
				    <b/> 
					    <lu> 
						    <clip pos="4" side="tl" part="whole"/> 
					    </lu> 
				      <b/> 
					    <lu> 
						    <clip pos="3" side="tl" part="whole"/> 
					    </lu> 
			    </chunk>
		      </out>
		  </otherwise>
	      </choose>
	    </action>
    </rule>
    
    
    <rule comment="REGRA: prnsubj vblike adj adj nomingsg: She likes green big trade - Góstalle o comercio verde grande">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="adj"/>
		    <pattern-item n="adj"/>
		    <pattern-item n="nomingsg"/>
	    </pattern>
	    <action>    
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="2"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="5"/>
		    </call-macro>
		    <call-macro n="f_concord3">
			    <with-param pos="5"/>
			    <with-param pos="4"/>
			    <with-param pos="3"/>
		    </call-macro>
		    <let>
			    <var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
			    <concat>
				    <var n="lema_SV"/>
				    <lit v="_enc"/>	
			    </concat>
		    </let>
		    <choose>
		    <when>
			    <test>
				    <equal>
					    <clip pos="5" side="sl" part="a_nom"/>
					    <lit-tag v="n"/>
				    </equal>
			    </test>
		    <out>
			    <chunk namefrom="lema_SV" case="caseFirstWord">
				    <tags>	       
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <!--<tag><var n="nbr_chunk"/></tag>-->
				    </tags> 
				    <mlu>
					    <lu>
						    <clip pos="2" side="tl" part="lemh"/>
						    <clip pos="2" side="tl" part="a_verb"/>
						    <lit-tag v="3"/>
						    <lit-tag v="p3"/>
						    <lit-tag v="sg"/>
						    <var n="pronomenc"/>
					    </lu>
					    <lu>
						    <lit v="prpers"/>
						    <lit-tag v="prn.enc"/>
						    <clip pos="1" side="tl" part="pers"/>
						    <lit-tag v="mf"/>
						    <clip pos="1" side="tl" part="nbr"/>	
						    <clip pos="2" side="tl" part="lemq"/>
					    </lu>
				    </mlu>
				    <b/> 
				    	 <lu>
					    <lit v="o"/>
					    <lit-tag v="det.def"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
				    </lu>
				    <b/> 
					    <lu> 
						    <clip pos="5" side="tl" part="whole"/> 
					    </lu> 
				    <b/> 
					    <lu> 
						    <clip pos="3" side="tl" part="whole"/> 
					    </lu>
				    <b/> 
					    <lu> 
						    <clip pos="4" side="tl" part="whole"/> 
					    </lu>
			    </chunk>
		    </out>
		   </when>
		   <when>
			  <test>
			    <and>
			      <equal>
				<clip pos="1" side="tl" part="pers"/>
				<lit-tag v="p2"/>
			      </equal>
			      <equal>
				<clip pos="1" side="tl" part="nbr"/>
				<lit-tag v="sg"/>
			      </equal>
			    </and>
			  </test>
			    <out>
			     <chunk namefrom="lema_SV" case="caseFirstWord">
				    <tags>	       
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <!--<tag><var n="nbr_chunk"/></tag>-->
				    </tags> 
				    <mlu>
					    <lu>
						    <clip pos="2" side="tl" part="lemh"/>
						    <clip pos="2" side="tl" part="a_verb"/>
						    <lit-tag v="3"/>
						    <lit-tag v="p3"/>
						    <clip pos="3" side="tl" part="nbr"/>
						    <var n="pronomenc"/>
					    </lu>
					    <lu>
						    <lit v="prpers"/>
						    <lit-tag v="prn.enc"/>
						    <clip pos="1" side="tl" part="pers"/>
						    <lit-tag v="mf.sp"/>
						    <clip pos="2" side="tl" part="lemq"/>
					    </lu>
				    </mlu>
				    <b/> 
					    <lu> 
						    <clip pos="5" side="tl" part="whole"/> 
					    </lu> 
				    <b/> 
					    <lu> 
						    <clip pos="3" side="tl" part="whole"/> 
					    </lu> 
				      <b/> 
					    <lu> 
						    <clip pos="4" side="tl" part="whole"/> 
					    </lu> 
			    </chunk>
		      </out>
		    </when>
		    <otherwise>
		    <out>
			    <chunk namefrom="lema_SV" case="caseFirstWord">
				    <tags>	       
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="tipus_verb"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <!--<tag><var n="nbr_chunk"/></tag>-->
				    </tags> 
				    <mlu>
					    <lu>
						    <clip pos="2" side="tl" part="lemh"/>
						    <clip pos="2" side="tl" part="a_verb"/>
						    <lit-tag v="3"/>
						    <lit-tag v="p3"/>
						    <clip pos="3" side="tl" part="nbr"/>
						    <var n="pronomenc"/>
					    </lu>
					    <lu>
						    <lit v="prpers"/>
						    <lit-tag v="prn.enc"/>
						    <clip pos="1" side="tl" part="pers"/>
						    <lit-tag v="mf"/>
						    <clip pos="1" side="tl" part="nbr"/>	
						    <clip pos="2" side="tl" part="lemq"/>
					    </lu>
				    </mlu>
				    <b/> 
					    <lu> 
						    <clip pos="5" side="tl" part="whole"/> 
					    </lu> 
				    <b/> 
					    <lu> 
						    <clip pos="3" side="tl" part="whole"/> 
					    </lu> 
				      <b/> 
					    <lu> 
						    <clip pos="4" side="tl" part="whole"/> 
					    </lu> 
			    </chunk>
		    </out>
			    </otherwise>
		    </choose>
	    </action>
    </rule>
    
   <rule comment="REGRA: prnsubj proclise vblike adj nomplural > He really likes green tomatoes, Realmente lle gostan os tomates verdes">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="proclise"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="adj"/>
		    <pattern-item n="nomplural"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="5"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="5"/>
			    <with-param pos="4"/>
		    </call-macro>
		    <choose>
		     <when>
			  <test>
			    <and>
			      <equal>
				<clip pos="1" side="tl" part="pers"/>
				<lit-tag v="p2"/>
			      </equal>
			      <equal>
				<clip pos="1" side="tl" part="nbr"/>
				<lit-tag v="sg"/>
			      </equal>
			    </and>
			  </test>
			    <out>
			     <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>
					    <clip pos="2" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="1" side="tl" part="pers"/>
					    <lit-tag v="mf.sp"/>
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <lit-tag v="3"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu>
				    <b/>
				    <lu>
					    <lit v="o"/>
					    <lit-tag v="det.def"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
				    </lu>
				    <b/> 
				    <lu> 
					    <clip pos="5" side="tl" part="lemh"/> 
					    <clip pos="5" side="tl" part="a_nom"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
					    <clip pos="5" side="tl" part="lemq"/>
				    </lu> 
				     <b/> 
				    <lu> 
					    <clip pos="4" side="tl" part="lemh"/> 
					    <clip pos="4" side="tl" part="a_adj"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
		      </out>
		    </when>
		    <otherwise>
		    <out>
			    <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>
					    <clip pos="2" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="1" side="tl" part="pers"/>
					    <lit-tag v="mf"/>
					    <clip pos="1" side="tl" part="nbr"/>		
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <lit-tag v="3"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu>
				    <b/>
				    <lu>
					    <lit v="o"/>
					    <lit-tag v="det.def"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
				    </lu>
				    <b/> 
				    <lu> 
					    <clip pos="5" side="tl" part="lemh"/> 
					    <clip pos="5" side="tl" part="a_nom"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
					    <clip pos="5" side="tl" part="lemq"/>
				    </lu> 
				     <b/> 
				    <lu> 
					    <clip pos="4" side="tl" part="lemh"/> 
					    <clip pos="4" side="tl" part="a_adj"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
		    </out>
		   </otherwise>
		  </choose>
	    </action>
    </rule>
    
      <rule comment="REGRA: prnsubj proclise vblike adj adj nomplural > He really likes big green tomatoes, Realmente lle gostan os tomates verdes grandes">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="proclise"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="adj"/>
		    <pattern-item n="adj"/>
		    <pattern-item n="nomplural"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="6"/>
		    </call-macro>
		    <call-macro n="f_concord3">
			    <with-param pos="6"/>
			    <with-param pos="5"/>
			    <with-param pos="4"/>
		    </call-macro>
		     <choose>
		     <when>
			  <test>
			    <and>
			      <equal>
				<clip pos="1" side="tl" part="pers"/>
				<lit-tag v="p2"/>
			      </equal>
			      <equal>
				<clip pos="1" side="tl" part="nbr"/>
				<lit-tag v="sg"/>
			      </equal>
			    </and>
			  </test>
			    <out>
			       <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>
					    <clip pos="2" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="1" side="tl" part="pers"/>
					    <lit-tag v="mf.sp"/>
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <lit-tag v="3"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu>
				    <b/>
				    <lu>
					    <lit v="o"/>
					    <lit-tag v="det.def"/>
					    <clip pos="6" side="tl" part="gen"/>
					    <clip pos="6" side="tl" part="nbr"/>
				    </lu>
				    <b/> 
				    <lu> 
					    <clip pos="6" side="tl" part="lemh"/> 
					    <clip pos="6" side="tl" part="a_nom"/>
					    <clip pos="6" side="tl" part="gen"/>
					    <clip pos="6" side="tl" part="nbr"/>
					    <clip pos="6" side="tl" part="lemq"/>
				    </lu> 
				     <b/> 
				    <lu> 
					    <clip pos="4" side="tl" part="lemh"/> 
					    <clip pos="4" side="tl" part="a_adj"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 
				    <b/> 
				    <lu> 
					    <clip pos="5" side="tl" part="lemh"/> 
					    <clip pos="5" side="tl" part="a_adj"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
					    <clip pos="5" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
		      </out>
		    </when>
		    <otherwise>
		    <out>
			    <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
				    <tags>
					    <tag><lit-tag v="SV"/></tag>
					    <tag><var n="temps_chunk"/></tag>
					    <tag><var n="pers_chunk"/></tag>
					    <tag><var n="nbr_chunk"/></tag>
				    </tags>
				    <lu>
					    <clip pos="2" side="tl" part="whole"/>
				    </lu> 
				    <b/>
				    <lu>
					    <lit v="prpers"/>
					    <lit-tag v="prn.pro"/>
					    <clip pos="1" side="tl" part="pers"/>
					    <lit-tag v="mf"/>
					    <clip pos="1" side="tl" part="nbr"/>		
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="3" side="tl" part="lemh"/>
					    <clip pos="3" side="tl" part="a_verb"/>
					    <lit-tag v="2"/>
					    <lit-tag v="3"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="3" side="tl" part="lemq"/>
				    </lu>
				    <b/>
				    <lu>
					    <lit v="o"/>
					    <lit-tag v="det.def"/>
					    <clip pos="6" side="tl" part="gen"/>
					    <clip pos="6" side="tl" part="nbr"/>
				    </lu>
				    <b/> 
				    <lu> 
					    <clip pos="6" side="tl" part="lemh"/> 
					    <clip pos="6" side="tl" part="a_nom"/>
					    <clip pos="6" side="tl" part="gen"/>
					    <clip pos="6" side="tl" part="nbr"/>
					    <clip pos="6" side="tl" part="lemq"/>
				    </lu> 
				     <b/> 
				    <lu> 
					    <clip pos="4" side="tl" part="lemh"/> 
					    <clip pos="4" side="tl" part="a_adj"/>
					    <clip pos="4" side="tl" part="gen"/>
					    <clip pos="4" side="tl" part="nbr"/>
					    <clip pos="4" side="tl" part="lemq"/>
				    </lu> 
				    <b/> 
				    <lu> 
					    <clip pos="5" side="tl" part="lemh"/> 
					    <clip pos="5" side="tl" part="a_adj"/>
					    <clip pos="5" side="tl" part="gen"/>
					    <clip pos="5" side="tl" part="nbr"/>
					    <clip pos="5" side="tl" part="lemq"/>
				    </lu> 
			    </chunk>
		    </out>
		   </otherwise>
		  </choose>
	    </action>
    </rule>
    
  
    <rule comment="REGRA: prnsubj proclise vblike nomingsg > She really likes green trade- Realmente lle gosta o comercio verde">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="proclise"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="adj"/>
		    <pattern-item n="nomingsg"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="5"/>
		    </call-macro>
		    <call-macro n="f_concord2">
			    <with-param pos="5"/>
			    <with-param pos="4"/>
		    </call-macro>
		    <choose>
			     <when>
			    <test>
				    <equal>
					    <clip pos="5" side="sl" part="a_nom"/>
					    <lit-tag v="n"/>
				    </equal>
			    </test>
				    <out>
					    <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu> 
						    <b/>
						    <lu>
							    <lit v="prpers"/>
							    <lit-tag v="prn.pro"/>
							    <clip pos="1" side="tl" part="pers"/>
							    <lit-tag v="mf"/>
							    <clip pos="1" side="tl" part="nbr"/>		
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lemh"/>
							    <clip pos="3" side="tl" part="a_verb"/>
							    <lit-tag v="2"/>
							    <lit-tag v="3"/>
							    <lit-tag v="4"/>
							    <clip pos="3" side="tl" part="lemq"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="o"/>
							    <lit-tag v="det.def"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						     <b/> 
						    <lu> 
							     <clip pos="5" side="tl" part="whole"/> 
						    </lu> 
						     <b/> 
						    <lu> 
							     <clip pos="4" side="tl" part="whole"/> 
						    </lu> 
			    </chunk>
		    </out>
		   </when>
		   <when>
			  <test>
			    <and>
			      <equal>
				<clip pos="1" side="tl" part="pers"/>
				<lit-tag v="p2"/>
			      </equal>
			      <equal>
				<clip pos="1" side="tl" part="nbr"/>
				<lit-tag v="sg"/>
			      </equal>
			    </and>
			  </test>
			    <out>
			        <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu> 
						    <b/>
						    <lu>
							    <lit v="prpers"/>
							    <lit-tag v="prn.pro"/>
							    <clip pos="1" side="tl" part="pers"/>
							    <lit-tag v="mf.sp"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lemh"/>
							    <clip pos="3" side="tl" part="a_verb"/>
							    <lit-tag v="2"/>
							    <lit-tag v="3"/>
							    <lit-tag v="4"/>
							    <clip pos="3" side="tl" part="lemq"/>
						    </lu>
						    <b/>
						    <lu> 
							    <clip pos="5" side="tl" part="lemh"/> 
							    <clip pos="5" side="tl" part="a_nom"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
							    <clip pos="5" side="tl" part="lemq"/>
						    </lu> 
						     <b/>
						    <lu> 
							    <clip pos="4" side="tl" part="lemh"/> 
							    <clip pos="4" side="tl" part="a_adj"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
							    <clip pos="4" side="tl" part="lemq"/>
						    </lu> 
					    </chunk>
		      </out>
		    </when>
			    <otherwise>
				    <out>
					    <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu> 
						    <b/>
						    <lu>
							    <lit v="prpers"/>
							    <lit-tag v="prn.pro"/>
							    <clip pos="1" side="tl" part="pers"/>
							    <lit-tag v="mf"/>
							    <clip pos="1" side="tl" part="nbr"/>		
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lemh"/>
							    <clip pos="3" side="tl" part="a_verb"/>
							    <lit-tag v="2"/>
							    <lit-tag v="3"/>
							    <lit-tag v="4"/>
							    <clip pos="3" side="tl" part="lemq"/>
						    </lu>
						    <b/>
						    <lu> 
							    <clip pos="5" side="tl" part="lemh"/> 
							    <clip pos="5" side="tl" part="a_nom"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
							    <clip pos="5" side="tl" part="lemq"/>
						    </lu> 
						     <b/>
						    <lu> 
							    <clip pos="4" side="tl" part="lemh"/> 
							    <clip pos="4" side="tl" part="a_adj"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
							    <clip pos="4" side="tl" part="lemq"/>
						    </lu> 
					    </chunk>
				    </out>
			    </otherwise>
		    </choose>
	    </action>
    </rule>	
      <rule comment="REGRA: prnsubj proclise vblike adj adj nomingsg > She really likes big green trade- Realmente lle gosta o comercio verde grande">
	    <pattern>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="proclise"/>
		    <pattern-item n="vblike"/>
		    <pattern-item n="adj"/>
		    <pattern-item n="adj"/>
		    <pattern-item n="nomingsg"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>	
		    <call-macro n="tipus_verbs">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="conj_verb1">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <call-macro n="elimina_GDND">
			    <with-param pos="6"/>
		    </call-macro>
		    <call-macro n="f_concord3">
			    <with-param pos="6"/>
			    <with-param pos="5"/>
			    <with-param pos="4"/>
		    </call-macro>
		    <choose>
			     <when>
			    <test>
				    <equal>
					    <clip pos="6" side="sl" part="a_nom"/>
					    <lit-tag v="n"/>
				    </equal>
			    </test>
				    <out>
					    <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu> 
						    <b/>
						    <lu>
							    <lit v="prpers"/>
							    <lit-tag v="prn.pro"/>
							    <clip pos="1" side="tl" part="pers"/>
							    <lit-tag v="mf"/>
							    <clip pos="1" side="tl" part="nbr"/>		
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lemh"/>
							    <clip pos="3" side="tl" part="a_verb"/>
							    <lit-tag v="2"/>
							    <lit-tag v="3"/>
							    <lit-tag v="4"/>
							    <clip pos="3" side="tl" part="lemq"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="o"/>
							    <lit-tag v="det.def"/>
							    <clip pos="6" side="tl" part="gen"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						     <b/> 
						    <lu> 
							     <clip pos="6" side="tl" part="whole"/> 
						    </lu> 
						     <b/> 
						    <lu> 
							     <clip pos="4" side="tl" part="whole"/> 
						    </lu> 
						     <b/> 
						    <lu> 
							     <clip pos="5" side="tl" part="whole"/> 
						    </lu> 
			    </chunk>
		    </out>
		   </when>
		    <when>
			  <test>
			    <and>
			      <equal>
				<clip pos="1" side="tl" part="pers"/>
				<lit-tag v="p2"/>
			      </equal>
			      <equal>
				<clip pos="1" side="tl" part="nbr"/>
				<lit-tag v="sg"/>
			      </equal>
			    </and>
			  </test>
			    <out>
			         <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu> 
						    <b/>
						    <lu>
							    <lit v="prpers"/>
							    <lit-tag v="prn.pro"/>
							    <clip pos="1" side="tl" part="pers"/>
							    <lit-tag v="mf.sp"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lemh"/>
							    <clip pos="3" side="tl" part="a_verb"/>
							    <lit-tag v="2"/>
							    <lit-tag v="3"/>
							    <lit-tag v="4"/>
							    <clip pos="3" side="tl" part="lemq"/>
						    </lu>
						    <b/>
						    <lu> 
							    <clip pos="6" side="tl" part="lemh"/> 
							    <clip pos="6" side="tl" part="a_nom"/>
							    <clip pos="6" side="tl" part="gen"/>
							    <clip pos="6" side="tl" part="nbr"/>
							    <clip pos="6" side="tl" part="lemq"/>
						    </lu> 
						     <b/>
						    <lu> 
							    <clip pos="4" side="tl" part="lemh"/> 
							    <clip pos="4" side="tl" part="a_adj"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
							    <clip pos="4" side="tl" part="lemq"/>
						    </lu>
						    <b/>
						    <lu> 
							    <clip pos="5" side="tl" part="lemh"/> 
							    <clip pos="5" side="tl" part="a_adj"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
							    <clip pos="5" side="tl" part="lemq"/>
						    </lu> 
					    </chunk>
		      </out>
		    </when>
			    <otherwise>
				    <out>
					    <chunk name="prnsubj_proclise_adv_vblike" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu> 
						    <b/>
						    <lu>
							    <lit v="prpers"/>
							    <lit-tag v="prn.pro"/>
							    <clip pos="1" side="tl" part="pers"/>
							    <lit-tag v="mf"/>
							    <clip pos="1" side="tl" part="nbr"/>		
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lemh"/>
							    <clip pos="3" side="tl" part="a_verb"/>
							    <lit-tag v="2"/>
							    <lit-tag v="3"/>
							    <lit-tag v="4"/>
							    <clip pos="3" side="tl" part="lemq"/>
						    </lu>
						    <b/>
						    <lu> 
							    <clip pos="6" side="tl" part="lemh"/> 
							    <clip pos="6" side="tl" part="a_nom"/>
							    <clip pos="6" side="tl" part="gen"/>
							    <clip pos="6" side="tl" part="nbr"/>
							    <clip pos="6" side="tl" part="lemq"/>
						    </lu> 
						     <b/>
						    <lu> 
							    <clip pos="4" side="tl" part="lemh"/> 
							    <clip pos="4" side="tl" part="a_adj"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
							    <clip pos="4" side="tl" part="lemq"/>
						    </lu>
						    <b/>
						    <lu> 
							    <clip pos="5" side="tl" part="lemh"/> 
							    <clip pos="5" side="tl" part="a_adj"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
							    <clip pos="5" side="tl" part="lemq"/>
						    </lu> 
					    </chunk>
				    </out>
			    </otherwise>
		    </choose>
	    </action>
    </rule>	    
    
    <rule comment="REGRA: proclise prnsubj vblike > where we like, onde nos gosta">
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="vblike"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>			 
		    <call-macro n="conj_verb1">
			    <with-param pos="3"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="3"/>
		    </call-macro>		    
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <choose>	
			    <when>
				    <test>
					    <not>
						    <equal caseless="yes">
							    <clip pos="2" side="sl" part="lem"/> 
							    <lit v="prpers"/>
						    </equal>
					    </not>
				    </test>
				    <out> 
					    <chunk name="proclise_prnsubj_vblike" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
					    </tags>
					    <lu>   
						    <clip pos="1" side="tl" part="whole"/>
					    </lu> 
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lemh"/>
						    <clip pos="3" side="tl" part="a_verb"/>
						    <lit-tag v="2"/>
						    <lit-tag v="3"/>
						    <lit-tag v="4"/>
						    <clip pos="3" side="tl" part="lemq"/>
			         	    </lu> 
					    <b/>
					    <lu>
						    <lit v="a"/>
						    <lit-tag v="pr"/>
					    </lu>
					    <b/>
					    <lu>   
						    <clip pos="2" side="tl" part="lem"/>  
						    <clip pos="2" side="tl" part="a_prn"/>  
						    <clip pos="2" side="tl" part="tipus_prn"/> 
						    <clip pos="2" side="tl" part="pers"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu> 
				    </chunk>
				    </out>
			    </when>	
			      <when>
			  <test>
			    <and>
			      <equal>
				<clip pos="2" side="tl" part="pers"/>
				<lit-tag v="p2"/>
			      </equal>
			      <equal>
				<clip pos="2" side="tl" part="nbr"/>
				<lit-tag v="sg"/>
			      </equal>
			    </and>
			  </test>
			  <out>  	
			      <chunk name="proclise_prnsubj_vblike" case="caseFirstWord">
					    <tags>
						    <tag><lit-tag v="SV"/></tag>
						    <tag><var n="temps_chunk"/></tag>
						    <tag><var n="pers_chunk"/></tag>
						    <tag><var n="nbr_chunk"/></tag>
					    </tags>
					    <lu>   
						    <clip pos="1" side="tl" part="whole"/>
					    </lu> 
					    <b/>
					    <lu>
						    <lit v="prpers"/>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="pers"/>
						    <lit-tag v="mf.sp"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lemh"/>
						    <clip pos="3" side="tl" part="a_verb"/>
						    <lit-tag v="2"/>
						    <lit-tag v="3"/>
						    <lit-tag v="4"/>
	      					    <clip pos="3" side="tl" part="lemq"/>
			         	    </lu> 
				    </chunk>
		      </out>
		    </when>
		      <otherwise>
			    <out>
				    <chunk name="proclise_prnsubj_vblike" case="caseFirstWord">
					    <tags>
						    <tag><lit-tag v="SV"/></tag>
						    <tag><var n="temps_chunk"/></tag>
						    <tag><var n="pers_chunk"/></tag>
						    <tag><var n="nbr_chunk"/></tag>
					    </tags>
					    <lu>   
						    <clip pos="1" side="tl" part="whole"/>
					    </lu> 
					    <b/>
					    <lu>
						    <lit v="prpers"/>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="pers"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>		
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lemh"/>
						    <clip pos="3" side="tl" part="a_verb"/>
						    <lit-tag v="2"/>
						    <lit-tag v="3"/>
						    <lit-tag v="4"/>
	      					    <clip pos="3" side="tl" part="lemq"/>
			         	    </lu> 
				    </chunk>
		             </out>
		     </otherwise>
	     </choose>
		    </action>
    </rule>
    
    <rule comment="REGRA: proclise prnsubj adv vblike > where we really like, onde realmente nos gosta">
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="prnsubj"/>
		    <pattern-item n="adv"/>
		    <pattern-item n="vblike"/>
	    </pattern>
	    <action>
		    <call-macro n="firstWord">
			    <with-param pos="1"/>
		    </call-macro>			 
		    <call-macro n="conj_verb1">
			    <with-param pos="4"/>
		    </call-macro>
		    <call-macro n="passa_inf_a_pres">
			    <with-param pos="4"/>
		    </call-macro>		    
		    <call-macro n="elimina_GDND">
			    <with-param pos="1"/>
		    </call-macro>
		    <choose>	
			    <when>
				    <test>
					    <not>
						    <equal caseless="yes">
							    <clip pos="2" side="sl" part="lem"/> 
							    <lit v="prpers"/>
						    </equal>
					    </not>
				    </test>
				    <out> 
					    <chunk name="proclise_prnsubj_vblike" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
						    <lu>   
							    <clip pos="1" side="tl" part="whole"/>
						    </lu> 
						    <b/>
						    <lu>   
							    <clip pos="3" side="tl" part="whole"/>
						    </lu> 
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="lemh"/>
							    <clip pos="4" side="tl" part="a_verb"/>
							    <lit-tag v="2"/>
							    <lit-tag v="3"/>
							    <lit-tag v="4"/>
							    <clip pos="4" side="tl" part="lemq"/>
						    </lu> 
						    <b/>
						    <lu>
							    <lit v="a"/>
							    <lit-tag v="pr"/>
						    </lu>
						    <b/>
						    <lu>   
							    <clip pos="2" side="tl" part="lem"/>  
							    <clip pos="2" side="tl" part="a_prn"/>  
							    <clip pos="2" side="tl" part="tipus_prn"/> 
							    <clip pos="2" side="tl" part="pers"/>
							    <clip pos="2" side="tl" part="gen"/>
							    <clip pos="2" side="tl" part="nbr"/>
						    </lu> 
					    </chunk>
				    </out>
			    </when>	
			        <when>
			  <test>
			    <and>
			      <equal>
				<clip pos="2" side="tl" part="pers"/>
				<lit-tag v="p2"/>
			      </equal>
			      <equal>
				<clip pos="2" side="tl" part="nbr"/>
				<lit-tag v="sg"/>
			      </equal>
			    </and>
			  </test>
			  <out>  	
			      <chunk name="proclise_prnsubj_vblike" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
						    <lu>   
							    <clip pos="1" side="tl" part="whole"/>
						    </lu> 
						    <b/>
						    <lu>   
							    <clip pos="3" side="tl" part="whole"/>
						    </lu> 
						    <b/>
						    <lu>
							    <lit v="prpers"/>
							    <lit-tag v="prn.pro"/>
							    <clip pos="2" side="tl" part="pers"/>
							    <lit-tag v="mf.sp"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="lemh"/>
							    <clip pos="4" side="tl" part="a_verb"/>
							    <lit-tag v="2"/>
							    <lit-tag v="3"/>
							    <lit-tag v="4"/>
							    <clip pos="4" side="tl" part="lemq"/>
						    </lu> 
					    </chunk>
		      </out>
		    </when>
			    <otherwise>
				    <out>
					    <chunk name="proclise_prnsubj_vblike" case="caseFirstWord">
						    <tags>
							    <tag><lit-tag v="SV"/></tag>
							    <tag><var n="temps_chunk"/></tag>
							    <tag><var n="pers_chunk"/></tag>
							    <tag><var n="nbr_chunk"/></tag>
						    </tags>
						    <lu>   
							    <clip pos="1" side="tl" part="whole"/>
						    </lu> 
						    <b/>
						    <lu>   
							    <clip pos="3" side="tl" part="whole"/>
						    </lu> 
						    <b/>
						    <lu>
							    <lit v="prpers"/>
							    <lit-tag v="prn.pro"/>
							    <clip pos="2" side="tl" part="pers"/>
							    <lit-tag v="mf"/>
							    <clip pos="2" side="tl" part="nbr"/>		
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="lemh"/>
							    <clip pos="4" side="tl" part="a_verb"/>
							    <lit-tag v="2"/>
							    <lit-tag v="3"/>
							    <lit-tag v="4"/>
							    <clip pos="4" side="tl" part="lemq"/>
						    </lu> 
					    </chunk>
				    </out>
			    </otherwise>
		    </choose>
	    </action>
    </rule>
    
      <rule comment="REGRA: two years hence">
	    <pattern>
		    <pattern-item n="num"/>
		    <pattern-item n="tempo"/>
		    <pattern-item n="hence"/>
	    </pattern>
	    <action>
	      <call-macro n="million">
		<with-param pos="1"/>
	      </call-macro>
	      <call-macro n="elimina_GDND">
		<with-param pos="2"/>
	      </call-macro> 
	      <call-macro n="f_concord2">
		<with-param pos="2"/>
		<with-param pos="1"/>
	      </call-macro>
	      <call-macro n="elimina_GDND">
		<with-param pos="1"/>
	      </call-macro> 
	      <call-macro n="firstWord">
		<with-param pos="1"/>
	      </call-macro>
		    <out> 
		      <chunk name="pr_num_nom" case="caseFirstWord">
			<tags>
				<tag><lit-tag v="SP.NUM"/></tag>
				<tag><var n="gen_chunk"/></tag>
				<tag><var n="nbr_chunk"/></tag>
			</tags>
			<lu>
				<lit v="dentro de"/>
				<lit-tag v="pr"/>
			</lu>
			<b pos="1"/>  
			<lu>   
			  <clip pos="1" side="tl" part="lem"/> 
			  <clip pos="1" side="tl" part="a_num"/> 
			  <clip pos="1" side="tl" part="gen"/> 
			  <clip pos="1" side="tl" part="nbr"/>
			</lu> 
			<b pos="2"/>
			<lu> 
			  <clip pos="2" side="tl" part="lemh"/> 
			  <clip pos="2" side="tl" part="a_nom"/> 
			  <clip pos="2" side="tl" part="gen"/>  
			  <clip pos="2" side="tl" part="nbr"/>
			  <clip pos="2" side="tl" part="lemq"/> 
			</lu> 
		      </chunk>
		    </out>
	    </action>
    </rule>
    
  <rule comment="REGRA: DET NOM hence (several years hence)"> 
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="tempo"/>
	<pattern-item n="hence"/>
      </pattern>
      <action>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="pr_det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.DET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	      <tag><var n="tipus_det"/></tag> 
	    </tags>
	    <lu>	      
	      <lit v="dentro de"/>
	      <lit-tag v="pr"/>
	    </lu>
	    <b pos="1"/>	    
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="2" side="tl" part="gen_mf"/>
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule> 
    
      <rule comment="REGRA: as many/much NOM as (as many chances as possible | as much as she can)"> 
      <pattern>
	<pattern-item n="as"/>
	<pattern-item n="manymuch"/>
	<pattern-item n="nom"/>
	<pattern-item n="as"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="pr_adv_nom_pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN.DET"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	      <tag><var n="tipus_det"/></tag>
	    </tags>
	    <lu>	      
	      <lit v="tanto"/>
	      <lit-tag v="det.qnt"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>	    
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/> 	      
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="3" side="tl" part="gen_mf"/>
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <lit v="como"/>
	      <lit-tag v="cnjadv"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule> 
   
      <rule comment="REGRA: as ADJ as (as clean as)"> 
      <pattern>
	<pattern-item n="as"/>
	<pattern-item n="adj"/>
	<pattern-item n="as"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro> 
      <choose>
	  <when>
	    <test>
		<equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="2" side="tl" part="gen"/>
	    </let>
	  </when>  
	  <when>
	    <test>
		<equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="f"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="2" side="tl" part="gen"/>
	    </let>
	  </when> 
	  <when>
	    <test>
		<equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="m"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="2" side="tl" part="gen"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </otherwise>
	</choose>     
	<out>
	  <chunk name="adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><lit-tag v="ND"/></tag>
	    </tags> 
	    <lu>	      
	      <lit v="tan"/>
	      <lit-tag v="preadv"/>
	    </lu>
	    <b pos="1"/>	    
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="2"/>
	      <lit-tag v="3"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <lit v="como"/>
	      <lit-tag v="cnjadv"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule> 
       
      <rule comment="REGRA: as ADJ as PROBJ (as clean as me)"> 
      <pattern>
	<pattern-item n="as"/>
	<pattern-item n="adj"/>
	<pattern-item n="as"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="comparatiu_adj1">
	  <with-param pos="2"/>
	</call-macro> 
      <choose>
	  <when>
	    <test>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	  </when>  
	  <when>
	    <test>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="f"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	  </when> 
	  <when>
	    <test>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="m"/>
		</equal>
	    </test>
	    <let>
	      <var n="gen_chunk"/>
	      <clip pos="1" side="tl" part="gen"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="gen_chunk"/>
	      <lit-tag v="GD"/>
	    </let>
	  </otherwise>
	</choose>     
	<out>
	  <chunk name="adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><lit-tag v="ND"/></tag>
	    </tags> 
	    <lu>	      
	      <lit v="tan"/>
	      <lit-tag v="preadv"/>
	    </lu>
	    <b pos="1"/>	    
	    <lu> 
	      <var n="adjectiu1"/>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="2"/>
	      <lit-tag v="3"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu> 
	      <lit v="como"/>
	      <lit-tag v="cnjadv"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>  
	      <clip pos="4" side="tl" part="lem"/>
	      <lit-tag v="prn.tn"/>
	      <clip pos="4" side="tl" part="pers"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr" link-to="3"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule> 
    
      <rule comment="REGRA: just a minute|second... "> 
      <pattern>
	<pattern-item n="justadv"/>
	<pattern-item n="a"/>
	<pattern-item n="tempo"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
     	<out>
	  <chunk name="adv_det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>	      
	      <lit v="só"/>
	      <lit-tag v="adv"/>
	    </lu>
	    <b pos="1"/>	    
	    <lu>	      
	      <lit v="un"/>
	      <lit-tag v="det.ind"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/> 	      
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule> 

    <rule comment="REGRA: PRONOME VERBO PRONOME">
      <pattern>
	<pattern-item n="prnsubj"/>
	<pattern-item n="verbcj"/>
	<pattern-item n="probj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="2"/>
	</call-macro>
	<let>
	  <var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
	  <concat>
	      <var n="lema_SV"/>
	      <lit v="_enc"/>	
	  </concat>
	</let>
	<out>		  
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>	       
	      <tag><lit-tag v="SV"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><var n="pers_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags> 
	    <mlu>
	      <lu>		      
		<clip pos="2" side="tl" part="lemh"/>
		<clip pos="2" side="tl" part="a_verb"/>
		<lit-tag v="3"/>
		<clip pos="1" side="sl" part="pers"/>
		<clip pos="1" side="tl" part="nbr"/>
		<var n="pronomenc"/>
	      </lu>
	      <lu>
		<clip pos="3" side="tl" part="lem"/>
		<lit-tag v="prn.enc"/>
		<clip pos="3" side="tl" part="pers"/>
		<clip pos="3" side="tl" part="gen"/>
		<clip pos="3" side="tl" part="nbr"/>
		<clip pos="2" side="tl" part="lemq"/>
	      </lu>
	    </mlu>
	  </chunk>
	</out>	
      </action>
    </rule> 
    

    <rule comment="REGRA: PRONOME VERBO">
      <pattern>
	<pattern-item n="prnsubj"/>
	<pattern-item n="verbcjsenhaber"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="tipus_verbs">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="conj_verb1">
	  <with-param pos="2"/>
	</call-macro>
	 <choose>
	  <when>
	    <test>
	      <and>
		  <equal>	    	
		    <var n="tipus_verb"/>
		    <lit-tag v="pron"/>
		  </equal>
		  <not>
		    <equal caseless="yes">	    	
		      <clip pos="1" side="sl" part="pers"/>
		      <lit-tag v="p3"/>
		    </equal>
		  </not>
	      </and>
	    </test>
	    <let>
	      <var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
	      <concat>
		  <var n="lema_SV"/>
		  <lit v="_enc"/>	
	      </concat>
	    </let>
	    <out>		  
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		  <tags>	       
		      <tag><lit-tag v="SV"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		      <tag><var n="temps_chunk"/></tag>
		      <tag><var n="pers_chunk"/></tag>
		      <tag><var n="nbr_chunk"/></tag>
		  </tags> 
		  <mlu>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <var n="temps_chunk"/>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="1" side="tl" part="nbr"/>
		      <var n="pronomenc"/>
		    </lu>
		    <lu>
		      <lit v="prpers"/>
		      <lit-tag v="prn.enc"/>
		      <clip pos="1" side="sl" part="pers"/>
		      <lit-tag v="mf"/>
		      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="lemq"/>
		     </lu>
		   </mlu>
	      </chunk>
	    </out>
	</when>
	  <when>
	    <test>
	      <and>
		  <equal>	    	
		    <var n="tipus_verb"/>
		    <lit-tag v="pron"/>
		  </equal>
		  <equal caseless="yes">	    	
		    <clip pos="1" side="sl" part="pers"/>
		    <lit-tag v="p3"/>
		  </equal>
	      </and>
	    </test>
	      <let>
		    <var n="lema_SV"/><!--coloca '_enc' no nome do lema_SV atribuído pola macro conj_verb1 -->
		    <concat>
			<var n="lema_SV"/>
			<lit v="_enc"/>	
		    </concat>
	      </let>
	      <out>		  
		<chunk namefrom="lema_SV" case="caseFirstWord">
		    <tags>	       
			<tag><lit-tag v="SV"/></tag>
			<tag><var n="tipus_verb"/></tag>
			<tag><var n="temps_chunk"/></tag>
			<tag><var n="pers_chunk"/></tag>
			<tag><var n="nbr_chunk"/></tag>
		    </tags> 
		   <mlu>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="1" side="sl" part="nbr"/>
		      <var n="pronomenc"/>
		    </lu>
		      <lu>
			<lit v="se"/>
			<lit-tag v="prn.enc.ref.p3.mf.sp"/>
			<clip pos="2" side="tl" part="lemq"/>
			</lu>
		   </mlu>
		</chunk>
	      </out>
	  </when>
	  <otherwise>
	  <choose>
	  <when>
	    <test>
	      <not>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/> 
		  <lit v="prpers"/>
		</equal>
	      </not>
	    </test>
	      <let>
		<var n="lema"/>
		<lit v="prnsubj2"/><!--lemes 'we all' etc, són subjectes però no desapareixen en el t2x. -->
	      </let>
	  </when>
	  <otherwise>	    
	      <let>
		<var n="lema"/>
		<lit v="prnsubj"/>
	      </let>
	  </otherwise>
	</choose>   	  
	    <out>
	      <chunk namefrom="lema" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
		  <tag><clip pos="1" side="tl" part="pers"/></tag>
		  <tag><clip pos="1" side="tl" part="gen"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/>  
		  <clip pos="1" side="tl" part="a_prn"/>  
		  <clip pos="1" side="tl" part="tipus_prn" link-to="2"/> 
		  <clip pos="1" side="tl" part="pers"/>
		  <clip pos="1" side="tl" part="gen" link-to="4"/>
		  <clip pos="1" side="tl" part="nbr"/>
		</lu> 
	      </chunk>
	      <b pos="1"/>
	      <chunk namefrom="lema_SV" case="caseFirstWord">
		<tags>	       
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		  <tag><var n="temps_chunk"/></tag>
		  <tag><var n="pers_chunk"/></tag>
		  <tag><var n="nbr_chunk"/></tag>
		</tags> 		
		<lu>		  
		  <var n="verbfinal"/>
		</lu>
	      </chunk>
	    </out>
	</otherwise>
	</choose>
      </action>
    </rule> 
  
 
    <rule comment="REGRA: NOM1-like NOM2 -> NOM2 estilo NOM1 (fjord-like inlets > enseadas estilo fiordo)">
      <pattern>	
	<pattern-item n="nom"/>
	<pattern-item n="guio"/>
	<pattern-item n="like"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="nom_nom_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>	
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="estilo"/>
	      <lit-tag v="n.m.sg"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGRA: DET NOM1-like NOM2 -> NOM2 estilo NOM1 (many fjord-like inlets > moitas enseadas estilo fiordo)">
      <pattern>	
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="guio"/>
	<pattern-item n="like"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
      <call-macro n="det_no">
	  <with-param pos="1"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="5"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="determiner">
	  <with-param pos="1"/>
	</call-macro>
	<out> 
	  <chunk name="det_nom_nom_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
		  <tag><var n="tipus_det"/></tag>
	      <tag><var n="gen_chunk"/></tag>
	      <tag><var n="nbr_chunk"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
	      <clip pos="1" side="tl" part="gen_mf"/>
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu>
	    <b/> 
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu> 
	    <b/>
	    <lu>
	      <lit v="estilo"/>
	      <lit-tag v="n.m.sg"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>



    
<!--*********************************************************************************************** -->

    <rule comment="REL (función de nome)"> 
      <pattern>
	<pattern-item n="relnom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="relnom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="REL"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_rel"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_rel"/>
	      <clip pos="1" side="tl" part="gen" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr" link-to="4"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    

    <rule comment="REL (función adxectiva: visitors who search peace)"> 
      <pattern>
	<pattern-item n="reladj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="reladj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="REL"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_rel"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_rel"/>
	      <clip pos="1" side="tl" part="gen" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr" link-to="4"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="PRONOME tónico/interrogativo/posesivo (fica como GD ou ND se é o caso)"> 
      <pattern>
	<pattern-item n="tn_itg_pos"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="prn" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_prn"/>
	      <clip pos="1" side="tl" part="tipus_prn"/>
	      <clip pos="1" side="tl" part="gen" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr" link-to="4"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    

    <rule comment="PREP">
      <pattern>
	<pattern-item n="prep"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>
    

    <rule comment="genitiu">
      <pattern>
	<pattern-item n="genitiu"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="GEN"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>
    

 <rule comment="THERE">
      <pattern>
	<pattern-item n="there"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="there" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="a_adv"/></tag>		
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="ADV">
      <pattern>
	<pattern-item n="adv"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<list n="adv_neg"/>
	      </in>
	    </test>
	    <let>
	      <var n="neg"/>
	      <lit-tag v="NEG"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="neg"/>
	      <lit v=""/>
	    </let>
	  </otherwise>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
	      <tag><var n="neg"/></tag>		
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


  <rule comment="ADV ITG">
      <pattern>
	<pattern-item n="advitg"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="a_adv"/></tag>	
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>  
      </action>
    </rule>


    <rule comment="PREADV">
      <pattern>
	<pattern-item n="preadv"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	
	<out>
	  <chunk name="preadv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="a_adv"/></tag>		
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_adv"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


 <rule comment="CNJ">
      <pattern>
	<pattern-item n="cnj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="cnj" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="tags"/></tag>		
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>



    <rule comment="REGRA: reset variables">
      <pattern>
	<pattern-item n="sent"/>
      </pattern>
      <action>
	<let>
	  <var n="nombre"/>
	  <lit-tag v="sg"/>
	</let>
	<let>
	  <var n="genere"/>
	  <lit-tag v="m"/>
	</let>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v=";"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v=":"/>
		  </equal>
		</or>
	      </not>
	    </test>	      
	    <let>
	      <var n="EOS"/>
	      <lit v="true"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="punt">
	    <tags>
	      <tag><lit-tag v="sent"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>
    
    

  <rule comment="REGRA: reset variables">
      <pattern>
	<pattern-item n="coma"/>
      </pattern>
      <action>
<!--	<let>
	  <var n="nombre"/>
	  <lit-tag v="sg"/>
	</let>
	<let>
	  <var n="genere"/>
	  <lit-tag v="m"/>
	</let> -->
        <let>
	  <var n="EOS"/>
	  <lit v="false"/>
	</let>
	<out>
	  <chunk name="coma">
	    <tags>
	      <tag><lit-tag v="cm"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
  </rule>
    
    


  </section-rules>
</transfer>
